function ym(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function au(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _m={exports:{}},rl={},vm={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),C_=Symbol.for("react.portal"),E_=Symbol.for("react.fragment"),T_=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),L_=Symbol.for("react.provider"),M_=Symbol.for("react.context"),O_=Symbol.for("react.forward_ref"),A_=Symbol.for("react.suspense"),R_=Symbol.for("react.memo"),z_=Symbol.for("react.lazy"),kf=Symbol.iterator;function B_(e){return e===null||typeof e!="object"?null:(e=kf&&e[kf]||e["@@iterator"],typeof e=="function"?e:null)}var bm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wm=Object.assign,km={};function zs(e,t,r){this.props=e,this.context=t,this.refs=km,this.updater=r||bm}zs.prototype.isReactComponent={};zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jm(){}jm.prototype=zs.prototype;function ou(e,t,r){this.props=e,this.context=t,this.refs=km,this.updater=r||bm}var lu=ou.prototype=new jm;lu.constructor=ou;wm(lu,zs.prototype);lu.isPureReactComponent=!0;var jf=Array.isArray,Nm=Object.prototype.hasOwnProperty,cu={current:null},Sm={key:!0,ref:!0,__self:!0,__source:!0};function Cm(e,t,r){var i,a={},l=null,d=null;if(t!=null)for(i in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(l=""+t.key),t)Nm.call(t,i)&&!Sm.hasOwnProperty(i)&&(a[i]=t[i]);var f=arguments.length-2;if(f===1)a.children=r;else if(1<f){for(var p=Array(f),x=0;x<f;x++)p[x]=arguments[x+2];a.children=p}if(e&&e.defaultProps)for(i in f=e.defaultProps,f)a[i]===void 0&&(a[i]=f[i]);return{$$typeof:ta,type:e,key:l,ref:d,props:a,_owner:cu.current}}function D_(e,t){return{$$typeof:ta,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function du(e){return typeof e=="object"&&e!==null&&e.$$typeof===ta}function I_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nf=/\/+/g;function dc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?I_(""+e.key):t.toString(36)}function so(e,t,r,i,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(l){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case ta:case C_:d=!0}}if(d)return d=e,a=a(d),e=i===""?"."+dc(d,0):i,jf(a)?(r="",e!=null&&(r=e.replace(Nf,"$&/")+"/"),so(a,t,r,"",function(x){return x})):a!=null&&(du(a)&&(a=D_(a,r+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(Nf,"$&/")+"/")+e)),t.push(a)),1;if(d=0,i=i===""?".":i+":",jf(e))for(var f=0;f<e.length;f++){l=e[f];var p=i+dc(l,f);d+=so(l,t,r,p,a)}else if(p=B_(e),typeof p=="function")for(e=p.call(e),f=0;!(l=e.next()).done;)l=l.value,p=i+dc(l,f++),d+=so(l,t,r,p,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function za(e,t,r){if(e==null)return e;var i=[],a=0;return so(e,i,"","",function(l){return t.call(r,l,a++)}),i}function $_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},io={transition:null},F_={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:io,ReactCurrentOwner:cu};function Em(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:za,forEach:function(e,t,r){za(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return za(e,function(){t++}),t},toArray:function(e){return za(e,function(t){return t})||[]},only:function(e){if(!du(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=zs;_e.Fragment=E_;_e.Profiler=P_;_e.PureComponent=ou;_e.StrictMode=T_;_e.Suspense=A_;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F_;_e.act=Em;_e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=wm({},e.props),a=e.key,l=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,d=cu.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(p in t)Nm.call(t,p)&&!Sm.hasOwnProperty(p)&&(i[p]=t[p]===void 0&&f!==void 0?f[p]:t[p])}var p=arguments.length-2;if(p===1)i.children=r;else if(1<p){f=Array(p);for(var x=0;x<p;x++)f[x]=arguments[x+2];i.children=f}return{$$typeof:ta,type:e.type,key:a,ref:l,props:i,_owner:d}};_e.createContext=function(e){return e={$$typeof:M_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:L_,_context:e},e.Consumer=e};_e.createElement=Cm;_e.createFactory=function(e){var t=Cm.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:O_,render:e}};_e.isValidElement=du;_e.lazy=function(e){return{$$typeof:z_,_payload:{_status:-1,_result:e},_init:$_}};_e.memo=function(e,t){return{$$typeof:R_,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=io.transition;io.transition={};try{e()}finally{io.transition=t}};_e.unstable_act=Em;_e.useCallback=function(e,t){return wt.current.useCallback(e,t)};_e.useContext=function(e){return wt.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};_e.useEffect=function(e,t){return wt.current.useEffect(e,t)};_e.useId=function(){return wt.current.useId()};_e.useImperativeHandle=function(e,t,r){return wt.current.useImperativeHandle(e,t,r)};_e.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return wt.current.useMemo(e,t)};_e.useReducer=function(e,t,r){return wt.current.useReducer(e,t,r)};_e.useRef=function(e){return wt.current.useRef(e)};_e.useState=function(e){return wt.current.useState(e)};_e.useSyncExternalStore=function(e,t,r){return wt.current.useSyncExternalStore(e,t,r)};_e.useTransition=function(){return wt.current.useTransition()};_e.version="18.3.1";vm.exports=_e;var k=vm.exports;const pn=au(k),U_=ym({__proto__:null,default:pn},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_=k,Z_=Symbol.for("react.element"),V_=Symbol.for("react.fragment"),W_=Object.prototype.hasOwnProperty,q_=H_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K_={key:!0,ref:!0,__self:!0,__source:!0};function Tm(e,t,r){var i,a={},l=null,d=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(d=t.ref);for(i in t)W_.call(t,i)&&!K_.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Z_,type:e,key:l,ref:d,props:a,_owner:q_.current}}rl.Fragment=V_;rl.jsx=Tm;rl.jsxs=Tm;_m.exports=rl;var n=_m.exports,Pm={exports:{}},Dt={},Lm={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,te){var T=$.length;$.push(te);e:for(;0<T;){var V=T-1>>>1,q=$[V];if(0<a(q,te))$[V]=te,$[T]=q,T=V;else break e}}function r($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var te=$[0],T=$.pop();if(T!==te){$[0]=T;e:for(var V=0,q=$.length,de=q>>>1;V<de;){var H=2*(V+1)-1,Y=$[H],re=H+1,ue=$[re];if(0>a(Y,T))re<q&&0>a(ue,Y)?($[V]=ue,$[re]=T,V=re):($[V]=Y,$[H]=T,V=H);else if(re<q&&0>a(ue,T))$[V]=ue,$[re]=T,V=re;else break e}}return te}function a($,te){var T=$.sortIndex-te.sortIndex;return T!==0?T:$.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var p=[],x=[],_=1,g=null,v=3,w=!1,b=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var te=r(x);te!==null;){if(te.callback===null)i(x);else if(te.startTime<=$)i(x),te.sortIndex=te.expirationTime,t(p,te);else break;te=r(x)}}function R($){if(C=!1,N($),!b)if(r(p)!==null)b=!0,ie(M);else{var te=r(x);te!==null&&J(R,te.startTime-$)}}function M($,te){b=!1,C&&(C=!1,S(P),P=-1),w=!0;var T=v;try{for(N(te),g=r(p);g!==null&&(!(g.expirationTime>te)||$&&!ne());){var V=g.callback;if(typeof V=="function"){g.callback=null,v=g.priorityLevel;var q=V(g.expirationTime<=te);te=e.unstable_now(),typeof q=="function"?g.callback=q:g===r(p)&&i(p),N(te)}else i(p);g=r(p)}if(g!==null)var de=!0;else{var H=r(x);H!==null&&J(R,H.startTime-te),de=!1}return de}finally{g=null,v=T,w=!1}}var D=!1,O=null,P=-1,G=5,I=-1;function ne(){return!(e.unstable_now()-I<G)}function ge(){if(O!==null){var $=e.unstable_now();I=$;var te=!0;try{te=O(!0,$)}finally{te?z():(D=!1,O=null)}}else D=!1}var z;if(typeof y=="function")z=function(){y(ge)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,oe=ee.port2;ee.port1.onmessage=ge,z=function(){oe.postMessage(null)}}else z=function(){E(ge,0)};function ie($){O=$,D||(D=!0,z())}function J($,te){P=E(function(){$(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){b||w||(b=!0,ie(M))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function($){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var T=v;v=te;try{return $()}finally{v=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var T=v;v=$;try{return te()}finally{v=T}},e.unstable_scheduleCallback=function($,te,T){var V=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?V+T:V):T=V,$){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=T+q,$={id:_++,callback:te,priorityLevel:$,startTime:T,expirationTime:q,sortIndex:-1},T>V?($.sortIndex=T,t(x,$),r(p)===null&&$===r(x)&&(C?(S(P),P=-1):C=!0,J(R,T-V))):($.sortIndex=q,t(p,$),b||w||(b=!0,ie(M))),$},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function($){var te=v;return function(){var T=v;v=te;try{return $.apply(this,arguments)}finally{v=T}}}})(Mm);Lm.exports=Mm;var G_=Lm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_=k,Bt=G_;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Om=new Set,Ri={};function Vn(e,t){Ss(e,t),Ss(e+"Capture",t)}function Ss(e,t){for(Ri[e]=t,e=0;e<t.length;e++)Om.add(t[e])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=Object.prototype.hasOwnProperty,X_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sf={},Cf={};function J_(e){return qc.call(Cf,e)?!0:qc.call(Sf,e)?!1:X_.test(e)?Cf[e]=!0:(Sf[e]=!0,!1)}function Y_(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ev(e,t,r,i){if(t===null||typeof t>"u"||Y_(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kt(e,t,r,i,a,l,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=d}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var uu=/[\-:]([a-z])/g;function hu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uu,hu);lt[t]=new kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uu,hu);lt[t]=new kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uu,hu);lt[t]=new kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new kt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function fu(e,t,r,i){var a=lt.hasOwnProperty(t)?lt[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ev(t,r,a,i)&&(r=null),i||a===null?J_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Zr=Q_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ba=Symbol.for("react.element"),as=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),pu=Symbol.for("react.strict_mode"),Kc=Symbol.for("react.profiler"),Am=Symbol.for("react.provider"),Rm=Symbol.for("react.context"),mu=Symbol.for("react.forward_ref"),Gc=Symbol.for("react.suspense"),Qc=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),zm=Symbol.for("react.offscreen"),Ef=Symbol.iterator;function ci(e){return e===null||typeof e!="object"?null:(e=Ef&&e[Ef]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,uc;function vi(e){if(uc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);uc=t&&t[1]||""}return`
`+uc+e}var hc=!1;function fc(e,t){if(!e||hc)return"";hc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var i=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){i=x}e.call(t.prototype)}else{try{throw Error()}catch(x){i=x}e()}}catch(x){if(x&&i&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),l=i.stack.split(`
`),d=a.length-1,f=l.length-1;1<=d&&0<=f&&a[d]!==l[f];)f--;for(;1<=d&&0<=f;d--,f--)if(a[d]!==l[f]){if(d!==1||f!==1)do if(d--,f--,0>f||a[d]!==l[f]){var p=`
`+a[d].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=d&&0<=f);break}}}finally{hc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vi(e):""}function tv(e){switch(e.tag){case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return e=fc(e.type,!1),e;case 11:return e=fc(e.type.render,!1),e;case 1:return e=fc(e.type,!0),e;default:return""}}function Xc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case os:return"Fragment";case as:return"Portal";case Kc:return"Profiler";case pu:return"StrictMode";case Gc:return"Suspense";case Qc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rm:return(e.displayName||"Context")+".Consumer";case Am:return(e._context.displayName||"Context")+".Provider";case mu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gu:return t=e.displayName||null,t!==null?t:Xc(e.type)||"Memo";case Qr:t=e._payload,e=e._init;try{return Xc(e(t))}catch{}}return null}function rv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xc(t);case 8:return t===pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nv(e){var t=Bm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){i=""+d,l.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Da(e){e._valueTracker||(e._valueTracker=nv(e))}function Dm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Bm(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function So(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jc(e,t){var r=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Tf(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=mn(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Im(e,t){t=t.checked,t!=null&&fu(e,"checked",t,!1)}function Yc(e,t){Im(e,t);var r=mn(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ed(e,t.type,r):t.hasOwnProperty("defaultValue")&&ed(e,t.type,mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ed(e,t,r){(t!=="number"||So(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bi=Array.isArray;function ys(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+mn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function td(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Lf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(bi(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mn(r)}}function $m(e,t){var r=mn(t.value),i=mn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Mf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ia,Um=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ia=Ia||document.createElement("div"),Ia.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ia.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sv=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(e){sv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ni[t]=Ni[e]})});function Hm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ni.hasOwnProperty(e)&&Ni[e]?(""+t).trim():t+"px"}function Zm(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=Hm(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var iv=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nd(e,t){if(t){if(iv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function sd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=null;function xu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ad=null,_s=null,vs=null;function Of(e){if(e=sa(e)){if(typeof ad!="function")throw Error(X(280));var t=e.stateNode;t&&(t=ol(t),ad(e.stateNode,e.type,t))}}function Vm(e){_s?vs?vs.push(e):vs=[e]:_s=e}function Wm(){if(_s){var e=_s,t=vs;if(vs=_s=null,Of(e),t)for(e=0;e<t.length;e++)Of(t[e])}}function qm(e,t){return e(t)}function Km(){}var pc=!1;function Gm(e,t,r){if(pc)return e(t,r);pc=!0;try{return qm(e,t,r)}finally{pc=!1,(_s!==null||vs!==null)&&(Km(),Wm())}}function Bi(e,t){var r=e.stateNode;if(r===null)return null;var i=ol(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var od=!1;if($r)try{var di={};Object.defineProperty(di,"passive",{get:function(){od=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{od=!1}function av(e,t,r,i,a,l,d,f,p){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(_){this.onError(_)}}var Si=!1,Co=null,Eo=!1,ld=null,ov={onError:function(e){Si=!0,Co=e}};function lv(e,t,r,i,a,l,d,f,p){Si=!1,Co=null,av.apply(ov,arguments)}function cv(e,t,r,i,a,l,d,f,p){if(lv.apply(this,arguments),Si){if(Si){var x=Co;Si=!1,Co=null}else throw Error(X(198));Eo||(Eo=!0,ld=x)}}function Wn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Af(e){if(Wn(e)!==e)throw Error(X(188))}function dv(e){var t=e.alternate;if(!t){if(t=Wn(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return Af(a),e;if(l===i)return Af(a),t;l=l.sibling}throw Error(X(188))}if(r.return!==i.return)r=a,i=l;else{for(var d=!1,f=a.child;f;){if(f===r){d=!0,r=a,i=l;break}if(f===i){d=!0,i=a,r=l;break}f=f.sibling}if(!d){for(f=l.child;f;){if(f===r){d=!0,r=l,i=a;break}if(f===i){d=!0,i=l,r=a;break}f=f.sibling}if(!d)throw Error(X(189))}}if(r.alternate!==i)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function Xm(e){return e=dv(e),e!==null?Jm(e):null}function Jm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jm(e);if(t!==null)return t;e=e.sibling}return null}var Ym=Bt.unstable_scheduleCallback,Rf=Bt.unstable_cancelCallback,uv=Bt.unstable_shouldYield,hv=Bt.unstable_requestPaint,Ve=Bt.unstable_now,fv=Bt.unstable_getCurrentPriorityLevel,yu=Bt.unstable_ImmediatePriority,eg=Bt.unstable_UserBlockingPriority,To=Bt.unstable_NormalPriority,pv=Bt.unstable_LowPriority,tg=Bt.unstable_IdlePriority,nl=null,br=null;function mv(e){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(nl,e,void 0,(e.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:yv,gv=Math.log,xv=Math.LN2;function yv(e){return e>>>=0,e===0?32:31-(gv(e)/xv|0)|0}var $a=64,Fa=4194304;function wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Po(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,l=e.pingedLanes,d=r&268435455;if(d!==0){var f=d&~a;f!==0?i=wi(f):(l&=d,l!==0&&(i=wi(l)))}else d=r&~a,d!==0?i=wi(d):l!==0&&(i=wi(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-or(t),a=1<<r,i|=e[r],t&=~a;return i}function _v(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vv(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var d=31-or(l),f=1<<d,p=a[d];p===-1?(!(f&r)||f&i)&&(a[d]=_v(f,t)):p<=t&&(e.expiredLanes|=f),l&=~f}}function cd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rg(){var e=$a;return $a<<=1,!($a&4194240)&&($a=64),e}function mc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ra(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-or(t),e[t]=r}function bv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-or(r),l=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~l}}function _u(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-or(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var Le=0;function ng(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sg,vu,ig,ag,og,dd=!1,Ua=[],nn=null,sn=null,an=null,Di=new Map,Ii=new Map,Jr=[],wv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zf(e,t){switch(e){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":Di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function ui(e,t,r,i,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},t!==null&&(t=sa(t),t!==null&&vu(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kv(e,t,r,i,a){switch(t){case"focusin":return nn=ui(nn,e,t,r,i,a),!0;case"dragenter":return sn=ui(sn,e,t,r,i,a),!0;case"mouseover":return an=ui(an,e,t,r,i,a),!0;case"pointerover":var l=a.pointerId;return Di.set(l,ui(Di.get(l)||null,e,t,r,i,a)),!0;case"gotpointercapture":return l=a.pointerId,Ii.set(l,ui(Ii.get(l)||null,e,t,r,i,a)),!0}return!1}function lg(e){var t=Mn(e.target);if(t!==null){var r=Wn(t);if(r!==null){if(t=r.tag,t===13){if(t=Qm(r),t!==null){e.blockedOn=t,og(e.priority,function(){ig(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ao(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ud(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);id=i,r.target.dispatchEvent(i),id=null}else return t=sa(r),t!==null&&vu(t),e.blockedOn=r,!1;t.shift()}return!0}function Bf(e,t,r){ao(e)&&r.delete(t)}function jv(){dd=!1,nn!==null&&ao(nn)&&(nn=null),sn!==null&&ao(sn)&&(sn=null),an!==null&&ao(an)&&(an=null),Di.forEach(Bf),Ii.forEach(Bf)}function hi(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,jv)))}function $i(e){function t(a){return hi(a,e)}if(0<Ua.length){hi(Ua[0],e);for(var r=1;r<Ua.length;r++){var i=Ua[r];i.blockedOn===e&&(i.blockedOn=null)}}for(nn!==null&&hi(nn,e),sn!==null&&hi(sn,e),an!==null&&hi(an,e),Di.forEach(t),Ii.forEach(t),r=0;r<Jr.length;r++)i=Jr[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Jr.length&&(r=Jr[0],r.blockedOn===null);)lg(r),r.blockedOn===null&&Jr.shift()}var bs=Zr.ReactCurrentBatchConfig,Lo=!0;function Nv(e,t,r,i){var a=Le,l=bs.transition;bs.transition=null;try{Le=1,bu(e,t,r,i)}finally{Le=a,bs.transition=l}}function Sv(e,t,r,i){var a=Le,l=bs.transition;bs.transition=null;try{Le=4,bu(e,t,r,i)}finally{Le=a,bs.transition=l}}function bu(e,t,r,i){if(Lo){var a=ud(e,t,r,i);if(a===null)Nc(e,t,i,Mo,r),zf(e,i);else if(kv(a,e,t,r,i))i.stopPropagation();else if(zf(e,i),t&4&&-1<wv.indexOf(e)){for(;a!==null;){var l=sa(a);if(l!==null&&sg(l),l=ud(e,t,r,i),l===null&&Nc(e,t,i,Mo,r),l===a)break;a=l}a!==null&&i.stopPropagation()}else Nc(e,t,i,null,r)}}var Mo=null;function ud(e,t,r,i){if(Mo=null,e=xu(i),e=Mn(e),e!==null)if(t=Wn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mo=e,null}function cg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fv()){case yu:return 1;case eg:return 4;case To:case pv:return 16;case tg:return 536870912;default:return 16}default:return 16}}var en=null,wu=null,oo=null;function dg(){if(oo)return oo;var e,t=wu,r=t.length,i,a="value"in en?en.value:en.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var d=r-e;for(i=1;i<=d&&t[r-i]===a[l-i];i++);return oo=a.slice(e,1<i?1-i:void 0)}function lo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ha(){return!0}function Df(){return!1}function It(e){function t(r,i,a,l,d){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(r=e[f],this[f]=r?r(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ha:Df,this.isPropagationStopped=Df,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),t}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ku=It(Bs),na=Ue({},Bs,{view:0,detail:0}),Cv=It(na),gc,xc,fi,sl=Ue({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fi&&(fi&&e.type==="mousemove"?(gc=e.screenX-fi.screenX,xc=e.screenY-fi.screenY):xc=gc=0,fi=e),gc)},movementY:function(e){return"movementY"in e?e.movementY:xc}}),If=It(sl),Ev=Ue({},sl,{dataTransfer:0}),Tv=It(Ev),Pv=Ue({},na,{relatedTarget:0}),yc=It(Pv),Lv=Ue({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Mv=It(Lv),Ov=Ue({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Av=It(Ov),Rv=Ue({},Bs,{data:0}),$f=It(Rv),zv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dv[e])?!!t[e]:!1}function ju(){return Iv}var $v=Ue({},na,{key:function(e){if(e.key){var t=zv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(e){return e.type==="keypress"?lo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fv=It($v),Uv=Ue({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=It(Uv),Hv=Ue({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),Zv=It(Hv),Vv=Ue({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wv=It(Vv),qv=Ue({},sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kv=It(qv),Gv=[9,13,27,32],Nu=$r&&"CompositionEvent"in window,Ci=null;$r&&"documentMode"in document&&(Ci=document.documentMode);var Qv=$r&&"TextEvent"in window&&!Ci,ug=$r&&(!Nu||Ci&&8<Ci&&11>=Ci),Uf=" ",Hf=!1;function hg(e,t){switch(e){case"keyup":return Gv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function Xv(e,t){switch(e){case"compositionend":return fg(t);case"keypress":return t.which!==32?null:(Hf=!0,Uf);case"textInput":return e=t.data,e===Uf&&Hf?null:e;default:return null}}function Jv(e,t){if(ls)return e==="compositionend"||!Nu&&hg(e,t)?(e=dg(),oo=wu=en=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ug&&t.locale!=="ko"?null:t.data;default:return null}}var Yv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yv[e.type]:t==="textarea"}function pg(e,t,r,i){Vm(i),t=Oo(t,"onChange"),0<t.length&&(r=new ku("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Ei=null,Fi=null;function eb(e){Ng(e,0)}function il(e){var t=us(e);if(Dm(t))return e}function tb(e,t){if(e==="change")return t}var mg=!1;if($r){var _c;if($r){var vc="oninput"in document;if(!vc){var Vf=document.createElement("div");Vf.setAttribute("oninput","return;"),vc=typeof Vf.oninput=="function"}_c=vc}else _c=!1;mg=_c&&(!document.documentMode||9<document.documentMode)}function Wf(){Ei&&(Ei.detachEvent("onpropertychange",gg),Fi=Ei=null)}function gg(e){if(e.propertyName==="value"&&il(Fi)){var t=[];pg(t,Fi,e,xu(e)),Gm(eb,t)}}function rb(e,t,r){e==="focusin"?(Wf(),Ei=t,Fi=r,Ei.attachEvent("onpropertychange",gg)):e==="focusout"&&Wf()}function nb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return il(Fi)}function sb(e,t){if(e==="click")return il(t)}function ib(e,t){if(e==="input"||e==="change")return il(t)}function ab(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cr=typeof Object.is=="function"?Object.is:ab;function Ui(e,t){if(cr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!qc.call(t,a)||!cr(e[a],t[a]))return!1}return!0}function qf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kf(e,t){var r=qf(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qf(r)}}function xg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yg(){for(var e=window,t=So();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=So(e.document)}return t}function Su(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ob(e){var t=yg(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xg(r.ownerDocument.documentElement,r)){if(i!==null&&Su(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(i.start,a);i=i.end===void 0?l:Math.min(i.end,a),!e.extend&&l>i&&(a=i,i=l,l=a),a=Kf(r,l);var d=Kf(r,i);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lb=$r&&"documentMode"in document&&11>=document.documentMode,cs=null,hd=null,Ti=null,fd=!1;function Gf(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fd||cs==null||cs!==So(i)||(i=cs,"selectionStart"in i&&Su(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ti&&Ui(Ti,i)||(Ti=i,i=Oo(hd,"onSelect"),0<i.length&&(t=new ku("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=cs)))}function Za(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ds={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionend:Za("Transition","TransitionEnd")},bc={},_g={};$r&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function al(e){if(bc[e])return bc[e];if(!ds[e])return e;var t=ds[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _g)return bc[e]=t[r];return e}var vg=al("animationend"),bg=al("animationiteration"),wg=al("animationstart"),kg=al("transitionend"),jg=new Map,Qf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(e,t){jg.set(e,t),Vn(t,[e])}for(var wc=0;wc<Qf.length;wc++){var kc=Qf[wc],cb=kc.toLowerCase(),db=kc[0].toUpperCase()+kc.slice(1);_n(cb,"on"+db)}_n(vg,"onAnimationEnd");_n(bg,"onAnimationIteration");_n(wg,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(kg,"onTransitionEnd");Ss("onMouseEnter",["mouseout","mouseover"]);Ss("onMouseLeave",["mouseout","mouseover"]);Ss("onPointerEnter",["pointerout","pointerover"]);Ss("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ub=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function Xf(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,cv(i,t,void 0,e),e.currentTarget=null}function Ng(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var d=i.length-1;0<=d;d--){var f=i[d],p=f.instance,x=f.currentTarget;if(f=f.listener,p!==l&&a.isPropagationStopped())break e;Xf(a,f,x),l=p}else for(d=0;d<i.length;d++){if(f=i[d],p=f.instance,x=f.currentTarget,f=f.listener,p!==l&&a.isPropagationStopped())break e;Xf(a,f,x),l=p}}}if(Eo)throw e=ld,Eo=!1,ld=null,e}function Re(e,t){var r=t[yd];r===void 0&&(r=t[yd]=new Set);var i=e+"__bubble";r.has(i)||(Sg(t,e,2,!1),r.add(i))}function jc(e,t,r){var i=0;t&&(i|=4),Sg(r,e,i,t)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Va]){e[Va]=!0,Om.forEach(function(r){r!=="selectionchange"&&(ub.has(r)||jc(r,!1,e),jc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Va]||(t[Va]=!0,jc("selectionchange",!1,t))}}function Sg(e,t,r,i){switch(cg(t)){case 1:var a=Nv;break;case 4:a=Sv;break;default:a=bu}r=a.bind(null,t,r,e),a=void 0,!od||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Nc(e,t,r,i,a){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var f=i.stateNode.containerInfo;if(f===a||f.nodeType===8&&f.parentNode===a)break;if(d===4)for(d=i.return;d!==null;){var p=d.tag;if((p===3||p===4)&&(p=d.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;d=d.return}for(;f!==null;){if(d=Mn(f),d===null)return;if(p=d.tag,p===5||p===6){i=l=d;continue e}f=f.parentNode}}i=i.return}Gm(function(){var x=l,_=xu(r),g=[];e:{var v=jg.get(e);if(v!==void 0){var w=ku,b=e;switch(e){case"keypress":if(lo(r)===0)break e;case"keydown":case"keyup":w=Fv;break;case"focusin":b="focus",w=yc;break;case"focusout":b="blur",w=yc;break;case"beforeblur":case"afterblur":w=yc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Tv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Zv;break;case vg:case bg:case wg:w=Mv;break;case kg:w=Wv;break;case"scroll":w=Cv;break;case"wheel":w=Kv;break;case"copy":case"cut":case"paste":w=Av;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ff}var C=(t&4)!==0,E=!C&&e==="scroll",S=C?v!==null?v+"Capture":null:v;C=[];for(var y=x,N;y!==null;){N=y;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,S!==null&&(R=Bi(y,S),R!=null&&C.push(Zi(y,R,N)))),E)break;y=y.return}0<C.length&&(v=new w(v,b,null,r,_),g.push({event:v,listeners:C}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",v&&r!==id&&(b=r.relatedTarget||r.fromElement)&&(Mn(b)||b[Fr]))break e;if((w||v)&&(v=_.window===_?_:(v=_.ownerDocument)?v.defaultView||v.parentWindow:window,w?(b=r.relatedTarget||r.toElement,w=x,b=b?Mn(b):null,b!==null&&(E=Wn(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=x),w!==b)){if(C=If,R="onMouseLeave",S="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(C=Ff,R="onPointerLeave",S="onPointerEnter",y="pointer"),E=w==null?v:us(w),N=b==null?v:us(b),v=new C(R,y+"leave",w,r,_),v.target=E,v.relatedTarget=N,R=null,Mn(_)===x&&(C=new C(S,y+"enter",b,r,_),C.target=N,C.relatedTarget=E,R=C),E=R,w&&b)t:{for(C=w,S=b,y=0,N=C;N;N=ns(N))y++;for(N=0,R=S;R;R=ns(R))N++;for(;0<y-N;)C=ns(C),y--;for(;0<N-y;)S=ns(S),N--;for(;y--;){if(C===S||S!==null&&C===S.alternate)break t;C=ns(C),S=ns(S)}C=null}else C=null;w!==null&&Jf(g,v,w,C,!1),b!==null&&E!==null&&Jf(g,E,b,C,!0)}}e:{if(v=x?us(x):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var M=tb;else if(Zf(v))if(mg)M=ib;else{M=nb;var D=rb}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=sb);if(M&&(M=M(e,x))){pg(g,M,r,_);break e}D&&D(e,v,x),e==="focusout"&&(D=v._wrapperState)&&D.controlled&&v.type==="number"&&ed(v,"number",v.value)}switch(D=x?us(x):window,e){case"focusin":(Zf(D)||D.contentEditable==="true")&&(cs=D,hd=x,Ti=null);break;case"focusout":Ti=hd=cs=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,Gf(g,r,_);break;case"selectionchange":if(lb)break;case"keydown":case"keyup":Gf(g,r,_)}var O;if(Nu)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ls?hg(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(ug&&r.locale!=="ko"&&(ls||P!=="onCompositionStart"?P==="onCompositionEnd"&&ls&&(O=dg()):(en=_,wu="value"in en?en.value:en.textContent,ls=!0)),D=Oo(x,P),0<D.length&&(P=new $f(P,e,null,r,_),g.push({event:P,listeners:D}),O?P.data=O:(O=fg(r),O!==null&&(P.data=O)))),(O=Qv?Xv(e,r):Jv(e,r))&&(x=Oo(x,"onBeforeInput"),0<x.length&&(_=new $f("onBeforeInput","beforeinput",null,r,_),g.push({event:_,listeners:x}),_.data=O))}Ng(g,t)})}function Zi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Oo(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Bi(e,r),l!=null&&i.unshift(Zi(e,l,a)),l=Bi(e,t),l!=null&&i.push(Zi(e,l,a))),e=e.return}return i}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jf(e,t,r,i,a){for(var l=t._reactName,d=[];r!==null&&r!==i;){var f=r,p=f.alternate,x=f.stateNode;if(p!==null&&p===i)break;f.tag===5&&x!==null&&(f=x,a?(p=Bi(r,l),p!=null&&d.unshift(Zi(r,p,f))):a||(p=Bi(r,l),p!=null&&d.push(Zi(r,p,f)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var hb=/\r\n?/g,fb=/\u0000|\uFFFD/g;function Yf(e){return(typeof e=="string"?e:""+e).replace(hb,`
`).replace(fb,"")}function Wa(e,t,r){if(t=Yf(t),Yf(e)!==t&&r)throw Error(X(425))}function Ao(){}var pd=null,md=null;function gd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,pb=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof ep<"u"?function(e){return ep.resolve(null).then(e).catch(gb)}:xd;function gb(e){setTimeout(function(){throw e})}function Sc(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),$i(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);$i(t)}function on(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),_r="__reactFiber$"+Ds,Vi="__reactProps$"+Ds,Fr="__reactContainer$"+Ds,yd="__reactEvents$"+Ds,xb="__reactListeners$"+Ds,yb="__reactHandles$"+Ds;function Mn(e){var t=e[_r];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fr]||r[_r]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=tp(e);e!==null;){if(r=e[_r])return r;e=tp(e)}return t}e=r,r=e.parentNode}return null}function sa(e){return e=e[_r]||e[Fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function us(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function ol(e){return e[Vi]||null}var _d=[],hs=-1;function vn(e){return{current:e}}function ze(e){0>hs||(e.current=_d[hs],_d[hs]=null,hs--)}function Oe(e,t){hs++,_d[hs]=e.current,e.current=t}var gn={},pt=vn(gn),Et=vn(!1),In=gn;function Cs(e,t){var r=e.type.contextTypes;if(!r)return gn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Tt(e){return e=e.childContextTypes,e!=null}function Ro(){ze(Et),ze(pt)}function rp(e,t,r){if(pt.current!==gn)throw Error(X(168));Oe(pt,t),Oe(Et,r)}function Cg(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(X(108,rv(e)||"Unknown",a));return Ue({},r,i)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,In=pt.current,Oe(pt,e),Oe(Et,Et.current),!0}function np(e,t,r){var i=e.stateNode;if(!i)throw Error(X(169));r?(e=Cg(e,t,In),i.__reactInternalMemoizedMergedChildContext=e,ze(Et),ze(pt),Oe(pt,e)):ze(Et),Oe(Et,r)}var Ar=null,ll=!1,Cc=!1;function Eg(e){Ar===null?Ar=[e]:Ar.push(e)}function _b(e){ll=!0,Eg(e)}function bn(){if(!Cc&&Ar!==null){Cc=!0;var e=0,t=Le;try{var r=Ar;for(Le=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Ar=null,ll=!1}catch(a){throw Ar!==null&&(Ar=Ar.slice(e+1)),Ym(yu,bn),a}finally{Le=t,Cc=!1}}return null}var fs=[],ps=0,Bo=null,Do=0,Ht=[],Zt=0,$n=null,Rr=1,zr="";function Pn(e,t){fs[ps++]=Do,fs[ps++]=Bo,Bo=e,Do=t}function Tg(e,t,r){Ht[Zt++]=Rr,Ht[Zt++]=zr,Ht[Zt++]=$n,$n=e;var i=Rr;e=zr;var a=32-or(i)-1;i&=~(1<<a),r+=1;var l=32-or(t)+a;if(30<l){var d=a-a%5;l=(i&(1<<d)-1).toString(32),i>>=d,a-=d,Rr=1<<32-or(t)+a|r<<a|i,zr=l+e}else Rr=1<<l|r<<a|i,zr=e}function Cu(e){e.return!==null&&(Pn(e,1),Tg(e,1,0))}function Eu(e){for(;e===Bo;)Bo=fs[--ps],fs[ps]=null,Do=fs[--ps],fs[ps]=null;for(;e===$n;)$n=Ht[--Zt],Ht[Zt]=null,zr=Ht[--Zt],Ht[Zt]=null,Rr=Ht[--Zt],Ht[Zt]=null}var zt=null,Rt=null,Be=!1,ir=null;function Pg(e,t){var r=Wt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function sp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,Rt=on(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$n!==null?{id:Rr,overflow:zr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Wt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,zt=e,Rt=null,!0):!1;default:return!1}}function vd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bd(e){if(Be){var t=Rt;if(t){var r=t;if(!sp(e,t)){if(vd(e))throw Error(X(418));t=on(r.nextSibling);var i=zt;t&&sp(e,t)?Pg(i,r):(e.flags=e.flags&-4097|2,Be=!1,zt=e)}}else{if(vd(e))throw Error(X(418));e.flags=e.flags&-4097|2,Be=!1,zt=e}}}function ip(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function qa(e){if(e!==zt)return!1;if(!Be)return ip(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gd(e.type,e.memoizedProps)),t&&(t=Rt)){if(vd(e))throw Lg(),Error(X(418));for(;t;)Pg(e,t),t=on(t.nextSibling)}if(ip(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Rt=on(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=zt?on(e.stateNode.nextSibling):null;return!0}function Lg(){for(var e=Rt;e;)e=on(e.nextSibling)}function Es(){Rt=zt=null,Be=!1}function Tu(e){ir===null?ir=[e]:ir.push(e)}var vb=Zr.ReactCurrentBatchConfig;function pi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var i=r.stateNode}if(!i)throw Error(X(147,e));var a=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(d){var f=a.refs;d===null?delete f[l]:f[l]=d},t._stringRef=l,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ap(e){var t=e._init;return t(e._payload)}function Mg(e){function t(S,y){if(e){var N=S.deletions;N===null?(S.deletions=[y],S.flags|=16):N.push(y)}}function r(S,y){if(!e)return null;for(;y!==null;)t(S,y),y=y.sibling;return null}function i(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function a(S,y){return S=un(S,y),S.index=0,S.sibling=null,S}function l(S,y,N){return S.index=N,e?(N=S.alternate,N!==null?(N=N.index,N<y?(S.flags|=2,y):N):(S.flags|=2,y)):(S.flags|=1048576,y)}function d(S){return e&&S.alternate===null&&(S.flags|=2),S}function f(S,y,N,R){return y===null||y.tag!==6?(y=Ac(N,S.mode,R),y.return=S,y):(y=a(y,N),y.return=S,y)}function p(S,y,N,R){var M=N.type;return M===os?_(S,y,N.props.children,R,N.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Qr&&ap(M)===y.type)?(R=a(y,N.props),R.ref=pi(S,y,N),R.return=S,R):(R=go(N.type,N.key,N.props,null,S.mode,R),R.ref=pi(S,y,N),R.return=S,R)}function x(S,y,N,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=Rc(N,S.mode,R),y.return=S,y):(y=a(y,N.children||[]),y.return=S,y)}function _(S,y,N,R,M){return y===null||y.tag!==7?(y=Bn(N,S.mode,R,M),y.return=S,y):(y=a(y,N),y.return=S,y)}function g(S,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ac(""+y,S.mode,N),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ba:return N=go(y.type,y.key,y.props,null,S.mode,N),N.ref=pi(S,null,y),N.return=S,N;case as:return y=Rc(y,S.mode,N),y.return=S,y;case Qr:var R=y._init;return g(S,R(y._payload),N)}if(bi(y)||ci(y))return y=Bn(y,S.mode,N,null),y.return=S,y;Ka(S,y)}return null}function v(S,y,N,R){var M=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:f(S,y,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ba:return N.key===M?p(S,y,N,R):null;case as:return N.key===M?x(S,y,N,R):null;case Qr:return M=N._init,v(S,y,M(N._payload),R)}if(bi(N)||ci(N))return M!==null?null:_(S,y,N,R,null);Ka(S,N)}return null}function w(S,y,N,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(N)||null,f(y,S,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ba:return S=S.get(R.key===null?N:R.key)||null,p(y,S,R,M);case as:return S=S.get(R.key===null?N:R.key)||null,x(y,S,R,M);case Qr:var D=R._init;return w(S,y,N,D(R._payload),M)}if(bi(R)||ci(R))return S=S.get(N)||null,_(y,S,R,M,null);Ka(y,R)}return null}function b(S,y,N,R){for(var M=null,D=null,O=y,P=y=0,G=null;O!==null&&P<N.length;P++){O.index>P?(G=O,O=null):G=O.sibling;var I=v(S,O,N[P],R);if(I===null){O===null&&(O=G);break}e&&O&&I.alternate===null&&t(S,O),y=l(I,y,P),D===null?M=I:D.sibling=I,D=I,O=G}if(P===N.length)return r(S,O),Be&&Pn(S,P),M;if(O===null){for(;P<N.length;P++)O=g(S,N[P],R),O!==null&&(y=l(O,y,P),D===null?M=O:D.sibling=O,D=O);return Be&&Pn(S,P),M}for(O=i(S,O);P<N.length;P++)G=w(O,S,P,N[P],R),G!==null&&(e&&G.alternate!==null&&O.delete(G.key===null?P:G.key),y=l(G,y,P),D===null?M=G:D.sibling=G,D=G);return e&&O.forEach(function(ne){return t(S,ne)}),Be&&Pn(S,P),M}function C(S,y,N,R){var M=ci(N);if(typeof M!="function")throw Error(X(150));if(N=M.call(N),N==null)throw Error(X(151));for(var D=M=null,O=y,P=y=0,G=null,I=N.next();O!==null&&!I.done;P++,I=N.next()){O.index>P?(G=O,O=null):G=O.sibling;var ne=v(S,O,I.value,R);if(ne===null){O===null&&(O=G);break}e&&O&&ne.alternate===null&&t(S,O),y=l(ne,y,P),D===null?M=ne:D.sibling=ne,D=ne,O=G}if(I.done)return r(S,O),Be&&Pn(S,P),M;if(O===null){for(;!I.done;P++,I=N.next())I=g(S,I.value,R),I!==null&&(y=l(I,y,P),D===null?M=I:D.sibling=I,D=I);return Be&&Pn(S,P),M}for(O=i(S,O);!I.done;P++,I=N.next())I=w(O,S,P,I.value,R),I!==null&&(e&&I.alternate!==null&&O.delete(I.key===null?P:I.key),y=l(I,y,P),D===null?M=I:D.sibling=I,D=I);return e&&O.forEach(function(ge){return t(S,ge)}),Be&&Pn(S,P),M}function E(S,y,N,R){if(typeof N=="object"&&N!==null&&N.type===os&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ba:e:{for(var M=N.key,D=y;D!==null;){if(D.key===M){if(M=N.type,M===os){if(D.tag===7){r(S,D.sibling),y=a(D,N.props.children),y.return=S,S=y;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Qr&&ap(M)===D.type){r(S,D.sibling),y=a(D,N.props),y.ref=pi(S,D,N),y.return=S,S=y;break e}r(S,D);break}else t(S,D);D=D.sibling}N.type===os?(y=Bn(N.props.children,S.mode,R,N.key),y.return=S,S=y):(R=go(N.type,N.key,N.props,null,S.mode,R),R.ref=pi(S,y,N),R.return=S,S=R)}return d(S);case as:e:{for(D=N.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){r(S,y.sibling),y=a(y,N.children||[]),y.return=S,S=y;break e}else{r(S,y);break}else t(S,y);y=y.sibling}y=Rc(N,S.mode,R),y.return=S,S=y}return d(S);case Qr:return D=N._init,E(S,y,D(N._payload),R)}if(bi(N))return b(S,y,N,R);if(ci(N))return C(S,y,N,R);Ka(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(r(S,y.sibling),y=a(y,N),y.return=S,S=y):(r(S,y),y=Ac(N,S.mode,R),y.return=S,S=y),d(S)):r(S,y)}return E}var Ts=Mg(!0),Og=Mg(!1),Io=vn(null),$o=null,ms=null,Pu=null;function Lu(){Pu=ms=$o=null}function Mu(e){var t=Io.current;ze(Io),e._currentValue=t}function wd(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function ws(e,t){$o=e,Pu=ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Pu!==e)if(e={context:e,memoizedValue:t,next:null},ms===null){if($o===null)throw Error(X(308));ms=e,$o.dependencies={lanes:0,firstContext:e}}else ms=ms.next=e;return t}var On=null;function Ou(e){On===null?On=[e]:On.push(e)}function Ag(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,Ou(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ur(e,i)}function Ur(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xr=!1;function Au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ln(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ce&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Ur(e,r)}return a=i.interleaved,a===null?(t.next=t,Ou(i)):(t.next=a.next,a.next=t),i.interleaved=t,Ur(e,r)}function co(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,_u(e,r)}}function op(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=d:l=l.next=d,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fo(e,t,r,i){var a=e.updateQueue;Xr=!1;var l=a.firstBaseUpdate,d=a.lastBaseUpdate,f=a.shared.pending;if(f!==null){a.shared.pending=null;var p=f,x=p.next;p.next=null,d===null?l=x:d.next=x,d=p;var _=e.alternate;_!==null&&(_=_.updateQueue,f=_.lastBaseUpdate,f!==d&&(f===null?_.firstBaseUpdate=x:f.next=x,_.lastBaseUpdate=p))}if(l!==null){var g=a.baseState;d=0,_=x=p=null,f=l;do{var v=f.lane,w=f.eventTime;if((i&v)===v){_!==null&&(_=_.next={eventTime:w,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var b=e,C=f;switch(v=t,w=r,C.tag){case 1:if(b=C.payload,typeof b=="function"){g=b.call(w,g,v);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=C.payload,v=typeof b=="function"?b.call(w,g,v):b,v==null)break e;g=Ue({},g,v);break e;case 2:Xr=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[f]:v.push(f))}else w={eventTime:w,lane:v,tag:f.tag,payload:f.payload,callback:f.callback,next:null},_===null?(x=_=w,p=g):_=_.next=w,d|=v;if(f=f.next,f===null){if(f=a.shared.pending,f===null)break;v=f,f=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(!0);if(_===null&&(p=g),a.baseState=p,a.firstBaseUpdate=x,a.lastBaseUpdate=_,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Un|=d,e.lanes=d,e.memoizedState=g}}function lp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(X(191,a));a.call(i)}}}var ia={},wr=vn(ia),Wi=vn(ia),qi=vn(ia);function An(e){if(e===ia)throw Error(X(174));return e}function Ru(e,t){switch(Oe(qi,t),Oe(Wi,e),Oe(wr,ia),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=rd(t,e)}ze(wr),Oe(wr,t)}function Ps(){ze(wr),ze(Wi),ze(qi)}function zg(e){An(qi.current);var t=An(wr.current),r=rd(t,e.type);t!==r&&(Oe(Wi,e),Oe(wr,r))}function zu(e){Wi.current===e&&(ze(wr),ze(Wi))}var Ie=vn(0);function Uo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ec=[];function Bu(){for(var e=0;e<Ec.length;e++)Ec[e]._workInProgressVersionPrimary=null;Ec.length=0}var uo=Zr.ReactCurrentDispatcher,Tc=Zr.ReactCurrentBatchConfig,Fn=0,$e=null,Ye=null,rt=null,Ho=!1,Pi=!1,Ki=0,bb=0;function dt(){throw Error(X(321))}function Du(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cr(e[r],t[r]))return!1;return!0}function Iu(e,t,r,i,a,l){if(Fn=l,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=e===null||e.memoizedState===null?Nb:Sb,e=r(i,a),Pi){l=0;do{if(Pi=!1,Ki=0,25<=l)throw Error(X(301));l+=1,rt=Ye=null,t.updateQueue=null,uo.current=Cb,e=r(i,a)}while(Pi)}if(uo.current=Zo,t=Ye!==null&&Ye.next!==null,Fn=0,rt=Ye=$e=null,Ho=!1,t)throw Error(X(300));return e}function $u(){var e=Ki!==0;return Ki=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?$e.memoizedState=rt=e:rt=rt.next=e,rt}function Gt(){if(Ye===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=rt===null?$e.memoizedState:rt.next;if(t!==null)rt=t,Ye=e;else{if(e===null)throw Error(X(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?$e.memoizedState=rt=e:rt=rt.next=e}return rt}function Gi(e,t){return typeof t=="function"?t(e):t}function Pc(e){var t=Gt(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var i=Ye,a=i.baseQueue,l=r.pending;if(l!==null){if(a!==null){var d=a.next;a.next=l.next,l.next=d}i.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,i=i.baseState;var f=d=null,p=null,x=l;do{var _=x.lane;if((Fn&_)===_)p!==null&&(p=p.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),i=x.hasEagerState?x.eagerState:e(i,x.action);else{var g={lane:_,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};p===null?(f=p=g,d=i):p=p.next=g,$e.lanes|=_,Un|=_}x=x.next}while(x!==null&&x!==l);p===null?d=i:p.next=f,cr(i,t.memoizedState)||(Ct=!0),t.memoizedState=i,t.baseState=d,t.baseQueue=p,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do l=a.lane,$e.lanes|=l,Un|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Lc(e){var t=Gt(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var d=a=a.next;do l=e(l,d.action),d=d.next;while(d!==a);cr(l,t.memoizedState)||(Ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,i]}function Bg(){}function Dg(e,t){var r=$e,i=Gt(),a=t(),l=!cr(i.memoizedState,a);if(l&&(i.memoizedState=a,Ct=!0),i=i.queue,Fu(Fg.bind(null,r,i,e),[e]),i.getSnapshot!==t||l||rt!==null&&rt.memoizedState.tag&1){if(r.flags|=2048,Qi(9,$g.bind(null,r,i,a,t),void 0,null),nt===null)throw Error(X(349));Fn&30||Ig(r,t,a)}return a}function Ig(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function $g(e,t,r,i){t.value=r,t.getSnapshot=i,Ug(t)&&Hg(e)}function Fg(e,t,r){return r(function(){Ug(t)&&Hg(e)})}function Ug(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cr(e,r)}catch{return!0}}function Hg(e){var t=Ur(e,1);t!==null&&lr(t,e,1,-1)}function cp(e){var t=yr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:e},t.queue=e,e=e.dispatch=jb.bind(null,$e,e),[t.memoizedState,e]}function Qi(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Zg(){return Gt().memoizedState}function ho(e,t,r,i){var a=yr();$e.flags|=e,a.memoizedState=Qi(1|t,r,void 0,i===void 0?null:i)}function cl(e,t,r,i){var a=Gt();i=i===void 0?null:i;var l=void 0;if(Ye!==null){var d=Ye.memoizedState;if(l=d.destroy,i!==null&&Du(i,d.deps)){a.memoizedState=Qi(t,r,l,i);return}}$e.flags|=e,a.memoizedState=Qi(1|t,r,l,i)}function dp(e,t){return ho(8390656,8,e,t)}function Fu(e,t){return cl(2048,8,e,t)}function Vg(e,t){return cl(4,2,e,t)}function Wg(e,t){return cl(4,4,e,t)}function qg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kg(e,t,r){return r=r!=null?r.concat([e]):null,cl(4,4,qg.bind(null,t,e),r)}function Uu(){}function Gg(e,t){var r=Gt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Du(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Qg(e,t){var r=Gt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Du(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Xg(e,t,r){return Fn&21?(cr(r,t)||(r=rg(),$e.lanes|=r,Un|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=r)}function wb(e,t){var r=Le;Le=r!==0&&4>r?r:4,e(!0);var i=Tc.transition;Tc.transition={};try{e(!1),t()}finally{Le=r,Tc.transition=i}}function Jg(){return Gt().memoizedState}function kb(e,t,r){var i=dn(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Yg(e))e0(t,r);else if(r=Ag(e,t,r,i),r!==null){var a=bt();lr(r,e,i,a),t0(r,t,i)}}function jb(e,t,r){var i=dn(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yg(e))e0(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var d=t.lastRenderedState,f=l(d,r);if(a.hasEagerState=!0,a.eagerState=f,cr(f,d)){var p=t.interleaved;p===null?(a.next=a,Ou(t)):(a.next=p.next,p.next=a),t.interleaved=a;return}}catch{}finally{}r=Ag(e,t,a,i),r!==null&&(a=bt(),lr(r,e,i,a),t0(r,t,i))}}function Yg(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function e0(e,t){Pi=Ho=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function t0(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,_u(e,r)}}var Zo={readContext:Kt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Nb={readContext:Kt,useCallback:function(e,t){return yr().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:dp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ho(4194308,4,qg.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ho(4194308,4,e,t)},useInsertionEffect:function(e,t){return ho(4,2,e,t)},useMemo:function(e,t){var r=yr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=yr();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=kb.bind(null,$e,e),[i.memoizedState,e]},useRef:function(e){var t=yr();return e={current:e},t.memoizedState=e},useState:cp,useDebugValue:Uu,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=cp(!1),t=e[0];return e=wb.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=$e,a=yr();if(Be){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),nt===null)throw Error(X(349));Fn&30||Ig(i,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,dp(Fg.bind(null,i,l,e),[e]),i.flags|=2048,Qi(9,$g.bind(null,i,l,r,t),void 0,null),r},useId:function(){var e=yr(),t=nt.identifierPrefix;if(Be){var r=zr,i=Rr;r=(i&~(1<<32-or(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ki++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=bb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sb={readContext:Kt,useCallback:Gg,useContext:Kt,useEffect:Fu,useImperativeHandle:Kg,useInsertionEffect:Vg,useLayoutEffect:Wg,useMemo:Qg,useReducer:Pc,useRef:Zg,useState:function(){return Pc(Gi)},useDebugValue:Uu,useDeferredValue:function(e){var t=Gt();return Xg(t,Ye.memoizedState,e)},useTransition:function(){var e=Pc(Gi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Bg,useSyncExternalStore:Dg,useId:Jg,unstable_isNewReconciler:!1},Cb={readContext:Kt,useCallback:Gg,useContext:Kt,useEffect:Fu,useImperativeHandle:Kg,useInsertionEffect:Vg,useLayoutEffect:Wg,useMemo:Qg,useReducer:Lc,useRef:Zg,useState:function(){return Lc(Gi)},useDebugValue:Uu,useDeferredValue:function(e){var t=Gt();return Ye===null?t.memoizedState=e:Xg(t,Ye.memoizedState,e)},useTransition:function(){var e=Lc(Gi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Bg,useSyncExternalStore:Dg,useId:Jg,unstable_isNewReconciler:!1};function rr(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function kd(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Ue({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dl={isMounted:function(e){return(e=e._reactInternals)?Wn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=bt(),a=dn(e),l=Ir(i,a);l.payload=t,r!=null&&(l.callback=r),t=ln(e,l,a),t!==null&&(lr(t,e,a,i),co(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=bt(),a=dn(e),l=Ir(i,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=ln(e,l,a),t!==null&&(lr(t,e,a,i),co(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bt(),i=dn(e),a=Ir(r,i);a.tag=2,t!=null&&(a.callback=t),t=ln(e,a,i),t!==null&&(lr(t,e,i,r),co(t,e,i))}};function up(e,t,r,i,a,l,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,d):t.prototype&&t.prototype.isPureReactComponent?!Ui(r,i)||!Ui(a,l):!0}function r0(e,t,r){var i=!1,a=gn,l=t.contextType;return typeof l=="object"&&l!==null?l=Kt(l):(a=Tt(t)?In:pt.current,i=t.contextTypes,l=(i=i!=null)?Cs(e,a):gn),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dl,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function hp(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&dl.enqueueReplaceState(t,t.state,null)}function jd(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Au(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Kt(l):(l=Tt(t)?In:pt.current,a.context=Cs(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(kd(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&dl.enqueueReplaceState(a,a.state,null),Fo(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ls(e,t){try{var r="",i=t;do r+=tv(i),i=i.return;while(i);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Mc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Nd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Eb=typeof WeakMap=="function"?WeakMap:Map;function n0(e,t,r){r=Ir(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Wo||(Wo=!0,Rd=i),Nd(e,t)},r}function s0(e,t,r){r=Ir(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){Nd(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Nd(e,t),typeof i!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function fp(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Eb;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=Ub.bind(null,e,t,r),t.then(e,e))}function pp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mp(e,t,r,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ir(-1,1),t.tag=2,ln(r,t,1))),r.lanes|=1),e)}var Tb=Zr.ReactCurrentOwner,Ct=!1;function xt(e,t,r,i){t.child=e===null?Og(t,null,r,i):Ts(t,e.child,r,i)}function gp(e,t,r,i,a){r=r.render;var l=t.ref;return ws(t,a),i=Iu(e,t,r,i,l,a),r=$u(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hr(e,t,a)):(Be&&r&&Cu(t),t.flags|=1,xt(e,t,i,a),t.child)}function xp(e,t,r,i,a){if(e===null){var l=r.type;return typeof l=="function"&&!Qu(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,i0(e,t,l,i,a)):(e=go(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var d=l.memoizedProps;if(r=r.compare,r=r!==null?r:Ui,r(d,i)&&e.ref===t.ref)return Hr(e,t,a)}return t.flags|=1,e=un(l,i),e.ref=t.ref,e.return=t,t.child=e}function i0(e,t,r,i,a){if(e!==null){var l=e.memoizedProps;if(Ui(l,i)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=i=l,(e.lanes&a)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,Hr(e,t,a)}return Sd(e,t,r,i,a)}function a0(e,t,r){var i=t.pendingProps,a=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(xs,At),At|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(xs,At),At|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:r,Oe(xs,At),At|=i}else l!==null?(i=l.baseLanes|r,t.memoizedState=null):i=r,Oe(xs,At),At|=i;return xt(e,t,a,r),t.child}function o0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sd(e,t,r,i,a){var l=Tt(r)?In:pt.current;return l=Cs(t,l),ws(t,a),r=Iu(e,t,r,i,l,a),i=$u(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hr(e,t,a)):(Be&&i&&Cu(t),t.flags|=1,xt(e,t,r,a),t.child)}function yp(e,t,r,i,a){if(Tt(r)){var l=!0;zo(t)}else l=!1;if(ws(t,a),t.stateNode===null)fo(e,t),r0(t,r,i),jd(t,r,i,a),i=!0;else if(e===null){var d=t.stateNode,f=t.memoizedProps;d.props=f;var p=d.context,x=r.contextType;typeof x=="object"&&x!==null?x=Kt(x):(x=Tt(r)?In:pt.current,x=Cs(t,x));var _=r.getDerivedStateFromProps,g=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";g||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==i||p!==x)&&hp(t,d,i,x),Xr=!1;var v=t.memoizedState;d.state=v,Fo(t,i,d,a),p=t.memoizedState,f!==i||v!==p||Et.current||Xr?(typeof _=="function"&&(kd(t,r,_,i),p=t.memoizedState),(f=Xr||up(t,r,f,i,v,p,x))?(g||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=p),d.props=i,d.state=p,d.context=x,i=f):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{d=t.stateNode,Rg(e,t),f=t.memoizedProps,x=t.type===t.elementType?f:rr(t.type,f),d.props=x,g=t.pendingProps,v=d.context,p=r.contextType,typeof p=="object"&&p!==null?p=Kt(p):(p=Tt(r)?In:pt.current,p=Cs(t,p));var w=r.getDerivedStateFromProps;(_=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==g||v!==p)&&hp(t,d,i,p),Xr=!1,v=t.memoizedState,d.state=v,Fo(t,i,d,a);var b=t.memoizedState;f!==g||v!==b||Et.current||Xr?(typeof w=="function"&&(kd(t,r,w,i),b=t.memoizedState),(x=Xr||up(t,r,x,i,v,b,p)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,b,p),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,b,p)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=b),d.props=i,d.state=b,d.context=p,i=x):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),i=!1)}return Cd(e,t,r,i,l,a)}function Cd(e,t,r,i,a,l){o0(e,t);var d=(t.flags&128)!==0;if(!i&&!d)return a&&np(t,r,!1),Hr(e,t,l);i=t.stateNode,Tb.current=t;var f=d&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&d?(t.child=Ts(t,e.child,null,l),t.child=Ts(t,null,f,l)):xt(e,t,f,l),t.memoizedState=i.state,a&&np(t,r,!0),t.child}function l0(e){var t=e.stateNode;t.pendingContext?rp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rp(e,t.context,!1),Ru(e,t.containerInfo)}function _p(e,t,r,i,a){return Es(),Tu(a),t.flags|=256,xt(e,t,r,i),t.child}var Ed={dehydrated:null,treeContext:null,retryLane:0};function Td(e){return{baseLanes:e,cachePool:null,transitions:null}}function c0(e,t,r){var i=t.pendingProps,a=Ie.current,l=!1,d=(t.flags&128)!==0,f;if((f=d)||(f=e!==null&&e.memoizedState===null?!1:(a&2)!==0),f?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Oe(Ie,a&1),e===null)return bd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=i.children,e=i.fallback,l?(i=t.mode,l=t.child,d={mode:"hidden",children:d},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=d):l=fl(d,i,0,null),e=Bn(e,i,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Td(r),t.memoizedState=Ed,e):Hu(t,d));if(a=e.memoizedState,a!==null&&(f=a.dehydrated,f!==null))return Pb(e,t,d,i,f,a,r);if(l){l=i.fallback,d=t.mode,a=e.child,f=a.sibling;var p={mode:"hidden",children:i.children};return!(d&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=p,t.deletions=null):(i=un(a,p),i.subtreeFlags=a.subtreeFlags&14680064),f!==null?l=un(f,l):(l=Bn(l,d,r,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,d=e.child.memoizedState,d=d===null?Td(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=e.childLanes&~r,t.memoizedState=Ed,i}return l=e.child,e=l.sibling,i=un(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Hu(e,t){return t=fl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ga(e,t,r,i){return i!==null&&Tu(i),Ts(t,e.child,null,r),e=Hu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pb(e,t,r,i,a,l,d){if(r)return t.flags&256?(t.flags&=-257,i=Mc(Error(X(422))),Ga(e,t,d,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,a=t.mode,i=fl({mode:"visible",children:i.children},a,0,null),l=Bn(l,a,d,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&Ts(t,e.child,null,d),t.child.memoizedState=Td(d),t.memoizedState=Ed,l);if(!(t.mode&1))return Ga(e,t,d,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var f=i.dgst;return i=f,l=Error(X(419)),i=Mc(l,i,void 0),Ga(e,t,d,i)}if(f=(d&e.childLanes)!==0,Ct||f){if(i=nt,i!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|d)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Ur(e,a),lr(i,e,a,-1))}return Gu(),i=Mc(Error(X(421))),Ga(e,t,d,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Hb.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Rt=on(a.nextSibling),zt=t,Be=!0,ir=null,e!==null&&(Ht[Zt++]=Rr,Ht[Zt++]=zr,Ht[Zt++]=$n,Rr=e.id,zr=e.overflow,$n=t),t=Hu(t,i.children),t.flags|=4096,t)}function vp(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),wd(e.return,t,r)}function Oc(e,t,r,i,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=r,l.tailMode=a)}function d0(e,t,r){var i=t.pendingProps,a=i.revealOrder,l=i.tail;if(xt(e,t,i.children,r),i=Ie.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vp(e,r,t);else if(e.tag===19)vp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Oe(Ie,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Uo(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Oc(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Uo(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Oc(t,!0,r,null,l);break;case"together":Oc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=un(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=un(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Lb(e,t,r){switch(t.tag){case 3:l0(t),Es();break;case 5:zg(t);break;case 1:Tt(t.type)&&zo(t);break;case 4:Ru(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Oe(Io,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Oe(Ie,Ie.current&1),t.flags|=128,null):r&t.child.childLanes?c0(e,t,r):(Oe(Ie,Ie.current&1),e=Hr(e,t,r),e!==null?e.sibling:null);Oe(Ie,Ie.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return d0(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oe(Ie,Ie.current),i)break;return null;case 22:case 23:return t.lanes=0,a0(e,t,r)}return Hr(e,t,r)}var u0,Pd,h0,f0;u0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Pd=function(){};h0=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,An(wr.current);var l=null;switch(r){case"input":a=Jc(e,a),i=Jc(e,i),l=[];break;case"select":a=Ue({},a,{value:void 0}),i=Ue({},i,{value:void 0}),l=[];break;case"textarea":a=td(e,a),i=td(e,i),l=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ao)}nd(r,i);var d;r=null;for(x in a)if(!i.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var f=a[x];for(d in f)f.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Ri.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in i){var p=i[x];if(f=a!=null?a[x]:void 0,i.hasOwnProperty(x)&&p!==f&&(p!=null||f!=null))if(x==="style")if(f){for(d in f)!f.hasOwnProperty(d)||p&&p.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in p)p.hasOwnProperty(d)&&f[d]!==p[d]&&(r||(r={}),r[d]=p[d])}else r||(l||(l=[]),l.push(x,r)),r=p;else x==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(l=l||[]).push(x,p)):x==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(x,""+p):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(x)?(p!=null&&x==="onScroll"&&Re("scroll",e),l||f===p||(l=[])):(l=l||[]).push(x,p))}r&&(l=l||[]).push("style",r);var x=l;(t.updateQueue=x)&&(t.flags|=4)}};f0=function(e,t,r,i){r!==i&&(t.flags|=4)};function mi(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Mb(e,t,r){var i=t.pendingProps;switch(Eu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Tt(t.type)&&Ro(),ut(t),null;case 3:return i=t.stateNode,Ps(),ze(Et),ze(pt),Bu(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(qa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ir!==null&&(Dd(ir),ir=null))),Pd(e,t),ut(t),null;case 5:zu(t);var a=An(qi.current);if(r=t.type,e!==null&&t.stateNode!=null)h0(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(X(166));return ut(t),null}if(e=An(wr.current),qa(t)){i=t.stateNode,r=t.type;var l=t.memoizedProps;switch(i[_r]=t,i[Vi]=l,e=(t.mode&1)!==0,r){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(a=0;a<ki.length;a++)Re(ki[a],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":Tf(i,l),Re("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Re("invalid",i);break;case"textarea":Lf(i,l),Re("invalid",i)}nd(r,l),a=null;for(var d in l)if(l.hasOwnProperty(d)){var f=l[d];d==="children"?typeof f=="string"?i.textContent!==f&&(l.suppressHydrationWarning!==!0&&Wa(i.textContent,f,e),a=["children",f]):typeof f=="number"&&i.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&Wa(i.textContent,f,e),a=["children",""+f]):Ri.hasOwnProperty(d)&&f!=null&&d==="onScroll"&&Re("scroll",i)}switch(r){case"input":Da(i),Pf(i,l,!0);break;case"textarea":Da(i),Mf(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Ao)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=d.createElement(r,{is:i.is}):(e=d.createElement(r),r==="select"&&(d=e,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):e=d.createElementNS(e,r),e[_r]=t,e[Vi]=i,u0(e,t,!1,!1),t.stateNode=e;e:{switch(d=sd(r,i),r){case"dialog":Re("cancel",e),Re("close",e),a=i;break;case"iframe":case"object":case"embed":Re("load",e),a=i;break;case"video":case"audio":for(a=0;a<ki.length;a++)Re(ki[a],e);a=i;break;case"source":Re("error",e),a=i;break;case"img":case"image":case"link":Re("error",e),Re("load",e),a=i;break;case"details":Re("toggle",e),a=i;break;case"input":Tf(e,i),a=Jc(e,i),Re("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Ue({},i,{value:void 0}),Re("invalid",e);break;case"textarea":Lf(e,i),a=td(e,i),Re("invalid",e);break;default:a=i}nd(r,a),f=a;for(l in f)if(f.hasOwnProperty(l)){var p=f[l];l==="style"?Zm(e,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Um(e,p)):l==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&zi(e,p):typeof p=="number"&&zi(e,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ri.hasOwnProperty(l)?p!=null&&l==="onScroll"&&Re("scroll",e):p!=null&&fu(e,l,p,d))}switch(r){case"input":Da(e),Pf(e,i,!1);break;case"textarea":Da(e),Mf(e);break;case"option":i.value!=null&&e.setAttribute("value",""+mn(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?ys(e,!!i.multiple,l,!1):i.defaultValue!=null&&ys(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ao)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)f0(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(X(166));if(r=An(qi.current),An(wr.current),qa(t)){if(i=t.stateNode,r=t.memoizedProps,i[_r]=t,(l=i.nodeValue!==r)&&(e=zt,e!==null))switch(e.tag){case 3:Wa(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wa(i.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[_r]=t,t.stateNode=i}return ut(t),null;case 13:if(ze(Ie),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Rt!==null&&t.mode&1&&!(t.flags&128))Lg(),Es(),t.flags|=98560,l=!1;else if(l=qa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(X(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(X(317));l[_r]=t}else Es(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),l=!1}else ir!==null&&(Dd(ir),ir=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?et===0&&(et=3):Gu())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Ps(),Pd(e,t),e===null&&Hi(t.stateNode.containerInfo),ut(t),null;case 10:return Mu(t.type._context),ut(t),null;case 17:return Tt(t.type)&&Ro(),ut(t),null;case 19:if(ze(Ie),l=t.memoizedState,l===null)return ut(t),null;if(i=(t.flags&128)!==0,d=l.rendering,d===null)if(i)mi(l,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Uo(e),d!==null){for(t.flags|=128,mi(l,!1),i=d.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)l=r,e=i,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,e=d.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Oe(Ie,Ie.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ve()>Ms&&(t.flags|=128,i=!0,mi(l,!1),t.lanes=4194304)}else{if(!i)if(e=Uo(d),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Be)return ut(t),null}else 2*Ve()-l.renderingStartTime>Ms&&r!==1073741824&&(t.flags|=128,i=!0,mi(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(r=l.last,r!==null?r.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ve(),t.sibling=null,r=Ie.current,Oe(Ie,i?r&1|2:r&1),t):(ut(t),null);case 22:case 23:return Ku(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?At&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Ob(e,t){switch(Eu(t),t.tag){case 1:return Tt(t.type)&&Ro(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ps(),ze(Et),ze(pt),Bu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zu(t),null;case 13:if(ze(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Ie),null;case 4:return Ps(),null;case 10:return Mu(t.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var Qa=!1,ht=!1,Ab=typeof WeakSet=="function"?WeakSet:Set,ae=null;function gs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){He(e,t,i)}else r.current=null}function Ld(e,t,r){try{r()}catch(i){He(e,t,i)}}var bp=!1;function Rb(e,t){if(pd=Lo,e=yg(),Su(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var d=0,f=-1,p=-1,x=0,_=0,g=e,v=null;t:for(;;){for(var w;g!==r||a!==0&&g.nodeType!==3||(f=d+a),g!==l||i!==0&&g.nodeType!==3||(p=d+i),g.nodeType===3&&(d+=g.nodeValue.length),(w=g.firstChild)!==null;)v=g,g=w;for(;;){if(g===e)break t;if(v===r&&++x===a&&(f=d),v===l&&++_===i&&(p=d),(w=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=w}r=f===-1||p===-1?null:{start:f,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(md={focusedElem:e,selectionRange:r},Lo=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,E=b.memoizedState,S=t.stateNode,y=S.getSnapshotBeforeUpdate(t.elementType===t.type?C:rr(t.type,C),E);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(R){He(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return b=bp,bp=!1,b}function Li(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Ld(t,r,l)}a=a.next}while(a!==i)}}function ul(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Md(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function p0(e){var t=e.alternate;t!==null&&(e.alternate=null,p0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_r],delete t[Vi],delete t[yd],delete t[xb],delete t[yb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function m0(e){return e.tag===5||e.tag===3||e.tag===4}function wp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||m0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Od(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ao));else if(i!==4&&(e=e.child,e!==null))for(Od(e,t,r),e=e.sibling;e!==null;)Od(e,t,r),e=e.sibling}function Ad(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ad(e,t,r),e=e.sibling;e!==null;)Ad(e,t,r),e=e.sibling}var it=null,nr=!1;function Gr(e,t,r){for(r=r.child;r!==null;)g0(e,t,r),r=r.sibling}function g0(e,t,r){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(nl,r)}catch{}switch(r.tag){case 5:ht||gs(r,t);case 6:var i=it,a=nr;it=null,Gr(e,t,r),it=i,nr=a,it!==null&&(nr?(e=it,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(nr?(e=it,r=r.stateNode,e.nodeType===8?Sc(e.parentNode,r):e.nodeType===1&&Sc(e,r),$i(e)):Sc(it,r.stateNode));break;case 4:i=it,a=nr,it=r.stateNode.containerInfo,nr=!0,Gr(e,t,r),it=i,nr=a;break;case 0:case 11:case 14:case 15:if(!ht&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var l=a,d=l.destroy;l=l.tag,d!==void 0&&(l&2||l&4)&&Ld(r,t,d),a=a.next}while(a!==i)}Gr(e,t,r);break;case 1:if(!ht&&(gs(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(f){He(r,t,f)}Gr(e,t,r);break;case 21:Gr(e,t,r);break;case 22:r.mode&1?(ht=(i=ht)||r.memoizedState!==null,Gr(e,t,r),ht=i):Gr(e,t,r);break;default:Gr(e,t,r)}}function kp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ab),t.forEach(function(i){var a=Zb.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function tr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var l=e,d=t,f=d;e:for(;f!==null;){switch(f.tag){case 5:it=f.stateNode,nr=!1;break e;case 3:it=f.stateNode.containerInfo,nr=!0;break e;case 4:it=f.stateNode.containerInfo,nr=!0;break e}f=f.return}if(it===null)throw Error(X(160));g0(l,d,a),it=null,nr=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(x){He(a,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x0(t,e),t=t.sibling}function x0(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tr(t,e),gr(e),i&4){try{Li(3,e,e.return),ul(3,e)}catch(C){He(e,e.return,C)}try{Li(5,e,e.return)}catch(C){He(e,e.return,C)}}break;case 1:tr(t,e),gr(e),i&512&&r!==null&&gs(r,r.return);break;case 5:if(tr(t,e),gr(e),i&512&&r!==null&&gs(r,r.return),e.flags&32){var a=e.stateNode;try{zi(a,"")}catch(C){He(e,e.return,C)}}if(i&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,d=r!==null?r.memoizedProps:l,f=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&Im(a,l),sd(f,d);var x=sd(f,l);for(d=0;d<p.length;d+=2){var _=p[d],g=p[d+1];_==="style"?Zm(a,g):_==="dangerouslySetInnerHTML"?Um(a,g):_==="children"?zi(a,g):fu(a,_,g,x)}switch(f){case"input":Yc(a,l);break;case"textarea":$m(a,l);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?ys(a,!!l.multiple,w,!1):v!==!!l.multiple&&(l.defaultValue!=null?ys(a,!!l.multiple,l.defaultValue,!0):ys(a,!!l.multiple,l.multiple?[]:"",!1))}a[Vi]=l}catch(C){He(e,e.return,C)}}break;case 6:if(tr(t,e),gr(e),i&4){if(e.stateNode===null)throw Error(X(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(C){He(e,e.return,C)}}break;case 3:if(tr(t,e),gr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{$i(t.containerInfo)}catch(C){He(e,e.return,C)}break;case 4:tr(t,e),gr(e);break;case 13:tr(t,e),gr(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Wu=Ve())),i&4&&kp(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(ht=(x=ht)||_,tr(t,e),ht=x):tr(t,e),gr(e),i&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!_&&e.mode&1)for(ae=e,_=e.child;_!==null;){for(g=ae=_;ae!==null;){switch(v=ae,w=v.child,v.tag){case 0:case 11:case 14:case 15:Li(4,v,v.return);break;case 1:gs(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){i=v,r=v.return;try{t=i,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(C){He(i,r,C)}}break;case 5:gs(v,v.return);break;case 22:if(v.memoizedState!==null){Np(g);continue}}w!==null?(w.return=v,ae=w):Np(g)}_=_.sibling}e:for(_=null,g=e;;){if(g.tag===5){if(_===null){_=g;try{a=g.stateNode,x?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=g.stateNode,p=g.memoizedProps.style,d=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=Hm("display",d))}catch(C){He(e,e.return,C)}}}else if(g.tag===6){if(_===null)try{g.stateNode.nodeValue=x?"":g.memoizedProps}catch(C){He(e,e.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:tr(t,e),gr(e),i&4&&kp(e);break;case 21:break;default:tr(t,e),gr(e)}}function gr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(m0(r)){var i=r;break e}r=r.return}throw Error(X(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(zi(a,""),i.flags&=-33);var l=wp(e);Ad(e,l,a);break;case 3:case 4:var d=i.stateNode.containerInfo,f=wp(e);Od(e,f,d);break;default:throw Error(X(161))}}catch(p){He(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zb(e,t,r){ae=e,y0(e)}function y0(e,t,r){for(var i=(e.mode&1)!==0;ae!==null;){var a=ae,l=a.child;if(a.tag===22&&i){var d=a.memoizedState!==null||Qa;if(!d){var f=a.alternate,p=f!==null&&f.memoizedState!==null||ht;f=Qa;var x=ht;if(Qa=d,(ht=p)&&!x)for(ae=a;ae!==null;)d=ae,p=d.child,d.tag===22&&d.memoizedState!==null?Sp(a):p!==null?(p.return=d,ae=p):Sp(a);for(;l!==null;)ae=l,y0(l),l=l.sibling;ae=a,Qa=f,ht=x}jp(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ae=l):jp(e)}}function jp(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||ul(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ht)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:rr(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&lp(t,l,i);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}lp(t,d,r)}break;case 5:var f=t.stateNode;if(r===null&&t.flags&4){r=f;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var _=x.memoizedState;if(_!==null){var g=_.dehydrated;g!==null&&$i(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}ht||t.flags&512&&Md(t)}catch(v){He(t,t.return,v)}}if(t===e){ae=null;break}if(r=t.sibling,r!==null){r.return=t.return,ae=r;break}ae=t.return}}function Np(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ae=r;break}ae=t.return}}function Sp(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ul(4,t)}catch(p){He(t,r,p)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(p){He(t,a,p)}}var l=t.return;try{Md(t)}catch(p){He(t,l,p)}break;case 5:var d=t.return;try{Md(t)}catch(p){He(t,d,p)}}}catch(p){He(t,t.return,p)}if(t===e){ae=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ae=f;break}ae=t.return}}var Bb=Math.ceil,Vo=Zr.ReactCurrentDispatcher,Zu=Zr.ReactCurrentOwner,qt=Zr.ReactCurrentBatchConfig,Ce=0,nt=null,Qe=null,ot=0,At=0,xs=vn(0),et=0,Xi=null,Un=0,hl=0,Vu=0,Mi=null,St=null,Wu=0,Ms=1/0,Or=null,Wo=!1,Rd=null,cn=null,Xa=!1,tn=null,qo=0,Oi=0,zd=null,po=-1,mo=0;function bt(){return Ce&6?Ve():po!==-1?po:po=Ve()}function dn(e){return e.mode&1?Ce&2&&ot!==0?ot&-ot:vb.transition!==null?(mo===0&&(mo=rg()),mo):(e=Le,e!==0||(e=window.event,e=e===void 0?16:cg(e.type)),e):1}function lr(e,t,r,i){if(50<Oi)throw Oi=0,zd=null,Error(X(185));ra(e,r,i),(!(Ce&2)||e!==nt)&&(e===nt&&(!(Ce&2)&&(hl|=r),et===4&&Yr(e,ot)),Pt(e,i),r===1&&Ce===0&&!(t.mode&1)&&(Ms=Ve()+500,ll&&bn()))}function Pt(e,t){var r=e.callbackNode;vv(e,t);var i=Po(e,e===nt?ot:0);if(i===0)r!==null&&Rf(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Rf(r),t===1)e.tag===0?_b(Cp.bind(null,e)):Eg(Cp.bind(null,e)),mb(function(){!(Ce&6)&&bn()}),r=null;else{switch(ng(i)){case 1:r=yu;break;case 4:r=eg;break;case 16:r=To;break;case 536870912:r=tg;break;default:r=To}r=S0(r,_0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _0(e,t){if(po=-1,mo=0,Ce&6)throw Error(X(327));var r=e.callbackNode;if(ks()&&e.callbackNode!==r)return null;var i=Po(e,e===nt?ot:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Ko(e,i);else{t=i;var a=Ce;Ce|=2;var l=b0();(nt!==e||ot!==t)&&(Or=null,Ms=Ve()+500,zn(e,t));do try{$b();break}catch(f){v0(e,f)}while(!0);Lu(),Vo.current=l,Ce=a,Qe!==null?t=0:(nt=null,ot=0,t=et)}if(t!==0){if(t===2&&(a=cd(e),a!==0&&(i=a,t=Bd(e,a))),t===1)throw r=Xi,zn(e,0),Yr(e,i),Pt(e,Ve()),r;if(t===6)Yr(e,i);else{if(a=e.current.alternate,!(i&30)&&!Db(a)&&(t=Ko(e,i),t===2&&(l=cd(e),l!==0&&(i=l,t=Bd(e,l))),t===1))throw r=Xi,zn(e,0),Yr(e,i),Pt(e,Ve()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(X(345));case 2:Ln(e,St,Or);break;case 3:if(Yr(e,i),(i&130023424)===i&&(t=Wu+500-Ve(),10<t)){if(Po(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){bt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=xd(Ln.bind(null,e,St,Or),t);break}Ln(e,St,Or);break;case 4:if(Yr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var d=31-or(i);l=1<<d,d=t[d],d>a&&(a=d),i&=~l}if(i=a,i=Ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Bb(i/1960))-i,10<i){e.timeoutHandle=xd(Ln.bind(null,e,St,Or),i);break}Ln(e,St,Or);break;case 5:Ln(e,St,Or);break;default:throw Error(X(329))}}}return Pt(e,Ve()),e.callbackNode===r?_0.bind(null,e):null}function Bd(e,t){var r=Mi;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Ko(e,t),e!==2&&(t=St,St=r,t!==null&&Dd(t)),e}function Dd(e){St===null?St=e:St.push.apply(St,e)}function Db(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],l=a.getSnapshot;a=a.value;try{if(!cr(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yr(e,t){for(t&=~Vu,t&=~hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-or(t),i=1<<r;e[r]=-1,t&=~i}}function Cp(e){if(Ce&6)throw Error(X(327));ks();var t=Po(e,0);if(!(t&1))return Pt(e,Ve()),null;var r=Ko(e,t);if(e.tag!==0&&r===2){var i=cd(e);i!==0&&(t=i,r=Bd(e,i))}if(r===1)throw r=Xi,zn(e,0),Yr(e,t),Pt(e,Ve()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ln(e,St,Or),Pt(e,Ve()),null}function qu(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(Ms=Ve()+500,ll&&bn())}}function Hn(e){tn!==null&&tn.tag===0&&!(Ce&6)&&ks();var t=Ce;Ce|=1;var r=qt.transition,i=Le;try{if(qt.transition=null,Le=1,e)return e()}finally{Le=i,qt.transition=r,Ce=t,!(Ce&6)&&bn()}}function Ku(){At=xs.current,ze(xs)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pb(r)),Qe!==null)for(r=Qe.return;r!==null;){var i=r;switch(Eu(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ro();break;case 3:Ps(),ze(Et),ze(pt),Bu();break;case 5:zu(i);break;case 4:Ps();break;case 13:ze(Ie);break;case 19:ze(Ie);break;case 10:Mu(i.type._context);break;case 22:case 23:Ku()}r=r.return}if(nt=e,Qe=e=un(e.current,null),ot=At=t,et=0,Xi=null,Vu=hl=Un=0,St=Mi=null,On!==null){for(t=0;t<On.length;t++)if(r=On[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,l=r.pending;if(l!==null){var d=l.next;l.next=a,i.next=d}r.pending=i}On=null}return e}function v0(e,t){do{var r=Qe;try{if(Lu(),uo.current=Zo,Ho){for(var i=$e.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Ho=!1}if(Fn=0,rt=Ye=$e=null,Pi=!1,Ki=0,Zu.current=null,r===null||r.return===null){et=1,Xi=t,Qe=null;break}e:{var l=e,d=r.return,f=r,p=t;if(t=ot,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var x=p,_=f,g=_.tag;if(!(_.mode&1)&&(g===0||g===11||g===15)){var v=_.alternate;v?(_.updateQueue=v.updateQueue,_.memoizedState=v.memoizedState,_.lanes=v.lanes):(_.updateQueue=null,_.memoizedState=null)}var w=pp(d);if(w!==null){w.flags&=-257,mp(w,d,f,l,t),w.mode&1&&fp(l,x,t),t=w,p=x;var b=t.updateQueue;if(b===null){var C=new Set;C.add(p),t.updateQueue=C}else b.add(p);break e}else{if(!(t&1)){fp(l,x,t),Gu();break e}p=Error(X(426))}}else if(Be&&f.mode&1){var E=pp(d);if(E!==null){!(E.flags&65536)&&(E.flags|=256),mp(E,d,f,l,t),Tu(Ls(p,f));break e}}l=p=Ls(p,f),et!==4&&(et=2),Mi===null?Mi=[l]:Mi.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var S=n0(l,p,t);op(l,S);break e;case 1:f=p;var y=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(cn===null||!cn.has(N)))){l.flags|=65536,t&=-t,l.lanes|=t;var R=s0(l,f,t);op(l,R);break e}}l=l.return}while(l!==null)}k0(r)}catch(M){t=M,Qe===r&&r!==null&&(Qe=r=r.return);continue}break}while(!0)}function b0(){var e=Vo.current;return Vo.current=Zo,e===null?Zo:e}function Gu(){(et===0||et===3||et===2)&&(et=4),nt===null||!(Un&268435455)&&!(hl&268435455)||Yr(nt,ot)}function Ko(e,t){var r=Ce;Ce|=2;var i=b0();(nt!==e||ot!==t)&&(Or=null,zn(e,t));do try{Ib();break}catch(a){v0(e,a)}while(!0);if(Lu(),Ce=r,Vo.current=i,Qe!==null)throw Error(X(261));return nt=null,ot=0,et}function Ib(){for(;Qe!==null;)w0(Qe)}function $b(){for(;Qe!==null&&!uv();)w0(Qe)}function w0(e){var t=N0(e.alternate,e,At);e.memoizedProps=e.pendingProps,t===null?k0(e):Qe=t,Zu.current=null}function k0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ob(r,t),r!==null){r.flags&=32767,Qe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Qe=null;return}}else if(r=Mb(r,t,At),r!==null){Qe=r;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);et===0&&(et=5)}function Ln(e,t,r){var i=Le,a=qt.transition;try{qt.transition=null,Le=1,Fb(e,t,r,i)}finally{qt.transition=a,Le=i}return null}function Fb(e,t,r,i){do ks();while(tn!==null);if(Ce&6)throw Error(X(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(bv(e,l),e===nt&&(Qe=nt=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xa||(Xa=!0,S0(To,function(){return ks(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=qt.transition,qt.transition=null;var d=Le;Le=1;var f=Ce;Ce|=4,Zu.current=null,Rb(e,r),x0(r,e),ob(md),Lo=!!pd,md=pd=null,e.current=r,zb(r),hv(),Ce=f,Le=d,qt.transition=l}else e.current=r;if(Xa&&(Xa=!1,tn=e,qo=a),l=e.pendingLanes,l===0&&(cn=null),mv(r.stateNode),Pt(e,Ve()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(Wo)throw Wo=!1,e=Rd,Rd=null,e;return qo&1&&e.tag!==0&&ks(),l=e.pendingLanes,l&1?e===zd?Oi++:(Oi=0,zd=e):Oi=0,bn(),null}function ks(){if(tn!==null){var e=ng(qo),t=qt.transition,r=Le;try{if(qt.transition=null,Le=16>e?16:e,tn===null)var i=!1;else{if(e=tn,tn=null,qo=0,Ce&6)throw Error(X(331));var a=Ce;for(Ce|=4,ae=e.current;ae!==null;){var l=ae,d=l.child;if(ae.flags&16){var f=l.deletions;if(f!==null){for(var p=0;p<f.length;p++){var x=f[p];for(ae=x;ae!==null;){var _=ae;switch(_.tag){case 0:case 11:case 15:Li(8,_,l)}var g=_.child;if(g!==null)g.return=_,ae=g;else for(;ae!==null;){_=ae;var v=_.sibling,w=_.return;if(p0(_),_===x){ae=null;break}if(v!==null){v.return=w,ae=v;break}ae=w}}}var b=l.alternate;if(b!==null){var C=b.child;if(C!==null){b.child=null;do{var E=C.sibling;C.sibling=null,C=E}while(C!==null)}}ae=l}}if(l.subtreeFlags&2064&&d!==null)d.return=l,ae=d;else e:for(;ae!==null;){if(l=ae,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Li(9,l,l.return)}var S=l.sibling;if(S!==null){S.return=l.return,ae=S;break e}ae=l.return}}var y=e.current;for(ae=y;ae!==null;){d=ae;var N=d.child;if(d.subtreeFlags&2064&&N!==null)N.return=d,ae=N;else e:for(d=y;ae!==null;){if(f=ae,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:ul(9,f)}}catch(M){He(f,f.return,M)}if(f===d){ae=null;break e}var R=f.sibling;if(R!==null){R.return=f.return,ae=R;break e}ae=f.return}}if(Ce=a,bn(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(nl,e)}catch{}i=!0}return i}finally{Le=r,qt.transition=t}}return!1}function Ep(e,t,r){t=Ls(r,t),t=n0(e,t,1),e=ln(e,t,1),t=bt(),e!==null&&(ra(e,1,t),Pt(e,t))}function He(e,t,r){if(e.tag===3)Ep(e,e,r);else for(;t!==null;){if(t.tag===3){Ep(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(cn===null||!cn.has(i))){e=Ls(r,e),e=s0(t,e,1),t=ln(t,e,1),e=bt(),t!==null&&(ra(t,1,e),Pt(t,e));break}}t=t.return}}function Ub(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&r,nt===e&&(ot&r)===r&&(et===4||et===3&&(ot&130023424)===ot&&500>Ve()-Wu?zn(e,0):Vu|=r),Pt(e,t)}function j0(e,t){t===0&&(e.mode&1?(t=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):t=1);var r=bt();e=Ur(e,t),e!==null&&(ra(e,t,r),Pt(e,r))}function Hb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),j0(e,r)}function Zb(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(t),j0(e,r)}var N0;N0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Et.current)Ct=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ct=!1,Lb(e,t,r);Ct=!!(e.flags&131072)}else Ct=!1,Be&&t.flags&1048576&&Tg(t,Do,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;fo(e,t),e=t.pendingProps;var a=Cs(t,pt.current);ws(t,r),a=Iu(null,t,i,e,a,r);var l=$u();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tt(i)?(l=!0,zo(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Au(t),a.updater=dl,t.stateNode=a,a._reactInternals=t,jd(t,i,e,r),t=Cd(null,t,i,!0,l,r)):(t.tag=0,Be&&l&&Cu(t),xt(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(fo(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=Wb(i),e=rr(i,e),a){case 0:t=Sd(null,t,i,e,r);break e;case 1:t=yp(null,t,i,e,r);break e;case 11:t=gp(null,t,i,e,r);break e;case 14:t=xp(null,t,i,rr(i.type,e),r);break e}throw Error(X(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:rr(i,a),Sd(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:rr(i,a),yp(e,t,i,a,r);case 3:e:{if(l0(t),e===null)throw Error(X(387));i=t.pendingProps,l=t.memoizedState,a=l.element,Rg(e,t),Fo(t,i,null,r);var d=t.memoizedState;if(i=d.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Ls(Error(X(423)),t),t=_p(e,t,i,r,a);break e}else if(i!==a){a=Ls(Error(X(424)),t),t=_p(e,t,i,r,a);break e}else for(Rt=on(t.stateNode.containerInfo.firstChild),zt=t,Be=!0,ir=null,r=Og(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Es(),i===a){t=Hr(e,t,r);break e}xt(e,t,i,r)}t=t.child}return t;case 5:return zg(t),e===null&&bd(t),i=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,d=a.children,gd(i,a)?d=null:l!==null&&gd(i,l)&&(t.flags|=32),o0(e,t),xt(e,t,d,r),t.child;case 6:return e===null&&bd(t),null;case 13:return c0(e,t,r);case 4:return Ru(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ts(t,null,i,r):xt(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:rr(i,a),gp(e,t,i,a,r);case 7:return xt(e,t,t.pendingProps,r),t.child;case 8:return xt(e,t,t.pendingProps.children,r),t.child;case 12:return xt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,l=t.memoizedProps,d=a.value,Oe(Io,i._currentValue),i._currentValue=d,l!==null)if(cr(l.value,d)){if(l.children===a.children&&!Et.current){t=Hr(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var f=l.dependencies;if(f!==null){d=l.child;for(var p=f.firstContext;p!==null;){if(p.context===i){if(l.tag===1){p=Ir(-1,r&-r),p.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var _=x.pending;_===null?p.next=p:(p.next=_.next,_.next=p),x.pending=p}}l.lanes|=r,p=l.alternate,p!==null&&(p.lanes|=r),wd(l.return,r,t),f.lanes|=r;break}p=p.next}}else if(l.tag===10)d=l.type===t.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(X(341));d.lanes|=r,f=d.alternate,f!==null&&(f.lanes|=r),wd(d,r,t),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===t){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}xt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,ws(t,r),a=Kt(a),i=i(a),t.flags|=1,xt(e,t,i,r),t.child;case 14:return i=t.type,a=rr(i,t.pendingProps),a=rr(i.type,a),xp(e,t,i,a,r);case 15:return i0(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:rr(i,a),fo(e,t),t.tag=1,Tt(i)?(e=!0,zo(t)):e=!1,ws(t,r),r0(t,i,a),jd(t,i,a,r),Cd(null,t,i,!0,e,r);case 19:return d0(e,t,r);case 22:return a0(e,t,r)}throw Error(X(156,t.tag))};function S0(e,t){return Ym(e,t)}function Vb(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,r,i){return new Vb(e,t,r,i)}function Qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wb(e){if(typeof e=="function")return Qu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mu)return 11;if(e===gu)return 14}return 2}function un(e,t){var r=e.alternate;return r===null?(r=Wt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function go(e,t,r,i,a,l){var d=2;if(i=e,typeof e=="function")Qu(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case os:return Bn(r.children,a,l,t);case pu:d=8,a|=8;break;case Kc:return e=Wt(12,r,t,a|2),e.elementType=Kc,e.lanes=l,e;case Gc:return e=Wt(13,r,t,a),e.elementType=Gc,e.lanes=l,e;case Qc:return e=Wt(19,r,t,a),e.elementType=Qc,e.lanes=l,e;case zm:return fl(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Am:d=10;break e;case Rm:d=9;break e;case mu:d=11;break e;case gu:d=14;break e;case Qr:d=16,i=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Wt(d,r,t,a),t.elementType=e,t.type=i,t.lanes=l,t}function Bn(e,t,r,i){return e=Wt(7,e,i,t),e.lanes=r,e}function fl(e,t,r,i){return e=Wt(22,e,i,t),e.elementType=zm,e.lanes=r,e.stateNode={isHidden:!1},e}function Ac(e,t,r){return e=Wt(6,e,null,t),e.lanes=r,e}function Rc(e,t,r){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qb(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mc(0),this.expirationTimes=mc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mc(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Xu(e,t,r,i,a,l,d,f,p){return e=new qb(e,t,r,f,p),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Au(l),e}function Kb(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function C0(e){if(!e)return gn;e=e._reactInternals;e:{if(Wn(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(Tt(r))return Cg(e,r,t)}return t}function E0(e,t,r,i,a,l,d,f,p){return e=Xu(r,i,!0,e,a,l,d,f,p),e.context=C0(null),r=e.current,i=bt(),a=dn(r),l=Ir(i,a),l.callback=t??null,ln(r,l,a),e.current.lanes=a,ra(e,a,i),Pt(e,i),e}function pl(e,t,r,i){var a=t.current,l=bt(),d=dn(a);return r=C0(r),t.context===null?t.context=r:t.pendingContext=r,t=Ir(l,d),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ln(a,t,d),e!==null&&(lr(e,a,d,l),co(e,a,d)),d}function Go(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ju(e,t){Tp(e,t),(e=e.alternate)&&Tp(e,t)}function Gb(){return null}var T0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}ml.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));pl(e,t,null,null)};ml.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){pl(null,e,null,null)}),t[Fr]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=ag();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jr.length&&t!==0&&t<Jr[r].priority;r++);Jr.splice(r,0,e),r===0&&lg(e)}};function eh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pp(){}function Qb(e,t,r,i,a){if(a){if(typeof i=="function"){var l=i;i=function(){var x=Go(d);l.call(x)}}var d=E0(t,i,e,0,null,!1,!1,"",Pp);return e._reactRootContainer=d,e[Fr]=d.current,Hi(e.nodeType===8?e.parentNode:e),Hn(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var f=i;i=function(){var x=Go(p);f.call(x)}}var p=Xu(e,0,!1,null,null,!1,!1,"",Pp);return e._reactRootContainer=p,e[Fr]=p.current,Hi(e.nodeType===8?e.parentNode:e),Hn(function(){pl(t,p,r,i)}),p}function xl(e,t,r,i,a){var l=r._reactRootContainer;if(l){var d=l;if(typeof a=="function"){var f=a;a=function(){var p=Go(d);f.call(p)}}pl(t,d,e,a)}else d=Qb(r,t,e,a,i);return Go(d)}sg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wi(t.pendingLanes);r!==0&&(_u(t,r|1),Pt(t,Ve()),!(Ce&6)&&(Ms=Ve()+500,bn()))}break;case 13:Hn(function(){var i=Ur(e,1);if(i!==null){var a=bt();lr(i,e,1,a)}}),Ju(e,1)}};vu=function(e){if(e.tag===13){var t=Ur(e,134217728);if(t!==null){var r=bt();lr(t,e,134217728,r)}Ju(e,134217728)}};ig=function(e){if(e.tag===13){var t=dn(e),r=Ur(e,t);if(r!==null){var i=bt();lr(r,e,t,i)}Ju(e,t)}};ag=function(){return Le};og=function(e,t){var r=Le;try{return Le=e,t()}finally{Le=r}};ad=function(e,t,r){switch(t){case"input":if(Yc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=ol(i);if(!a)throw Error(X(90));Dm(i),Yc(i,a)}}}break;case"textarea":$m(e,r);break;case"select":t=r.value,t!=null&&ys(e,!!r.multiple,t,!1)}};qm=qu;Km=Hn;var Xb={usingClientEntryPoint:!1,Events:[sa,us,ol,Vm,Wm,qu]},gi={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jb={bundleType:gi.bundleType,version:gi.version,rendererPackageName:gi.rendererPackageName,rendererConfig:gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xm(e),e===null?null:e.stateNode},findFiberByHostInstance:gi.findFiberByHostInstance||Gb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{nl=Ja.inject(Jb),br=Ja}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xb;Dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eh(t))throw Error(X(200));return Kb(e,t,null,r)};Dt.createRoot=function(e,t){if(!eh(e))throw Error(X(299));var r=!1,i="",a=T0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Xu(e,1,!1,null,null,r,!1,i,a),e[Fr]=t.current,Hi(e.nodeType===8?e.parentNode:e),new Yu(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Xm(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Hn(e)};Dt.hydrate=function(e,t,r){if(!gl(t))throw Error(X(200));return xl(null,e,t,!0,r)};Dt.hydrateRoot=function(e,t,r){if(!eh(e))throw Error(X(405));var i=r!=null&&r.hydratedSources||null,a=!1,l="",d=T0;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=E0(t,null,e,1,r??null,a,!1,l,d),e[Fr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ml(t)};Dt.render=function(e,t,r){if(!gl(t))throw Error(X(200));return xl(null,e,t,!1,r)};Dt.unmountComponentAtNode=function(e){if(!gl(e))throw Error(X(40));return e._reactRootContainer?(Hn(function(){xl(null,null,e,!1,function(){e._reactRootContainer=null,e[Fr]=null})}),!0):!1};Dt.unstable_batchedUpdates=qu;Dt.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!gl(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return xl(e,t,r,!1,i)};Dt.version="18.3.1-next-f1338f8080-20240426";function P0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P0)}catch(e){console.error(e)}}P0(),Pm.exports=Dt;var L0=Pm.exports,M0,Lp=L0;M0=Lp.createRoot,Lp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ji(){return Ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ji.apply(this,arguments)}var rn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rn||(rn={}));const Mp="popstate";function Yb(e){e===void 0&&(e={});function t(i,a){let{pathname:l,search:d,hash:f}=i.location;return Id("",{pathname:l,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){return typeof a=="string"?a:Qo(a)}return tw(t,r,null,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function O0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ew(){return Math.random().toString(36).substr(2,8)}function Op(e,t){return{usr:e.state,key:e.key,idx:t}}function Id(e,t,r,i){return r===void 0&&(r=null),Ji({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Is(t):t,{state:r,key:t&&t.key||i||ew()})}function Qo(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Is(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function tw(e,t,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:l=!1}=i,d=a.history,f=rn.Pop,p=null,x=_();x==null&&(x=0,d.replaceState(Ji({},d.state,{idx:x}),""));function _(){return(d.state||{idx:null}).idx}function g(){f=rn.Pop;let E=_(),S=E==null?null:E-x;x=E,p&&p({action:f,location:C.location,delta:S})}function v(E,S){f=rn.Push;let y=Id(C.location,E,S);x=_()+1;let N=Op(y,x),R=C.createHref(y);try{d.pushState(N,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(R)}l&&p&&p({action:f,location:C.location,delta:1})}function w(E,S){f=rn.Replace;let y=Id(C.location,E,S);x=_();let N=Op(y,x),R=C.createHref(y);d.replaceState(N,"",R),l&&p&&p({action:f,location:C.location,delta:0})}function b(E){let S=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof E=="string"?E:Qo(E);return y=y.replace(/ $/,"%20"),Fe(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let C={get action(){return f},get location(){return e(a,d)},listen(E){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Mp,g),p=E,()=>{a.removeEventListener(Mp,g),p=null}},createHref(E){return t(a,E)},createURL:b,encodeLocation(E){let S=b(E);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:w,go(E){return d.go(E)}};return C}var Ap;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ap||(Ap={}));function rw(e,t,r){return r===void 0&&(r="/"),nw(e,t,r)}function nw(e,t,r,i){let a=typeof t=="string"?Is(t):t,l=Os(a.pathname||"/",r);if(l==null)return null;let d=A0(e);sw(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let x=mw(l);f=fw(d[p],x)}return f}function A0(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(l,d,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};p.relativePath.startsWith("/")&&(Fe(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let x=hn([i,p.relativePath]),_=r.concat(p);l.children&&l.children.length>0&&(Fe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),A0(l.children,t,_,x)),!(l.path==null&&!l.index)&&t.push({path:x,score:uw(x,l.index),routesMeta:_})};return e.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,d);else for(let p of R0(l.path))a(l,d,p)}),t}function R0(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let d=R0(i.join("/")),f=[];return f.push(...d.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...d),f.map(p=>e.startsWith("/")&&p===""?"/":p)}function sw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hw(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const iw=/^:[\w-]+$/,aw=3,ow=2,lw=1,cw=10,dw=-2,Rp=e=>e==="*";function uw(e,t){let r=e.split("/"),i=r.length;return r.some(Rp)&&(i+=dw),t&&(i+=ow),r.filter(a=>!Rp(a)).reduce((a,l)=>a+(iw.test(l)?aw:l===""?lw:cw),i)}function hw(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function fw(e,t,r){let{routesMeta:i}=e,a={},l="/",d=[];for(let f=0;f<i.length;++f){let p=i[f],x=f===i.length-1,_=l==="/"?t:t.slice(l.length)||"/",g=$d({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},_),v=p.route;if(!g)return null;Object.assign(a,g.params),d.push({params:a,pathname:hn([l,g.pathname]),pathnameBase:_w(hn([l,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(l=hn([l,g.pathnameBase]))}return d}function $d(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=pw(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],d=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((x,_,g)=>{let{paramName:v,isOptional:w}=_;if(v==="*"){let C=f[g]||"";d=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const b=f[g];return w&&!b?x[v]=void 0:x[v]=(b||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:d,pattern:e}}function pw(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),O0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function mw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return O0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Os(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function gw(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:a=""}=typeof e=="string"?Is(e):e;return{pathname:r?r.startsWith("/")?r:xw(r,t):t,search:vw(i),hash:bw(a)}}function xw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function zc(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function th(e,t){let r=yw(e);return t?r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function rh(e,t,r,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=Is(e):(a=Ji({},e),Fe(!a.pathname||!a.pathname.includes("?"),zc("?","pathname","search",a)),Fe(!a.pathname||!a.pathname.includes("#"),zc("#","pathname","hash",a)),Fe(!a.search||!a.search.includes("#"),zc("#","search","hash",a)));let l=e===""||a.pathname==="",d=l?"/":a.pathname,f;if(d==null)f=r;else{let g=t.length-1;if(!i&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),g-=1;a.pathname=v.join("/")}f=g>=0?t[g]:"/"}let p=gw(a,f),x=d&&d!=="/"&&d.endsWith("/"),_=(l||d===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(x||_)&&(p.pathname+="/"),p}const hn=e=>e.join("/").replace(/\/\/+/g,"/"),_w=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ww(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z0=["post","put","patch","delete"];new Set(z0);const kw=["get",...z0];new Set(kw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yi.apply(this,arguments)}const yl=k.createContext(null),B0=k.createContext(null),Vr=k.createContext(null),_l=k.createContext(null),Sr=k.createContext({outlet:null,matches:[],isDataRoute:!1}),D0=k.createContext(null);function jw(e,t){let{relative:r}=t===void 0?{}:t;$s()||Fe(!1);let{basename:i,navigator:a}=k.useContext(Vr),{hash:l,pathname:d,search:f}=vl(e,{relative:r}),p=d;return i!=="/"&&(p=d==="/"?i:hn([i,d])),a.createHref({pathname:p,search:f,hash:l})}function $s(){return k.useContext(_l)!=null}function dr(){return $s()||Fe(!1),k.useContext(_l).location}function I0(e){k.useContext(Vr).static||k.useLayoutEffect(e)}function ct(){let{isDataRoute:e}=k.useContext(Sr);return e?Iw():Nw()}function Nw(){$s()||Fe(!1);let e=k.useContext(yl),{basename:t,future:r,navigator:i}=k.useContext(Vr),{matches:a}=k.useContext(Sr),{pathname:l}=dr(),d=JSON.stringify(th(a,r.v7_relativeSplatPath)),f=k.useRef(!1);return I0(()=>{f.current=!0}),k.useCallback(function(x,_){if(_===void 0&&(_={}),!f.current)return;if(typeof x=="number"){i.go(x);return}let g=rh(x,JSON.parse(d),l,_.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:hn([t,g.pathname])),(_.replace?i.replace:i.push)(g,_.state,_)},[t,i,d,l,e])}const Sw=k.createContext(null);function Cw(e){let t=k.useContext(Sr).outlet;return t&&k.createElement(Sw.Provider,{value:e},t)}function $0(){let{matches:e}=k.useContext(Sr),t=e[e.length-1];return t?t.params:{}}function vl(e,t){let{relative:r}=t===void 0?{}:t,{future:i}=k.useContext(Vr),{matches:a}=k.useContext(Sr),{pathname:l}=dr(),d=JSON.stringify(th(a,i.v7_relativeSplatPath));return k.useMemo(()=>rh(e,JSON.parse(d),l,r==="path"),[e,d,l,r])}function Ew(e,t){return Tw(e,t)}function Tw(e,t,r,i){$s()||Fe(!1);let{navigator:a}=k.useContext(Vr),{matches:l}=k.useContext(Sr),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let x=dr(),_;if(t){var g;let E=typeof t=="string"?Is(t):t;p==="/"||(g=E.pathname)!=null&&g.startsWith(p)||Fe(!1),_=E}else _=x;let v=_.pathname||"/",w=v;if(p!=="/"){let E=p.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=rw(e,{pathname:w}),C=Aw(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},f,E.params),pathname:hn([p,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:hn([p,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),l,r,i);return t&&C?k.createElement(_l.Provider,{value:{location:Yi({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:rn.Pop}},C):C}function Pw(){let e=Dw(),t=ww(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),r?k.createElement("pre",{style:a},r):null,null)}const Lw=k.createElement(Pw,null);class Mw extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?k.createElement(Sr.Provider,{value:this.props.routeContext},k.createElement(D0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ow(e){let{routeContext:t,match:r,children:i}=e,a=k.useContext(yl);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Sr.Provider,{value:t},i)}function Aw(e,t,r,i){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let d=e,f=(a=r)==null?void 0:a.errors;if(f!=null){let _=d.findIndex(g=>g.route.id&&(f==null?void 0:f[g.route.id])!==void 0);_>=0||Fe(!1),d=d.slice(0,Math.min(d.length,_+1))}let p=!1,x=-1;if(r&&i&&i.v7_partialHydration)for(let _=0;_<d.length;_++){let g=d[_];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(x=_),g.route.id){let{loaderData:v,errors:w}=r,b=g.route.loader&&v[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||b){p=!0,x>=0?d=d.slice(0,x+1):d=[d[0]];break}}}return d.reduceRight((_,g,v)=>{let w,b=!1,C=null,E=null;r&&(w=f&&g.route.id?f[g.route.id]:void 0,C=g.route.errorElement||Lw,p&&(x<0&&v===0?($w("route-fallback"),b=!0,E=null):x===v&&(b=!0,E=g.route.hydrateFallbackElement||null)));let S=t.concat(d.slice(0,v+1)),y=()=>{let N;return w?N=C:b?N=E:g.route.Component?N=k.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=_,k.createElement(Ow,{match:g,routeContext:{outlet:_,matches:S,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?k.createElement(Mw,{location:r.location,revalidation:r.revalidation,component:C,error:w,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):y()},null)}var F0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(F0||{}),U0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(U0||{});function Rw(e){let t=k.useContext(yl);return t||Fe(!1),t}function zw(e){let t=k.useContext(B0);return t||Fe(!1),t}function Bw(e){let t=k.useContext(Sr);return t||Fe(!1),t}function H0(e){let t=Bw(),r=t.matches[t.matches.length-1];return r.route.id||Fe(!1),r.route.id}function Dw(){var e;let t=k.useContext(D0),r=zw(),i=H0();return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}function Iw(){let{router:e}=Rw(F0.UseNavigateStable),t=H0(U0.UseNavigateStable),r=k.useRef(!1);return I0(()=>{r.current=!0}),k.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Yi({fromRouteId:t},l)))},[e,t])}const zp={};function $w(e,t,r){zp[e]||(zp[e]=!0)}function Fw(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function js(e){let{to:t,replace:r,state:i,relative:a}=e;$s()||Fe(!1);let{future:l,static:d}=k.useContext(Vr),{matches:f}=k.useContext(Sr),{pathname:p}=dr(),x=ct(),_=rh(t,th(f,l.v7_relativeSplatPath),p,a==="path"),g=JSON.stringify(_);return k.useEffect(()=>x(JSON.parse(g),{replace:r,state:i,relative:a}),[x,g,a,r,i]),null}function Uw(e){return Cw(e.context)}function we(e){Fe(!1)}function Hw(e){let{basename:t="/",children:r=null,location:i,navigationType:a=rn.Pop,navigator:l,static:d=!1,future:f}=e;$s()&&Fe(!1);let p=t.replace(/^\/*/,"/"),x=k.useMemo(()=>({basename:p,navigator:l,static:d,future:Yi({v7_relativeSplatPath:!1},f)}),[p,f,l,d]);typeof i=="string"&&(i=Is(i));let{pathname:_="/",search:g="",hash:v="",state:w=null,key:b="default"}=i,C=k.useMemo(()=>{let E=Os(_,p);return E==null?null:{location:{pathname:E,search:g,hash:v,state:w,key:b},navigationType:a}},[p,_,g,v,w,b,a]);return C==null?null:k.createElement(Vr.Provider,{value:x},k.createElement(_l.Provider,{children:r,value:C}))}function nh(e){let{children:t,location:r}=e;return Ew(Fd(t),r)}new Promise(()=>{});function Fd(e,t){t===void 0&&(t=[]);let r=[];return k.Children.forEach(e,(i,a)=>{if(!k.isValidElement(i))return;let l=[...t,a];if(i.type===k.Fragment){r.push.apply(r,Fd(i.props.children,l));return}i.type!==we&&Fe(!1),!i.props.index||!i.props.children||Fe(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Fd(i.props.children,l)),r.push(d)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Xo.apply(this,arguments)}function Z0(e,t){if(e==null)return{};var r={},i=Object.keys(e),a,l;for(l=0;l<i.length;l++)a=i[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Zw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vw(e,t){return e.button===0&&(!t||t==="_self")&&!Zw(e)}function Ud(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let i=e[r];return t.concat(Array.isArray(i)?i.map(a=>[r,a]):[[r,i]])},[]))}function Ww(e,t){let r=Ud(e);return t&&t.forEach((i,a)=>{r.has(a)||t.getAll(a).forEach(l=>{r.append(a,l)})}),r}const qw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Kw=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Gw="6";try{window.__reactRouterVersion=Gw}catch{}const Qw=k.createContext({isTransitioning:!1}),Xw="startTransition",Bp=U_[Xw];function Jw(e){let{basename:t,children:r,future:i,window:a}=e,l=k.useRef();l.current==null&&(l.current=Yb({window:a,v5Compat:!0}));let d=l.current,[f,p]=k.useState({action:d.action,location:d.location}),{v7_startTransition:x}=i||{},_=k.useCallback(g=>{x&&Bp?Bp(()=>p(g)):p(g)},[p,x]);return k.useLayoutEffect(()=>d.listen(_),[d,_]),k.useEffect(()=>Fw(i),[i]),k.createElement(Hw,{basename:t,children:r,location:f.location,navigationType:f.action,navigator:d,future:i})}const Yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ek=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_t=k.forwardRef(function(t,r){let{onClick:i,relative:a,reloadDocument:l,replace:d,state:f,target:p,to:x,preventScrollReset:_,viewTransition:g}=t,v=Z0(t,qw),{basename:w}=k.useContext(Vr),b,C=!1;if(typeof x=="string"&&ek.test(x)&&(b=x,Yw))try{let N=new URL(window.location.href),R=x.startsWith("//")?new URL(N.protocol+x):new URL(x),M=Os(R.pathname,w);R.origin===N.origin&&M!=null?x=M+R.search+R.hash:C=!0}catch{}let E=jw(x,{relative:a}),S=rk(x,{replace:d,state:f,target:p,preventScrollReset:_,relative:a,viewTransition:g});function y(N){i&&i(N),N.defaultPrevented||S(N)}return k.createElement("a",Xo({},v,{href:b||E,onClick:C||l?i:y,ref:r,target:p}))}),Dp=k.forwardRef(function(t,r){let{"aria-current":i="page",caseSensitive:a=!1,className:l="",end:d=!1,style:f,to:p,viewTransition:x,children:_}=t,g=Z0(t,Kw),v=vl(p,{relative:g.relative}),w=dr(),b=k.useContext(B0),{navigator:C,basename:E}=k.useContext(Vr),S=b!=null&&sk(v)&&x===!0,y=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,N=w.pathname,R=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(N=N.toLowerCase(),R=R?R.toLowerCase():null,y=y.toLowerCase()),R&&E&&(R=Os(R,E)||R);const M=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let D=N===y||!d&&N.startsWith(y)&&N.charAt(M)==="/",O=R!=null&&(R===y||!d&&R.startsWith(y)&&R.charAt(y.length)==="/"),P={isActive:D,isPending:O,isTransitioning:S},G=D?i:void 0,I;typeof l=="function"?I=l(P):I=[l,D?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ne=typeof f=="function"?f(P):f;return k.createElement(_t,Xo({},g,{"aria-current":G,className:I,ref:r,style:ne,to:p,viewTransition:x}),typeof _=="function"?_(P):_)});var Hd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hd||(Hd={}));var Ip;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ip||(Ip={}));function tk(e){let t=k.useContext(yl);return t||Fe(!1),t}function rk(e,t){let{target:r,replace:i,state:a,preventScrollReset:l,relative:d,viewTransition:f}=t===void 0?{}:t,p=ct(),x=dr(),_=vl(e,{relative:d});return k.useCallback(g=>{if(Vw(g,r)){g.preventDefault();let v=i!==void 0?i:Qo(x)===Qo(_);p(e,{replace:v,state:a,preventScrollReset:l,relative:d,viewTransition:f})}},[x,p,_,i,a,r,e,l,d,f])}function nk(e){let t=k.useRef(Ud(e)),r=k.useRef(!1),i=dr(),a=k.useMemo(()=>Ww(i.search,r.current?null:t.current),[i.search]),l=ct(),d=k.useCallback((f,p)=>{const x=Ud(typeof f=="function"?f(a):f);r.current=!0,l("?"+x,p)},[l,a]);return[a,d]}function sk(e,t){t===void 0&&(t={});let r=k.useContext(Qw);r==null&&Fe(!1);let{basename:i}=tk(Hd.useViewTransitionState),a=vl(e,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Os(r.currentLocation.pathname,i)||r.currentLocation.pathname,d=Os(r.nextLocation.pathname,i)||r.nextLocation.pathname;return $d(a.pathname,d)!=null||$d(a.pathname,l)!=null}const V0=k.createContext(),bl=()=>{const e=k.useContext(V0);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},ik=({children:e})=>{const[t,r]=k.useState(()=>{const l=typeof window<"u"?localStorage.getItem("theme"):null,d=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,f=l?l==="dark":d;if(typeof document<"u"){const p=document.documentElement;f?p.classList.add("dark"):p.classList.remove("dark")}return f});k.useEffect(()=>{const l=window.document.documentElement;t?(l.classList.add("dark"),localStorage.setItem("theme","dark")):(l.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]);const i=()=>{r(l=>!l)},a=l=>{r(l==="dark")};return n.jsx(V0.Provider,{value:{isDark:t,toggleTheme:i,setTheme:a,theme:t?"dark":"light"},children:e})},ak={},$p=e=>{let t;const r=new Set,i=(_,g)=>{const v=typeof _=="function"?_(t):_;if(!Object.is(v,t)){const w=t;t=g??(typeof v!="object"||v===null)?v:Object.assign({},t,v),r.forEach(b=>b(t,w))}},a=()=>t,p={setState:i,getState:a,getInitialState:()=>x,subscribe:_=>(r.add(_),()=>r.delete(_)),destroy:()=>{(ak?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},x=t=e(i,a,p);return p},ok=e=>e?$p(e):$p;var W0={exports:{}},q0={},K0={exports:{}},G0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=k;function lk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ck=typeof Object.is=="function"?Object.is:lk,dk=As.useState,uk=As.useEffect,hk=As.useLayoutEffect,fk=As.useDebugValue;function pk(e,t){var r=t(),i=dk({inst:{value:r,getSnapshot:t}}),a=i[0].inst,l=i[1];return hk(function(){a.value=r,a.getSnapshot=t,Bc(a)&&l({inst:a})},[e,r,t]),uk(function(){return Bc(a)&&l({inst:a}),e(function(){Bc(a)&&l({inst:a})})},[e]),fk(r),r}function Bc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ck(e,r)}catch{return!0}}function mk(e,t){return t()}var gk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mk:pk;G0.useSyncExternalStore=As.useSyncExternalStore!==void 0?As.useSyncExternalStore:gk;K0.exports=G0;var xk=K0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wl=k,yk=xk;function _k(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vk=typeof Object.is=="function"?Object.is:_k,bk=yk.useSyncExternalStore,wk=wl.useRef,kk=wl.useEffect,jk=wl.useMemo,Nk=wl.useDebugValue;q0.useSyncExternalStoreWithSelector=function(e,t,r,i,a){var l=wk(null);if(l.current===null){var d={hasValue:!1,value:null};l.current=d}else d=l.current;l=jk(function(){function p(w){if(!x){if(x=!0,_=w,w=i(w),a!==void 0&&d.hasValue){var b=d.value;if(a(b,w))return g=b}return g=w}if(b=g,vk(_,w))return b;var C=i(w);return a!==void 0&&a(b,C)?(_=w,b):(_=w,g=C)}var x=!1,_,g,v=r===void 0?null:r;return[function(){return p(t())},v===null?void 0:function(){return p(v())}]},[t,r,i,a]);var f=bk(e,l[0],l[1]);return kk(function(){d.hasValue=!0,d.value=f},[f]),Nk(f),f};W0.exports=q0;var Sk=W0.exports;const Ck=au(Sk),Q0={},{useDebugValue:Ek}=pn,{useSyncExternalStoreWithSelector:Tk}=Ck;let Fp=!1;const Pk=e=>e;function Lk(e,t=Pk,r){(Q0?"production":void 0)!=="production"&&r&&!Fp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Fp=!0);const i=Tk(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Ek(i),i}const Up=e=>{(Q0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ok(e):e,r=(i,a)=>Lk(t,i,a);return Object.assign(r,t),r},Mk=e=>e?Up(e):Up,Ok=(()=>{try{return localStorage.getItem("lang")||"vi"}catch{return"vi"}})(),Ak=(()=>{try{return localStorage.getItem("theme")||"light"}catch{return"light"}})(),Rk=(()=>{try{let e=sessionStorage.getItem("token"),t=sessionStorage.getItem("user");if((!e||!t)&&(e=localStorage.getItem("token"),t=localStorage.getItem("user"),e&&t&&(sessionStorage.setItem("token",e),sessionStorage.setItem("user",t))),e&&t)return{...JSON.parse(t),token:e}}catch(e){console.error("Failed to load user from storage",e)}return null})(),ke=Mk((e,t)=>({user:Rk,lang:Ok,theme:Ak,setUser:r=>{try{if(r){const{token:i,...a}=r,l=JSON.stringify(a);sessionStorage.setItem("user",l),sessionStorage.setItem("token",i),localStorage.setItem("user",l),localStorage.setItem("token",i)}else sessionStorage.removeItem("user"),sessionStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("token")}catch(i){console.error("Failed to save user to storage",i)}e({user:r})},clearUser:()=>{try{sessionStorage.removeItem("user"),sessionStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("token")}catch{}e({user:null})},setLang:r=>{try{localStorage.setItem("lang",r)}catch{}e({lang:r})},setTheme:r=>{try{localStorage.setItem("theme",r)}catch{}e({theme:r})}})),aa="http://localhost:25565";async function oa(e){let t=null;try{t=await e.json()}catch{t=null}if(!e.ok)throw t&&t.error?{error:t.error,status:e.status}:{error:"network_error",status:e.status};return t}async function zk({email:e,password:t}){try{const r=await fetch(`${aa}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});return await oa(r)}catch(r){throw r&&r.error?r:{error:"network_error"}}}async function Bk({email:e}){try{const t=await fetch(`${aa}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});return await oa(t)}catch(t){throw t&&t.error?t:{error:"network_error"}}}async function Dk({current_password:e,new_password:t}){try{const r=sessionStorage.getItem("token")||localStorage.getItem("token"),i=await fetch(`${aa}/api/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({current_password:e,new_password:t})});return await oa(i)}catch(r){throw r&&r.error?r:{error:"network_error"}}}async function Ik({token:e,new_password:t}){try{const r=await fetch(`${aa}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,new_password:t})});return await oa(r)}catch(r){throw r&&r.error?r:{error:"network_error"}}}async function X0({email:e,current_password:t,new_password:r}){try{const i=await fetch(`${aa}/api/auth/change-password-public`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,current_password:t,new_password:r})});return await oa(i)}catch(i){throw i&&i.error?i:{error:"network_error"}}}function Fs(){const{user:e,setUser:t,clearUser:r}=ke(),i=k.useCallback(async({email:l,password:d})=>{const f=await zk({email:l,password:d});if(f.require_password_change){try{sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}try{f.token&&sessionStorage.setItem("token",f.token)}catch{}return{must_change_password:!0,message:f.message,user_id:f.user_id,email:f.email}}const p={id:f.id,email:f.email,token:f.token,role:f.role};return t(p),p},[t]),a=k.useCallback(()=>{r()},[r]);return{user:e,login:i,logout:a}}const Dc={en:{dashboard:"Dashboard",tracking:"Tracking",schedule:"Schedule",buses:"Buses",drivers:"Drivers",routes:"Routes",notifications:"Notifications",students:"Students",parents:"Parents",accounts:"Accounts",settings:"Settings",home:"Home",map:"Map",trip:"Trip",login:"Login",register:"Register",logout:"Logout",create:"Create",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",close:"Close",back:"Back",next:"Next",submit:"Submit",search:"Search",filter:"Filter",detail:"Detail",message:"Message",send:"Send",quick_send:"Quick Send",processing:"Processing... ",name:"Name",full_name:"Full Name",phone:"Phone",email:"Email",password:"Password",username:"Username",role:"Role",address:"Address",date:"Date",time:"Time",reason:"Reason",status:"Status",grade:"Grade",username_placeholder:"Username or email",password_placeholder:"Password",reason_placeholder:"e.g. Sick, Out",search_placeholder:"Search...",admin_role:"Admin",parent_role:"Parent",driver_role:"Driver",driver_panel:"Driver Panel",smart_school_bus:"Smart School Bus",control_panel:"Control Panel",driver_dashboard:"Driver Dashboard",today_schedules:"Today's Schedules",student_list:"Student List",emergency_alert:"Emergency Alert",utilities:"Utilities",light_mode:"Light Mode",dark_mode:"Dark Mode",emergency_report:"Emergency Report",update_location:"Update Location",schedules_today:"Schedules Today",waiting_students:"Waiting Students",on_bus:"On Bus",completed:"Completed",scheduled:"Scheduled",in_progress:"In Progress",waiting_pickup:"Waiting",picked_up:"Picked Up",dropped_off:"Dropped",absent:"Absent",start_trip:"Start",complete_trip:"Complete",pick_up:"Pick Up",drop_off:"Drop Off",mark_absent:"Mark Absent",emergency_description:"Describe emergency situation...",send_alert_now:"Send Alert Now",online:"Online",paused:"Paused",tracking_label:"Tracking",stopped:"Stopped",mode:"Mode",street_map:"Street",satellite_map:"Satellite",zoom_label:"Zoom",trip_map:"Trip Map",navigation_panel:"Navigation Panel",navigating_to_prefix:"Navigating to",select_student_to_navigate:"Select a student to navigate",route_info:"Route Information",directions:"Directions",to_label:"To",gps_location:"GPS Location",accuracy:"Accuracy",switch_to_satellite:"Switch to satellite",switch_to_street:"Switch to street",clear_route:"Clear route",centered_on_current_location:"Centered on current location",route_cleared:"Route cleared",cannot_create_route:"Cannot create route",cannot_create_route_fallback_line:"Cannot create route. Using straight line.",map_load_failed:"Unable to load map",using_default_location_hcm:"Using default location (Ho Chi Minh City)",cannot_get_gps_using_default:"Cannot get GPS, using default location",device_no_gps:"Device does not support GPS",gps_tracking_error:"GPS tracking error",started_gps_tracking:"Started GPS tracking",stopped_gps_tracking:"Stopped GPS tracking",loading_map:"Loading map...",map_stack_hint:"Leaflet + OpenStreetMap + Routing",start_gps:"Start GPS",stop_gps:"Stop GPS",center_on_current_location:"Center on current location",notify_parents:"Notify parents",notification_sent_to_parents:"Notification has been sent to parents!",no_stop_assigned_short:"no stop assigned",remaining:"Remaining",student_list_by_route:"Student list by route",planned_time:"Planned:",actual_time:"Actual:",call:"Call",quick_message_title:"Send quick message",enter_message_for_parent:"Enter a message for the parent...",send_message:"Send Message",send_message_failed:"An error occurred while sending the message!",call_parent_prefix:"Call parent",enter_emergency_message:"Enter emergency alert message:",sent_message_to_parent_of:"Sent message to parent of",confirm_complete_trip:"Confirm to complete this trip?",load_schedules_failed:"Failed to load schedules list",no_students_assigned_trip:"No students are assigned to this trip yet.",load_trip_failed:"Unable to load trip data",load_trip_failed_retry:"Unable to load trip data. Please try again.",updated_status_to:"Updated status to",data_load_failed_generic:"Unable to load data. Please check the connection or sign in again.",update_status_success:"Student status updated successfully!",update_status_failed:"An error occurred while updating status!",emergency_sent_success:"Emergency alert has been sent!",emergency_send_failed:"An error occurred while sending the alert!",emergency_modal_title:"Emergency Alert",emergency_modal_desc:"Choose the emergency type and optionally add details. This will be sent to admins and relevant parents with highest priority.",emergency_type_accident:"Traffic Accident",emergency_type_medical:"Medical Emergency",emergency_type_security:"Security Threat",emergency_type_breakdown:"Bus Breakdown",emergency_type_traffic:"Severe Traffic",emergency_type_weather:"Severe Weather",emergency_type_other:"Other",emergency_message_placeholder:"Describe important details (optional)...",send_now:"Send Now",send_to_admins:"Send to Admins",send_to_parents:"Send to Parents",location_permission_required:"Current location is required. Please enable location services to send the alert.",emergency_history:"Emergency History",emergency_history_desc:"Your previously sent emergency alerts.",no_emergency_history:"No emergency alerts yet.",load_emergency_history_failed:"Failed to load emergency history",location_updated:"Location updated!",location_update_failed:"Failed to update location!",cannot_get_current_location:"Unable to get current location!",load_students_failed:"Unable to load student list!",start_trip_success:"Trip started!",start_trip_failed:"Unable to start trip!",complete_trip_success:"Trip completed!",complete_trip_failed:"Unable to complete trip!",no_schedules_assigned_short:"No schedules are assigned to your account yet.",no_schedules_contact_admin:"No schedules available. Please contact the administrator for assignment.",no_schedules_next_30_days:"No schedules assigned in the next 30 days.",parent_dashboard:"Parent Dashboard",track_child:"Track Your Child",child_tracking:"Child Tracking",bus_location:"Bus Location",estimated_arrival:"Estimated Arrival",distance:"Distance",safety_zone:"Safety Zone",report_absence:"Report Absence",minutes:"minutes",meters_250:"250 m",meters_500:"500 m",km_1:"1 km",safety_zone_help:"System will alert when bus enters/exits this zone",loading_data:"Loading data...",no_child_info_title:"No child information",no_child_info_desc:"Please contact the school to register bus service for your child",view_bus_location_for_child:"View the bus location for your child",select_child_to_track:"Select a child to track:",grade_prefix:"Grade",no_active_trip_title:"No active trip",no_active_trip_desc:"The bus hasn't started today's trip yet",pickup_point:"Pickup stop",route_label:"Route",unknown:"Unknown",trip_info_title:"Trip information",bus_label:"Bus",no_active_trip_now:"No active trips right now",hello:"Hello",track_children_today:"Track your children's trips today",total_children:"Total children",your_children:"Your children",no_student_info_title:"No student information",please_contact_school:"Please contact the school to register",driver_colon:"Driver:",boarded_at:"Boarded at:",track:"Track",history:"History",notifications_title:"Notifications",loading_notifications:"Loading notifications...",all_notifications_read:"All notifications are read",from_label:"From",high_priority:"High priority",admin_panel:"Admin Panel",admin_subtitle:"Manage buses and schedules",manage_buses:"Manage Buses",manage_drivers:"Manage Drivers",manage_routes:"Manage Routes",manage_schedules:"Manage Schedules",manage_students:"Manage Students",manage_parents:"Manage Parents",add_bus:"Add Bus",add_driver:"Add Driver",add_route:"Add Route",add_schedule:"Add Schedule",add_student:"Add Student",add_parent:"Add Parent",total_buses:"Total Buses",total_drivers:"Total Drivers",total_students:"Total Students",total_parents:"Total Parents",active_trips:"Active Trips",active_buses:"Active buses",active_drivers:"Active drivers",drivers_with_bus:"Drivers with bus",total_registered:"Total registered",currently_running:"Currently running",today_label:"Today",welcome_back:"Welcome back! 👋",dashboard_subtitle:"Here's what's happening with your school buses today.",vs_last_month:"vs last month",bus_activity:"Bus Activity",this_week:"This Week",recent_activity:"Recent Activity",bus_started_route:"Bus #001 started route",driver_checked_in:"Driver John checked in",route_completed:"Route B completed",students_picked_up:"25 students picked up",traffic_delay:"Traffic delay on Route A",reset_password:"Reset Password",set_new_password:"Set new password",enter_new_password:"Enter new password",confirm_password:"Confirm password",passwords_do_not_match:"Passwords do not match",invalid_or_expired_link:"This reset link is invalid or has expired",password_updated_success:"Password updated successfully. Please log in.",back_to_login:"Back to login",public_change_password_title:"Change password",public_change_password_desc:"Enter Email + current password + new password to change.",current_password_label:"Current password",new_password_label:"New password",confirm_new_password_label:"Confirm new password",password_change_success:"Password changed successfully. Please log in.",current_password_incorrect:"Current password is incorrect",user_not_found:"Email does not exist",enter_current_password:"Enter current password",login_welcome_title:"Welcome back!",login_welcome_subtitle:"Sign in to continue",remember_me:"Remember me",change_password:"Change password",forgot_password:"Forgot password?",sign_in:"Sign in",provisioned_info:"Accounts are provisioned by admin. If you do not have an account or forgot your password, please contact the school or use Forgot Password.",feature_security:"Security",feature_fast:"Fast",feature_easy:"Easy",email_placeholder:"email@example.com",password_enter_placeholder:"Enter password",invalid_credentials:"Incorrect email or password",login_failed:"Login failed",forgot_password_title:"Forgot password",forgot_password_desc:"Enter your account email. Your request will be sent to the administrator to reset your password to your phone number. After signing in with that password, the system will require you to change it.",send_request:"Send request",forgot_request_sent:"Your request has been sent to admin. You will be notified when it is processed.",try_again_later:"Something went wrong, please try again later.",register_title:"Create a new account",register_subtitle:"Register to track your child",name_placeholder:"Full name",phone_placeholder:"Phone number",confirm_password_placeholder:"Re-enter password",role_info_parent:"You are registering as Parent",register_now:"Register now",or:"Or",already_have_account:"Already have an account?",login_now:"Sign in now",agree_terms:"By registering, you agree to the",terms_of_service:"Terms of Service",privacy_policy:"Privacy Policy",register_success_redirect:"✅ Registered successfully! Redirecting to login...",register_failed:"❌ Registration failed. Please try again.",enter_full_name:"Please enter full name",please_enter_email:"Please enter email",enter_password:"Please enter password",password_min6:"Password must be at least 6 characters",confirm_password_mismatch:"Confirmation password does not match",bus:"Bus",vehicle:"Vehicle",plate:"Plate Number",license_plate:"License Plate",capacity:"Capacity",bus_status:"Bus Status",select_bus:"Select Bus",trip_info:"Trip Info",speed_label:"Speed",students_on_bus:"Students on bus",status_label:"Status",late:"Late",running:"Running",navigate:"Navigate",route_name:"Route Name",start_time:"Start Time",end_time:"End Time",recent_alerts:"Recent Alerts",recent_messages:"Recent Messages",unread:"Unread",mark_as_read:"Mark as Read",custom_message:"Custom Message",template_traffic:"Traffic jam",template_late:"Late 10 minutes",template_broken:"Bus broken",template_departed:"Departed",active:"Active",inactive:"Inactive",pending:"Pending",approved:"Approved",rejected:"Rejected",all:"All",no_buses:"No buses available",no_data:"No data",loading:"Loading...",error:"Error",success:"Success",warning:"Warning",info:"Info",seats:"seats",creating:"Creating...",create_account:"Create account",and:"and",invalid_email:"Invalid email",please_enter_phone:"Please enter phone number",default_password_info:"The default password will be this phone number. The system will require a password change on first login.",confirm_delete_user:'Are you sure you want to delete user "{email}"?',confirm_delete_bus:"Are you sure you want to delete this bus?",confirm_delete_driver:"Are you sure you want to delete this driver?",confirm_delete_student:"Are you sure you want to delete this student?",selected:"selected",manage_users:"Manage Users",manage_students:"Manage Students",manage_drivers:"Manage Drivers",manage_buses:"Manage Buses",manage_routes:"Manage Routes",manage_schedules:"Manage Schedules",manage_notifications:"Manage Notifications",session_manager:"Session Manager",total_count:"Total",actions:"Actions",refresh:"Refresh",loading_list:"Loading list...",not_found:"No matching results",none_yet:"No data yet",id:"ID",stops:"Stops",users_page_title:"User Management",users_total_label:"Total users",add_user:"Add User",search_email_placeholder:"Search by email...",all_roles:"All roles",delete_user:"Delete",no_users_found:"No users found",no_users_system:"No users in the system yet",access_denied_title:"Access denied",access_denied_desc:"You need to sign in as Admin to view this page.",students_page_title:"Student Management",students_total_label:"Total students",add_student_button:"Add Student",search_students_placeholder:"Search by name, class, grade...",student_name:"Student Name",grade_level:"Grade",class_name:"Class",parent_label:"Parent",pickup_stop:"Pickup Stop",no_students_found:"No students found",no_students_yet:"No students yet",edit_item:"Edit",delete_item:"Delete",add_new_student:"Add new student",edit_student:"Edit student",choose_parent:"Choose parent",choose_route_optional:"Choose route (optional)",choose_stop:"Choose stop",choose_bus_optional:"Choose bus (optional)",home_address:"Home address",cancel_button:"Cancel",create_button:"Create",update_button:"Update",drivers_page_title:"Driver Management",drivers_total_label:"Total drivers",add_driver_button:"Add Driver",driver_label:"Driver",contact:"Contact",assigned_bus:"Assigned Bus",driver_status:"Status",edit_driver:"Edit",delete_driver:"Delete",no_drivers_yet:"No drivers yet",no_bus:"No bus",buses_page_title:"Bus Management",buses_total_label:"Total buses",add_bus_button:"Add Bus",routes_page_title:"Route Management",routes_total_label:"Total routes",schedule_page_title:"Schedule Management",schedule_total_label:"Total schedules",notifications_page_title:"Notifications",notifications_total_label:"Total notifications",password_resets_page_title:"Password Reset Requests",password_resets_total_label:"Total requests",session_manage_title:"Session Management",current_account_info:"Current account information",user_id:"User ID",not_logged_in_title:"Not signed in",please_login_desc:"Please sign in to continue",go_to_login:"Go to login page",no_matching_parents:"No matching parents",found_parents_count_prefix:"Found",found_parents_count_suffix:"parents",bus_tracking_hint:"Select a bus to enable real-time tracking",auto_refresh_20s:"Auto refresh (20s)",no_requests:"No requests",approve:"Approve",reject:"Reject",reject_reason_optional:"Rejection reason (optional):",approve_failed:"Approve failed",reject_failed:"Reject failed",session_expired_or_forbidden_admin:"Session expired or no permission. Please sign in again as admin.",load_list_failed_try_again:"Failed to load list. Please try again.",tracking_buses_title:"Bus Tracking",buses_running:"buses running",update:"Update",every_10s:"every 10s",bus_status_sidebar:"Bus Status",no_buses_running:"No buses running",kmh:"km/h",send_notifications:"Send Notifications",permission_warning_title:"You don't have permission to send notifications",current_role:"Current role",only_admin_driver_can_send:"Only admin or driver can send notifications.",logout_and_login:"Log out and log in again",send_to:"Send to",parents_label:"Parents",drivers_label:"Drivers",all_label:"All",send_mode:"Send mode",send_to_all:"Send to all",choose_recipients:"Choose recipients",select_recipients:"Select recipients",select_all:"Select all",clear_selection:"Clear selection",loading_users_list:"Loading list...",no_users:"No users",notification_type:"Notification type",priority_level:"Priority",title_label:"Title",title_placeholder:"Enter notification title",body_label:"Content",body_placeholder:"Enter notification content",sending:"Sending...",no_permission_short:"No permission",send_notification:"Send notification",notifications_history:"Notification history",unread_count_label:"Unread",mark_all_read:"Mark all as read",delete_read:"Delete read",refresh_button:"Refresh",auto_refresh_20s_label:"Auto refresh (20s)",no_notifications:"No notifications yet",inbox_title:"Inbox",quick_messages_title:"Quick Messages",quick_messages_hint:"Choose a template to quickly notify parents",send_to_parents_today_title:"Send to parents on today’s trip",send_to_parents_today_desc:"Notifications will be sent to all parents whose children are waiting or on your bus today.",no_recipients_found_today:"No parents found on today’s trip",failed_to_send_notification:"Failed to send notification",important:"Important",new_label:"New",sent_to:"Sent to",view_details:"View details",delete_label:"Delete",notification_detail_title:"Notification details",read_label:"Read",unread_label:"Unread",sender:"Sender",mark_unread:"Mark as unread",mark_read:"Mark as read",copy:"Copy",copy_failed:"Copy failed",copied_notification_content:"Copied notification content",no_data_label:"No data",confirm_delete_notification:"Are you sure you want to delete this notification?",delete_notification_failed:"Delete notification failed",mark_all_read_failed:"Mark all as read failed",cleanup_read_confirm:"Delete all read notifications?",cleanup_read_failed:"Cleanup read notifications failed",mark_unread_failed:"Mark as unread failed",please_fill_title_body:"Please fill in title and content",please_select_at_least_one:"Please select at least one recipient",sent_notification_to:"Sent notification to",all_lower:"all",parent_lower:"parent",driver_lower:"driver",user_lower:"user",low:"Low",medium:"Medium",high:"High",critical:"Critical",qm_depart_on_time_title:"Departing on time",qm_depart_on_time_body:"The bus has departed on schedule. Please bring your child to the pickup stop.",qm_delay_10_title:"Running 10 minutes late",qm_delay_10_body:"The bus will arrive about 10 minutes late due to traffic. Sorry for the inconvenience.",qm_all_picked_title:"All students picked up",qm_all_picked_body:"All students have boarded safely. We are heading to school.",qm_route_change_title:"Route change",qm_route_change_body:"Due to traffic conditions, we will take an alternate route. Arrival time may change.",schedule_subtitle:"Create and assign bus schedules (Weekly/Monthly)",auto_refresh_15s_label:"Auto refresh (15s)",no_schedules_yet:"No schedules yet",assign_bus:"Assign bus",not_assigned:"Not assigned",create_new_schedule_title:"Create new schedule",schedule_create_subtitle:"Create one-time or recurring weekly/monthly schedules",schedule_type:"Schedule type",once_label:"📅 One-time",once_desc:"Single trip",daily_label:"📆 Daily",daily_desc:"Repeat every day",weekly_label:"📊 Weekly",weekly_desc:"Repeat every week",monthly_label:"📋 Monthly",monthly_desc:"Repeat every month",choose_route:"Choose route",bus_assign_later:"Bus (can assign later)",no_driver:"No driver",from_date:"From date",to_date:"To date",departure_time:"Departure time",schedule_created_success:"Schedule created successfully!",recurring_schedule_created_success:"Recurring schedules created successfully!",confirm_delete_schedule:"Are you sure you want to delete this schedule?",error_deleting_schedule:"Error deleting schedule",error_assigning_bus:"Error assigning bus",cancelled:"Cancelled",proceed_create_schedule_question:"Do you want to continue creating this schedule?",hint_assign_driver_first:"Hint: Go to Drivers page to assign a bus to a driver before creating schedules.",manage_stops:"Manage stops",no_route_selected:"No route selected",add_new_stop:"Add new stop",stop_name:"Stop name",latitude:"Latitude",longitude:"Longitude",is_pickup_stop:"Is pickup stop",add_stop:"Add stop",add_stop_failed:"Add stop failed",stops_list:"Stops list",no_stops_yet_for_route:"No stops yet for this route",order:"Order",type:"Type",up:"Up",down:"Down",pickup:"Pickup",dropoff:"Dropoff",confirm_delete_stop:"Delete this stop?",delete_failed:"Delete failed",enter_valid_stop_fields:"Please enter valid Name, Lat, Lng",move_up_failed:"Move up failed",move_down_failed:"Move down failed",update_stop_failed:"Update stop failed",confirm_logout:"Are you sure you want to logout?"},vi:{dashboard:"Bảng điều khiển",tracking:"Theo dõi",schedule:"Lịch trình",buses:"Xe buýt",drivers:"Tài xế",routes:"Tuyến đường",notifications:"Thông báo",students:"Học sinh",parents:"Phụ huynh",accounts:"Tài khoản",settings:"Cài đặt",home:"Trang chủ",map:"Bản đồ",trip:"Chuyến đi",login:"Đăng nhập",register:"Đăng ký",logout:"Đăng xuất",create:"Tạo mới",edit:"Chỉnh sửa",delete:"Xóa",save:"Lưu",cancel:"Hủy",close:"Đóng",back:"Quay lại",next:"Tiếp theo",submit:"Gửi",search:"Tìm kiếm",filter:"Lọc",detail:"Chi tiết",message:"Tin nhắn",send:"Gửi",quick_send:"Gửi nhanh",processing:"Đang xử lý...",name:"Tên",full_name:"Họ và tên",phone:"Số điện thoại",email:"Email",password:"Mật khẩu",username:"Tên đăng nhập",role:"Vai trò",address:"Địa chỉ",date:"Ngày",time:"Thời gian",reason:"Lý do",status:"Trạng thái",grade:"Lớp",username_placeholder:"Tên đăng nhập hoặc email",password_placeholder:"Mật khẩu",reason_placeholder:"Ví dụ: Ốm, Ra ngoại",search_placeholder:"Tìm kiếm...",admin_role:"Quản trị viên",parent_role:"Phụ huynh",driver_role:"Tài xế",driver_panel:"Bảng Tài Xế",smart_school_bus:"Smart School Bus",control_panel:"Bảng Điều Khiển",driver_dashboard:"Bảng Điều Khiển",today_schedules:"Lịch trình hôm nay",student_list:"Danh sách học sinh",emergency_alert:"Cảnh báo khẩn cấp",utilities:"Tiện ích",light_mode:"Chế độ sáng",dark_mode:"Chế độ tối",emergency_report:"Báo cáo khẩn cấp",update_location:"Cập nhật vị trí",schedules_today:"Lịch trình hôm nay",waiting_students:"Học sinh đang chờ",on_bus:"Đang trên xe",completed:"Đã hoàn thành",scheduled:"Đã lên lịch",in_progress:"Đang chạy",waiting_pickup:"Chờ đón",picked_up:"Trên xe",dropped_off:"Đã trả",absent:"Vắng",start_trip:"Bắt đầu",complete_trip:"Hoàn thành",pick_up:"Đón lên",drop_off:"Trả học sinh",mark_absent:"Vắng mặt",emergency_description:"Mô tả tình huống khẩn cấp...",send_alert_now:"Gửi cảnh báo ngay",online:"Đang hoạt động",paused:"Tạm dừng",tracking_label:"Theo dõi",stopped:"Dừng",mode:"Chế độ",street_map:"Đường phố",satellite_map:"Vệ tinh",zoom_label:"Thu phóng",trip_map:"Bản đồ chuyến đi",navigation_panel:"Bảng điều hướng",navigating_to_prefix:"Đang điều hướng đến",select_student_to_navigate:"Chọn học sinh để tìm đường",route_info:"Thông tin đường đi",directions:"Hướng dẫn",to_label:"Đến",gps_location:"Vị trí GPS",accuracy:"Độ chính xác",switch_to_satellite:"Chuyển sang vệ tinh",switch_to_street:"Chuyển sang đường phố",clear_route:"Xóa đường đi",centered_on_current_location:"Đã về vị trí hiện tại",route_cleared:"Đã xóa đường đi",cannot_create_route:"Không thể tạo đường đi",cannot_create_route_fallback_line:"Không thể tạo đường đi. Sử dụng đường thẳng.",map_load_failed:"Không thể tải bản đồ",using_default_location_hcm:"Sử dụng vị trí mặc định (TP.HCM)",cannot_get_gps_using_default:"Không thể lấy GPS, sử dụng vị trí mặc định",device_no_gps:"Thiết bị không hỗ trợ GPS",gps_tracking_error:"Lỗi GPS tracking",started_gps_tracking:"Bắt đầu theo dõi GPS",stopped_gps_tracking:"Đã dừng theo dõi GPS",loading_map:"Đang tải bản đồ...",map_stack_hint:"Leaflet + OpenStreetMap + Routing",start_gps:"Bắt đầu GPS",stop_gps:"Dừng GPS",center_on_current_location:"Về vị trí hiện tại",notify_parents:"Thông báo phụ huynh",notification_sent_to_parents:"Đã gửi thông báo cho phụ huynh!",no_stop_assigned_short:"chưa có điểm dừng",remaining:"Còn lại",student_list_by_route:"Danh sách học sinh theo lộ trình",planned_time:"Dự kiến:",actual_time:"Thực tế:",call:"Gọi",quick_message_title:"Gửi tin nhắn nhanh",enter_message_for_parent:"Nhập tin nhắn cho phụ huynh...",send_message:"Gửi tin nhắn",send_message_failed:"Có lỗi xảy ra khi gửi tin nhắn!",call_parent_prefix:"Gọi cho phụ huynh",enter_emergency_message:"Nhập tin nhắn cảnh báo khẩn cấp:",sent_message_to_parent_of:"Đã gửi tin nhắn đến phụ huynh của",confirm_complete_trip:"Xác nhận kết thúc chuyến đi?",load_schedules_failed:"Không thể tải danh sách lịch trình",no_students_assigned_trip:"Chuyến đi này chưa có học sinh nào được phân công.",load_trip_failed:"Không thể tải dữ liệu chuyến đi",load_trip_failed_retry:"Không thể tải dữ liệu chuyến đi! Vui lòng thử lại.",updated_status_to:"Đã cập nhật trạng thái thành",data_load_failed_generic:"Không thể tải dữ liệu. Vui lòng kiểm tra kết nối hoặc đăng nhập lại.",update_status_success:"Cập nhật trạng thái học sinh thành công!",update_status_failed:"Có lỗi xảy ra khi cập nhật trạng thái!",emergency_sent_success:"Cảnh báo khẩn cấp đã được gửi!",emergency_send_failed:"Có lỗi xảy ra khi gửi cảnh báo!",emergency_modal_title:"Cảnh báo khẩn cấp",emergency_modal_desc:"Chọn loại tình huống và mô tả thêm (nếu cần). Thông báo sẽ gửi tới Admin và Phụ huynh liên quan với mức ưu tiên cao nhất.",emergency_type_accident:"Tai nạn giao thông",emergency_type_medical:"Cấp cứu y tế",emergency_type_security:"Nguy cơ an ninh",emergency_type_breakdown:"Xe gặp sự cố",emergency_type_traffic:"Kẹt xe nghiêm trọng",emergency_type_weather:"Thời tiết nguy hiểm",emergency_type_other:"Khác",emergency_message_placeholder:"Mô tả chi tiết quan trọng (tuỳ chọn)...",send_now:"Gửi ngay",send_to_admins:"Gửi tới Admin",send_to_parents:"Gửi tới Phụ huynh",location_permission_required:"Cần vị trí hiện tại. Vui lòng bật dịch vụ định vị để gửi cảnh báo.",emergency_history:"Lịch sử cảnh báo",emergency_history_desc:"Các cảnh báo khẩn cấp bạn đã gửi.",no_emergency_history:"Chưa có cảnh báo nào.",load_emergency_history_failed:"Tải lịch sử cảnh báo thất bại",location_updated:"Vị trí đã được cập nhật!",location_update_failed:"Có lỗi xảy ra khi cập nhật vị trí!",cannot_get_current_location:"Không thể lấy vị trí hiện tại!",load_students_failed:"Không thể tải danh sách học sinh!",start_trip_success:"Đã bắt đầu chuyến đi!",start_trip_failed:"Không thể bắt đầu chuyến đi!",complete_trip_success:"Đã hoàn thành chuyến đi!",complete_trip_failed:"Không thể hoàn thành chuyến đi!",no_schedules_assigned_short:"Chưa có lịch trình nào được gán.",no_schedules_contact_admin:"Chưa có lịch trình nào. Vui lòng liên hệ quản trị viên để được phân công.",no_schedules_next_30_days:"Chưa có lịch trình nào được gán trong 30 ngày tới.",parent_dashboard:"Bảng Phụ Huynh",track_child:"Theo dõi con",child_tracking:"Theo dõi con",bus_location:"Vị trí xe buýt",estimated_arrival:"Thời gian đến dự kiến",distance:"Khoảng cách",safety_zone:"Vùng an toàn",report_absence:"Báo vắng",minutes:"phút",meters_250:"250 m",meters_500:"500 m",km_1:"1 km",safety_zone_help:"Hệ thống sẽ cảnh báo khi xe vào/ra khỏi vùng này",loading_data:"Đang tải dữ liệu...",no_child_info_title:"Chưa có thông tin con",no_child_info_desc:"Vui lòng liên hệ nhà trường để đăng ký xe buýt cho con",view_bus_location_for_child:"Xem vị trí xe buýt đưa đón con",select_child_to_track:"Chọn con để theo dõi:",grade_prefix:"Khối",no_active_trip_title:"Không có chuyến đi hoạt động",no_active_trip_desc:"Xe buýt chưa bắt đầu chuyến đi hôm nay",pickup_point:"Điểm đón",route_label:"Tuyến",unknown:"Chưa xác định",trip_info_title:"Thông tin chuyến đi",bus_label:"Xe buýt",no_active_trip_now:"Không có chuyến đi nào đang hoạt động",hello:"Xin chào",track_children_today:"Theo dõi chuyến đi của các con hôm nay",total_children:"Tổng số con",your_children:"Các con của bạn",no_student_info_title:"Chưa có thông tin học sinh",please_contact_school:"Vui lòng liên hệ nhà trường để đăng ký",driver_colon:"Tài xế:",boarded_at:"Lên xe lúc:",track:"Theo dõi",history:"Lịch sử",notifications_title:"Thông báo",loading_notifications:"Đang tải thông báo...",all_notifications_read:"Tất cả thông báo đã đọc",from_label:"Từ",high_priority:"Ưu tiên cao",admin_panel:"Bảng Quản Trị",admin_subtitle:"Quản lý xe buýt và lịch trình",manage_buses:"Quản lý xe buýt",manage_drivers:"Quản lý tài xế",manage_routes:"Quản lý tuyến đường",manage_schedules:"Quản lý lịch trình",manage_students:"Quản lý học sinh",manage_parents:"Quản lý phụ huynh",add_bus:"Thêm xe buýt",add_driver:"Thêm tài xế",add_route:"Thêm tuyến",add_schedule:"Thêm lịch",add_student:"Thêm học sinh",add_parent:"Thêm phụ huynh",total_buses:"Tổng số xe",total_drivers:"Tổng số tài xế",total_students:"Tổng số học sinh",total_parents:"Tổng số phụ huynh",active_trips:"Chuyến đang hoạt động",active_buses:"Xe đang hoạt động",active_drivers:"Tài xế đang hoạt động",drivers_with_bus:"Đã có xe",total_registered:"Tổng đã đăng ký",currently_running:"Đang chạy",today_label:"Hôm nay",welcome_back:"Chào mừng trở lại! 👋",dashboard_subtitle:"Tình hình xe buýt trường học hôm nay.",vs_last_month:"so với tháng trước",bus_activity:"Hoạt động xe buýt",this_week:"Tuần này",recent_activity:"Hoạt động gần đây",bus_started_route:"Xe #001 bắt đầu tuyến",driver_checked_in:"Tài xế John đã điểm danh",route_completed:"Tuyến B đã hoàn thành",students_picked_up:"Đã đón 25 học sinh",traffic_delay:"Kẹt xe ở tuyến A",reset_password:"Đặt lại mật khẩu",set_new_password:"Đặt mật khẩu mới",enter_new_password:"Nhập mật khẩu mới",confirm_password:"Xác nhận mật khẩu",passwords_do_not_match:"Mật khẩu không khớp",invalid_or_expired_link:"Liên kết đặt lại không hợp lệ hoặc đã hết hạn",password_updated_success:"Cập nhật mật khẩu thành công. Vui lòng đăng nhập.",back_to_login:"Quay về đăng nhập",public_change_password_title:"Đổi mật khẩu",public_change_password_desc:"Nhập Email + mật khẩu hiện tại + mật khẩu mới để đổi.",current_password_label:"Mật khẩu hiện tại",new_password_label:"Mật khẩu mới",confirm_new_password_label:"Xác nhận mật khẩu mới",password_change_success:"Đổi mật khẩu thành công. Vui lòng đăng nhập lại.",current_password_incorrect:"Mật khẩu hiện tại không đúng",user_not_found:"Email không tồn tại",enter_current_password:"Nhập mật khẩu hiện tại",login_welcome_title:"Chào mừng trở lại!",login_welcome_subtitle:"Đăng nhập để tiếp tục",remember_me:"Ghi nhớ đăng nhập",change_password:"Đổi mật khẩu",forgot_password:"Quên mật khẩu?",sign_in:"Đăng nhập",provisioned_info:"Tài khoản sẽ được cấp bởi quản trị viên. Nếu bạn chưa có tài khoản hoặc quên mật khẩu, hãy liên hệ nhà trường hoặc dùng chức năng Quên mật khẩu.",feature_security:"Bảo mật",feature_fast:"Nhanh chóng",feature_easy:"Dễ dàng",email_placeholder:"example@email.com",password_enter_placeholder:"Nhập mật khẩu",invalid_credentials:"Sai email hoặc mật khẩu",login_failed:"Đăng nhập thất bại",forgot_password_title:"Quên mật khẩu",forgot_password_desc:"Nhập email tài khoản của bạn. Yêu cầu sẽ được gửi tới quản trị viên để đặt lại mật khẩu của bạn thành số điện thoại. Sau khi đăng nhập bằng mật khẩu đó, hệ thống sẽ yêu cầu bạn đổi mật khẩu mới.",send_request:"Gửi yêu cầu",forgot_request_sent:"Yêu cầu của bạn đã được gửi tới admin. Bạn sẽ nhận thông báo khi được xử lý.",try_again_later:"Có lỗi xảy ra, vui lòng thử lại sau.",register_title:"Tạo tài khoản mới",register_subtitle:"Đăng ký để theo dõi con bạn",name_placeholder:"Họ và tên",phone_placeholder:"Số điện thoại",confirm_password_placeholder:"Nhập lại mật khẩu",role_info_parent:"Bạn đang đăng ký với vai trò Phụ huynh",register_now:"Đăng ký ngay",or:"Hoặc",already_have_account:"Đã có tài khoản?",login_now:"Đăng nhập ngay",agree_terms:"Bằng việc đăng ký, bạn đồng ý với",terms_of_service:"Điều khoản dịch vụ",privacy_policy:"Chính sách bảo mật",register_success_redirect:"✅ Đăng ký thành công! Đang chuyển đến trang đăng nhập...",register_failed:"❌ Đăng ký thất bại. Vui lòng thử lại.",enter_full_name:"Vui lòng nhập họ và tên",please_enter_email:"Vui lòng nhập email",enter_password:"Vui lòng nhập mật khẩu",password_min6:"Mật khẩu phải có ít nhất 6 ký tự",confirm_password_mismatch:"Mật khẩu xác nhận không khớp",bus:"Xe",vehicle:"Xe",plate:"Biển số",license_plate:"Biển số xe",capacity:"Sức chứa",bus_status:"Trạng thái xe",select_bus:"Chọn xe",trip_info:"Thông tin chuyến",speed_label:"Tốc độ",students_on_bus:"Học sinh trên xe",status_label:"Trạng thái",late:"Trễ",running:"Đang chạy",navigate:"Dẫn đường",route_name:"Tên tuyến",start_time:"Giờ bắt đầu",end_time:"Giờ kết thúc",recent_alerts:"Cảnh báo gần đây",recent_messages:"Tin nhắn gần đây",unread:"Chưa đọc",mark_as_read:"Đánh dấu đã đọc",custom_message:"Tin nhắn tùy chỉnh",template_traffic:"Kẹt xe",template_late:"Trễ 10 phút",template_broken:"Xe bị hỏng",template_departed:"Đã rời bến",active:"Hoạt động",inactive:"Không hoạt động",pending:"Đang chờ",approved:"Đã duyệt",rejected:"Đã từ chối",all:"Tất cả",no_buses:"Không có xe buýt",no_data:"Không có dữ liệu",loading:"Đang tải...",error:"Lỗi",success:"Thành công",warning:"Cảnh báo",info:"Thông tin",seats:"chỗ",creating:"Đang tạo...",create_account:"Tạo tài khoản",and:"và",invalid_email:"Email không hợp lệ",please_enter_phone:"Vui lòng nhập số điện thoại",default_password_info:"Mật khẩu mặc định sẽ là số điện thoại này. Hệ thống sẽ yêu cầu đổi mật khẩu khi đăng nhập lần đầu.",confirm_delete_user:'Bạn có chắc muốn xóa người dùng "{email}"?',confirm_delete_bus:"Bạn có chắc muốn xóa xe này?",confirm_delete_driver:"Bạn có chắc muốn xóa tài xế này?",confirm_delete_student:"Bạn có chắc muốn xóa học sinh này?",selected:"đã chọn",manage_users:"Quản lý người dùng",manage_students:"Quản lý học sinh",manage_drivers:"Quản lý tài xế",manage_buses:"Quản lý xe buýt",manage_routes:"Quản lý tuyến đường",manage_schedules:"Quản lý lịch trình",manage_notifications:"Quản lý thông báo",session_manager:"Quản lý phiên đăng nhập",total_count:"Tổng số",actions:"Thao tác",refresh:"Làm mới",loading_list:"Đang tải danh sách...",not_found:"Không tìm thấy kết quả phù hợp",none_yet:"Chưa có dữ liệu",id:"ID",stops:"Điểm dừng",users_page_title:"Quản lý người dùng",users_total_label:"Tổng số người dùng",add_user:"Thêm người dùng",search_email_placeholder:"Tìm kiếm theo email...",all_roles:"Tất cả vai trò",delete_user:"Xóa",no_users_found:"Không tìm thấy người dùng phù hợp",no_users_system:"Chưa có người dùng nào trong hệ thống",access_denied_title:"Không có quyền truy cập",access_denied_desc:"Bạn cần đăng nhập với quyền Admin để xem trang này.",students_page_title:"Quản lý học sinh",students_total_label:"Tổng số học sinh",add_student_button:"Thêm học sinh",search_students_placeholder:"Tìm theo tên, lớp, khối...",student_name:"Tên học sinh",grade_level:"Khối",class_name:"Lớp",parent_label:"Phụ huynh",pickup_stop:"Điểm đón",no_students_found:"Không tìm thấy học sinh nào",no_students_yet:"Chưa có học sinh nào",edit_item:"Sửa",delete_item:"Xóa",add_new_student:"Thêm học sinh mới",edit_student:"Chỉnh sửa học sinh",choose_parent:"Chọn phụ huynh",choose_route_optional:"Chọn tuyến (tùy chọn)",choose_stop:"Chọn điểm đón",choose_bus_optional:"Chọn xe buýt (tùy chọn)",home_address:"Địa chỉ nhà",cancel_button:"Hủy",create_button:"Tạo",update_button:"Cập nhật",drivers_page_title:"Quản lý tài xế",drivers_total_label:"Tổng số tài xế",add_driver_button:"Thêm tài xế",driver_label:"Tài xế",contact:"Liên hệ",assigned_bus:"Xe được giao",driver_status:"Trạng thái",edit_driver:"Sửa",delete_driver:"Xóa",no_drivers_yet:"Chưa có tài xế",no_bus:"Chưa có xe",buses_page_title:"Quản lý xe buýt",buses_total_label:"Tổng số xe buýt",add_bus_button:"Thêm xe buýt",routes_page_title:"Quản lý tuyến đường",routes_total_label:"Tổng số tuyến",schedule_page_title:"Quản lý lịch trình",schedule_total_label:"Tổng số lịch",notifications_page_title:"Thông báo",notifications_total_label:"Tổng số thông báo",password_resets_page_title:"Yêu cầu đặt lại mật khẩu",password_resets_total_label:"Tổng số yêu cầu",session_manage_title:"Quản lý phiên đăng nhập",current_account_info:"Thông tin tài khoản hiện tại",user_id:"ID người dùng",not_logged_in_title:"Chưa đăng nhập",please_login_desc:"Vui lòng đăng nhập để tiếp tục",go_to_login:"Đi đến trang đăng nhập",no_matching_parents:"Không tìm thấy phụ huynh phù hợp",found_parents_count_prefix:"Tìm thấy",found_parents_count_suffix:"phụ huynh",bus_tracking_hint:"Chọn xe buýt để học sinh được tracking realtime",auto_refresh_20s:"Tự động làm mới (20s)",no_requests:"Không có yêu cầu",approve:"Duyệt",reject:"Từ chối",reject_reason_optional:"Lý do từ chối (tuỳ chọn):",approve_failed:"Phê duyệt thất bại",reject_failed:"Từ chối thất bại",session_expired_or_forbidden_admin:"Hết phiên đăng nhập hoặc không có quyền. Vui lòng đăng nhập lại bằng tài khoản admin.",load_list_failed_try_again:"Tải danh sách thất bại. Vui lòng thử lại.",tracking_buses_title:"Theo dõi xe buýt",buses_running:"xe đang chạy",update:"Cập nhật",every_10s:"10s/lần",bus_status_sidebar:"Trạng thái xe",no_buses_running:"Không có xe nào đang chạy",kmh:"km/h",send_notifications:"Gửi Thông Báo",permission_warning_title:"Bạn không có quyền gửi thông báo",current_role:"Role hiện tại",only_admin_driver_can_send:"Chỉ admin hoặc driver mới có thể gửi thông báo.",logout_and_login:"Đăng xuất và đăng nhập lại",send_to:"Gửi đến",parents_label:"Phụ huynh",drivers_label:"Tài xế",all_label:"Tất cả",send_mode:"Chế độ gửi",send_to_all:"Gửi cho tất cả",choose_recipients:"Chọn người nhận",select_recipients:"Chọn người nhận",select_all:"Chọn tất cả",clear_selection:"Bỏ chọn",loading_users_list:"Đang tải danh sách...",no_users:"Không có người dùng nào",notification_type:"Loại thông báo",priority_level:"Mức độ ưu tiên",title_label:"Tiêu đề",title_placeholder:"Nhập tiêu đề thông báo",body_label:"Nội dung",body_placeholder:"Nhập nội dung thông báo",sending:"Đang gửi...",no_permission_short:"Không có quyền",send_notification:"Gửi thông báo",notifications_history:"Lịch sử thông báo",unread_count_label:"Chưa đọc",mark_all_read:"Đánh dấu tất cả đã đọc",delete_read:"Xóa đã đọc",refresh_button:"Làm mới",auto_refresh_20s_label:"Tự động làm mới (20s)",no_notifications:"Chưa có thông báo nào",inbox_title:"Hộp thư đến",quick_messages_title:"Tin nhắn nhanh",quick_messages_hint:"Chọn tin nhắn mẫu để gửi nhanh cho phụ huynh",send_to_parents_today_title:"Gửi đến phụ huynh trên chuyến đi hôm nay",send_to_parents_today_desc:"Thông báo sẽ được gửi đến tất cả phụ huynh có con đang chờ hoặc đang trên xe của bạn hôm nay.",no_recipients_found_today:"Không tìm thấy phụ huynh nào trên chuyến đi hôm nay",failed_to_send_notification:"Lỗi gửi thông báo",important:"Quan trọng",new_label:"Mới",sent_to:"Gửi đến",view_details:"Xem chi tiết",delete_label:"Xóa",notification_detail_title:"Chi tiết thông báo",read_label:"Đã đọc",unread_label:"Chưa đọc",sender:"Người gửi",mark_unread:"Đánh dấu chưa đọc",mark_read:"Đánh dấu đã đọc",copy:"Sao chép",copy_failed:"Sao chép thất bại",copied_notification_content:"Đã sao chép nội dung thông báo",no_data_label:"Không có dữ liệu",confirm_delete_notification:"Bạn có chắc muốn xóa thông báo này?",delete_notification_failed:"Xóa thông báo thất bại",mark_all_read_failed:"Đánh dấu đã đọc thất bại",cleanup_read_confirm:"Xóa tất cả thông báo đã đọc?",cleanup_read_failed:"Xóa thông báo đã đọc thất bại",mark_unread_failed:"Đánh dấu chưa đọc thất bại",please_fill_title_body:"Vui lòng nhập đầy đủ tiêu đề và nội dung",please_select_at_least_one:"Vui lòng chọn ít nhất một người nhận",sent_notification_to:"Đã gửi thông báo đến",all_lower:"tất cả",parent_lower:"phụ huynh",driver_lower:"tài xế",user_lower:"người dùng",low:"Thấp",medium:"Trung bình",high:"Cao",critical:"Khẩn cấp",qm_depart_on_time_title:"Xuất phát đúng giờ",qm_depart_on_time_body:"Xe buýt đã xuất phát đúng lịch trình. Phụ huynh vui lòng đưa con ra điểm đón.",qm_delay_10_title:"Trễ 10 phút",qm_delay_10_body:"Xe buýt sẽ đến trễ khoảng 10 phút do tình trạng giao thông. Xin lỗi vì sự bất tiện này.",qm_all_picked_title:"Đã đón tất cả học sinh",qm_all_picked_body:"Tất cả học sinh đã lên xe an toàn. Xe đang trên đường đến trường.",qm_route_change_title:"Thay đổi tuyến đường",qm_route_change_body:"Do tình trạng giao thông, xe sẽ đi tuyến đường khác. Thời gian đến có thể thay đổi.",schedule_subtitle:"Tạo và phân công lịch trình xe buýt (Tuần/Tháng)",auto_refresh_15s_label:"Tự động làm mới (15s)",no_schedules_yet:"Chưa có lịch trình nào",assign_bus:"Phân công xe",not_assigned:"Chưa phân công",create_new_schedule_title:"Tạo lịch trình mới",schedule_create_subtitle:"Tạo lịch một lần hoặc định kỳ hàng tuần/tháng",schedule_type:"Loại lịch trình",once_label:"📅 Một lần",once_desc:"Chuyến đi đơn lẻ",daily_label:"📆 Hàng ngày",daily_desc:"Lặp lại mỗi ngày",weekly_label:"📊 Hàng tuần",weekly_desc:"Lặp lại mỗi tuần",monthly_label:"📋 Hàng tháng",monthly_desc:"Lặp lại mỗi tháng",choose_route:"Chọn tuyến đường",bus_assign_later:"Xe buýt (có thể phân công sau)",no_driver:"Chưa có tài xế",from_date:"Từ ngày",to_date:"Đến ngày",departure_time:"Giờ khởi hành",schedule_created_success:"Đã tạo lịch trình thành công!",recurring_schedule_created_success:"Đã tạo lịch trình định kỳ thành công!",confirm_delete_schedule:"Bạn có chắc muốn xóa lịch trình này?",error_deleting_schedule:"Lỗi khi xóa lịch trình",error_assigning_bus:"Lỗi khi phân công xe",cancelled:"Đã hủy",proceed_create_schedule_question:"Bạn có muốn tiếp tục tạo lịch trình này không?",hint_assign_driver_first:"Gợi ý: Vào trang Tài xế để gán xe buýt cho tài xế trước khi tạo lịch trình.",manage_stops:"Quản lý điểm đón",no_route_selected:"Chưa chọn tuyến đường",add_new_stop:"Thêm điểm đón mới",stop_name:"Tên điểm đón",latitude:"Vĩ độ",longitude:"Kinh độ",is_pickup_stop:"Là điểm đón (pickup)",add_stop:"Thêm điểm đón",add_stop_failed:"Thêm điểm đón thất bại",stops_list:"Danh sách điểm đón",no_stops_yet_for_route:"Chưa có điểm đón nào cho tuyến này",order:"Thứ tự",type:"Loại",up:"Lên",down:"Xuống",pickup:"Điểm đón",dropoff:"Điểm trả",confirm_delete_stop:"Xóa điểm này?",delete_failed:"Xóa thất bại",enter_valid_stop_fields:"Vui lòng nhập đầy đủ Tên, Lat, Lng",move_up_failed:"Di chuyển lên thất bại",move_down_failed:"Di chuyển xuống thất bại",update_stop_failed:"Cập nhật điểm đón thất bại",confirm_logout:"Bạn có chắc muốn đăng xuất?"}};function u(e="vi",t){return Dc[e]&&Dc[e][t]||Dc.vi[t]||t}function $k(){return["vi","en"]}function yt({children:e,variant:t="primary",size:r="md",className:i="",loading:a=!1,disabled:l=!1,icon:d,...f}){const p="inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"},_={primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500 shadow-lg hover:shadow-xl",secondary:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-gray-500 shadow-sm",success:"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 focus:ring-green-500 shadow-lg hover:shadow-xl",danger:"bg-gradient-to-r from-red-500 to-pink-600 text-white hover:from-red-600 hover:to-pink-700 focus:ring-red-500 shadow-lg hover:shadow-xl",warning:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-600 hover:to-orange-600 focus:ring-yellow-500 shadow-lg hover:shadow-xl",ghost:"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 focus:ring-gray-500",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500 bg-transparent"},g=l||a;return n.jsxs("button",{className:`
        ${p} 
        ${x[r]} 
        ${_[t]} 
        ${i}
      `,disabled:g,...f,children:[a&&n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d&&!a&&n.jsx("span",{className:"mr-2",children:d}),e]})}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uk=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,i)=>i?i.toUpperCase():r.toLowerCase()),Hp=e=>{const t=Uk(e);return t.charAt(0).toUpperCase()+t.slice(1)},J0=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim(),Hk=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:d,...f},p)=>k.createElement("svg",{ref:p,...Zk,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:J0("lucide",a),...!l&&!Hk(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,_])=>k.createElement(x,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(e,t)=>{const r=k.forwardRef(({className:i,...a},l)=>k.createElement(Vk,{ref:l,iconNode:t,className:J0(`lucide-${Fk(Hp(e))}`,`lucide-${e}`,i),...a}));return r.displayName=Hp(e),r};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],qk=fe("arrow-left",Wk);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Gk=fe("bell-off",Kk);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xn=fe("bell",Qk);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Jk=fe("bookmark",Xk);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],at=fe("bus",Yk);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xo=fe("calendar",e1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],r1=fe("chevron-down",t1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ar=fe("circle-alert",n1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vt=fe("circle-check-big",s1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],a1=fe("circle-user-round",i1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Jo=fe("circle-x",o1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xe=fe("clock",l1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sh=fe("copy",c1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],u1=fe("crosshair",d1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ih=fe("eye",h1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yo=fe("house",f1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ea=fe("info",p1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],g1=fe("languages",m1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],y1=fe("layers",x1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ah=fe("log-out",_1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Lt=fe("map-pin",v1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],w1=fe("map",b1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],j1=fe("menu",k1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Zd=fe("message-square",N1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M5 12h14",key:"1ays0h"}]],C1=fe("minus",S1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],T1=fe("moon",E1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Vd=fe("navigation",P1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],M1=fe("pause",L1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],A1=fe("pencil",O1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],z1=fe("phone",R1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],D1=fe("play",B1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oh=fe("plus",I1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Wd=fe("route",$1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],U1=fe("save",F1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ic=fe("search",H1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Yo=fe("send",Z1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Zp=fe("shield",V1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],q1=fe("sun",W1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],G1=fe("target",K1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],la=fe("trash-2",Q1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],J1=fe("triangle-alert",X1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ej=fe("user-check",Y1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rj=fe("user-plus",tj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jr=fe("user",nj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],ij=fe("users-round",sj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yn=fe("users",aj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lh=fe("x",oj),Y0=k.createContext();function lj({children:e}){const{lang:t,setLang:r}=ke(d=>({lang:d.lang,setLang:d.setLang})),i=$k(),a=()=>{const d=Math.max(0,i.indexOf(t)),f=i[(d+1)%i.length];r(f)},l=d=>{i.includes(d)&&r(d)};return n.jsx(Y0.Provider,{value:{language:t,languages:i,toggleLanguage:a,changeLanguage:l},children:e})}function Us(){const e=k.useContext(Y0);if(!e)throw new Error("useLanguage must be used within LanguageProvider");return e}const Vp={vi:{name:"Tiếng Việt",flag:"🇻🇳"},en:{name:"English",flag:"🇬🇧"},fr:{name:"Français",flag:"🇫🇷"},es:{name:"Español",flag:"🇪🇸"},de:{name:"Deutsch",flag:"🇩🇪"},ja:{name:"日本語",flag:"🇯🇵"},ko:{name:"한국어",flag:"🇰🇷"},zh:{name:"中文",flag:"🇨🇳"},th:{name:"ไทย",flag:"🇹🇭"}};function qn({className:e="",variant:t="chip"}){const{language:r,languages:i=["vi","en"],changeLanguage:a,toggleLanguage:l}=Us(),[d,f]=k.useState(!1),p=k.useRef(null);k.useEffect(()=>{const g=v=>{p.current&&(p.current.contains(v.target)||f(!1))};return document.addEventListener("click",g),()=>document.removeEventListener("click",g)},[]);const x=Vp[r]||{name:r.toUpperCase(),flag:"🌐"},_=t==="action";return n.jsxs("div",{className:`relative ${e}`,ref:p,children:[n.jsxs("button",{onClick:()=>f(!d),onDoubleClick:l,className:_?"w-full flex items-center px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 hover:bg-white/60 dark:hover:bg-gray-700/60 rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md group":"flex items-center gap-2 px-3 py-2 rounded-lg bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 hover:shadow-md transition-all duration-200",title:"Change language","aria-haspopup":"listbox","aria-expanded":d,children:[n.jsx("div",{className:_?"p-2 rounded-lg bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 mr-3 group-hover:scale-110 transition-transform duration-200":"",children:n.jsx(g1,{className:_?"h-5 w-5 text-indigo-600":"w-5 h-5 text-purple-600 dark:text-purple-400"})}),n.jsx("span",{className:_?"flex-1 text-left":"text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-1",children:_?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{children:x.flag})," ",x.name]}):n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{children:x.flag})," ",x.name]})}),n.jsx(r1,{className:`w-4 h-4 text-gray-600 dark:text-gray-300 transition-transform ${d?"rotate-180":""}`})]}),d&&n.jsx("ul",{role:"listbox",className:`absolute ${_?"left-0 right-0":"right-0"} mt-2 ${_?"w-full":"w-44"} rounded-lg overflow-hidden bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl z-50`,children:i.map(g=>{const v=Vp[g]||{name:g.toUpperCase(),flag:"🌐"},w=g===r;return n.jsxs("li",{role:"option","aria-selected":w,onClick:()=>{a(g),f(!1)},className:`px-3 py-2 cursor-pointer flex items-center gap-2 text-sm ${w?"bg-purple-50 dark:bg-purple-900/30 font-semibold":"hover:bg-gray-50 dark:hover:bg-gray-700/60"}`,children:[n.jsx("span",{children:v.flag}),n.jsx("span",{className:"text-gray-800 dark:text-gray-100",children:v.name})]},g)})})]})}function ex({type:e="info",message:t,onClose:r,className:i=""}){if(!t)return null;const a={info:"bg-blue-50 text-blue-800 border-blue-200 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-800",success:"bg-green-50 text-green-800 border-green-200 dark:bg-green-900/50 dark:text-green-200 dark:border-green-800",warning:"bg-yellow-50 text-yellow-800 border-yellow-200 dark:bg-yellow-900/50 dark:text-yellow-200 dark:border-yellow-800",error:"bg-red-50 text-red-800 border-red-200 dark:bg-red-900/50 dark:text-red-200 dark:border-red-800"};return n.jsx("div",{className:`p-4 rounded-lg border ${a[e]||a.info} ${i}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-medium",children:t}),r&&n.jsx("button",{onClick:r,className:"ml-3 inline-flex text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:n.jsx(lh,{className:"h-4 w-4"})})]})})}function cj(){const[e,t]=k.useState(""),[r,i]=k.useState(""),[a,l]=k.useState(null),[d,f]=k.useState(null),[p,x]=k.useState(null),{login:_}=Fs(),g=ct(),[v,w]=k.useState(!1),b=async E=>{E.preventDefault(),l(null),f(null),x(null);const S=e.trim();if(!/^\S+@\S+\.\S+$/.test(S)){f(u(C,"invalid_email"));return}try{console.log("Login attempt",{email:e,passwordLength:String(r).length});const y=await _({email:e,password:r});if(y.must_change_password){try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}console.log("Must change password first"),g("/change-password",{state:{message:y.message,email:y.email||e,isFirstLogin:!0}});return}console.log("Login success",y),y.role==="admin"?g("/admin"):y.role==="driver"?g("/driver"):g("/parent")}catch(y){console.error("Login error",y);const N=y&&y.error;N==="invalid_email"?f(u(C,"invalid_email")):N==="invalid_credentials"?x(u(C,"invalid_credentials")):l(u(C,"login_failed"))}},{lang:C}=ke();return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900 p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20 dark:border-gray-700",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full mb-4 shadow-lg animate-bounce",children:n.jsx("span",{className:"text-4xl",children:"🚌"})}),n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:u(C,"login_welcome_title")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:u(C,"login_welcome_subtitle")})]}),n.jsx("div",{className:"flex justify-end mb-6",children:n.jsx(qn,{})}),a&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 rounded-lg animate-shake",children:n.jsxs("p",{className:"text-red-800 dark:text-red-200 text-sm font-medium flex items-center gap-2",children:[n.jsx("span",{children:"⚠️"})," ",a]})}),n.jsxs("form",{onSubmit:b,className:"space-y-5",children:[n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2",children:[n.jsx("span",{children:"📧"})," ",u(C,"email")]}),n.jsx("input",{type:"email",className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-4 transition-all outline-none bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 ${d?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-blue-100"}`,value:e,onChange:E=>t(E.target.value),placeholder:u(C,"email_placeholder")}),d&&n.jsxs("p",{className:"text-red-600 dark:text-red-300 text-sm mt-2 flex items-center gap-1",children:[n.jsx("span",{children:"⚠️"})," ",d]})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2",children:[n.jsx("span",{children:"🔒"})," ",u(C,"password")]}),n.jsx("input",{type:"password",className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-4 transition-all outline-none bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 ${p?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-blue-100"}`,value:r,onChange:E=>i(E.target.value),placeholder:u(C,"password_enter_placeholder")}),p&&n.jsxs("p",{className:"text-red-600 dark:text-red-300 text-sm mt-2 flex items-center gap-1",children:[n.jsx("span",{children:"⚠️"})," ",p]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-gray-200",children:u(C,"remember_me")})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_t,{to:"/change-password-public",className:"text-purple-600 hover:text-purple-700 hover:underline font-medium",children:u(C,"change_password")}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx(_t,{to:"/forgot-password",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:u(C,"forgot_password")})]})]}),n.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98]",children:[u(C,"sign_in")," 🚀"]}),n.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:u(C,"provisioned_info")})]})]}),n.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-3 shadow",children:[n.jsx("span",{className:"text-2xl block mb-1",children:"🔒"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:u(C,"feature_security")})]}),n.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-3 shadow",children:[n.jsx("span",{className:"text-2xl block mb-1",children:"⚡"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:u(C,"feature_fast")})]}),n.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-3 shadow",children:[n.jsx("span",{className:"text-2xl block mb-1",children:"📱"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:u(C,"feature_easy")})]})]})]})})}function dj(){const[e,t]=k.useState(""),[r,i]=k.useState(null),[a,l]=k.useState(!1),{lang:d}=ke();async function f(p){if(p.preventDefault(),i(null),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).trim())){i({type:"error",message:u(d,"invalid_email")});return}try{l(!0),await Bk({email:e.trim()}),i({type:"success",message:u(d,"forgot_request_sent")}),t("")}catch(x){console.error("forgot password error",x),i({type:"error",message:u(d,"try_again_later")})}finally{l(!1)}}return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900 p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20 dark:border-gray-700",children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx(qn,{})}),n.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:u(d,"forgot_password_title")}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:u(d,"forgot_password_desc")}),r&&n.jsx("div",{className:`mb-4 p-3 rounded ${r.type==="error"?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-200"}`,children:r.message}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(d,"email")}),n.jsx("input",{value:e,onChange:p=>t(p.target.value),type:"email",className:"w-full px-3 py-2 border rounded bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",placeholder:u(d,"email_placeholder")})]}),n.jsx("button",{disabled:a,type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 rounded",children:a?u(d,"processing"):u(d,"send_request")}),n.jsx("div",{className:"text-center mt-3",children:n.jsx(_t,{to:"/login",className:"text-blue-600 hover:underline",children:u(d,"back_to_login")})})]})]})})})}function uj(){const{lang:e}=ke(),t=ct(),[r]=nk(),i=k.useMemo(()=>r.get("token")||"",[r]),[a,l]=k.useState(""),[d,f]=k.useState(""),[p,x]=k.useState(null),[_,g]=k.useState(!1),[v,w]=k.useState(!!i);k.useEffect(()=>{i||w(!1)},[i]);async function b(C){if(C.preventDefault(),x(null),!i){x({type:"error",message:u(e,"invalid_or_expired_link")});return}if(a.length<8){x({type:"error",message:e==="vi"?"Mật khẩu tối thiểu 8 ký tự":"Minimum 8 characters"});return}if(a!==d){x({type:"error",message:u(e,"passwords_do_not_match")});return}try{g(!0),await Ik({token:i,new_password:a}),x({type:"success",message:u(e,"password_updated_success")}),setTimeout(()=>t("/login",{replace:!0}),1200)}catch(E){console.error("reset password error",E);const S=E==null?void 0:E.error;x(S==="invalid_token"||S==="token_used"||S==="token_expired"?{type:"error",message:u(e,"invalid_or_expired_link")}:S==="password_too_weak"?{type:"error",message:e==="vi"?"Mật khẩu tối thiểu 8 ký tự":"Minimum 8 characters"}:{type:"error",message:e==="vi"?"Có lỗi xảy ra, vui lòng thử lại sau.":"Something went wrong. Please try again."})}finally{g(!1)}}return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900 p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20 dark:border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:u(e,"reset_password")}),!v&&n.jsx("div",{className:"mb-4 p-3 rounded bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200",children:u(e,"invalid_or_expired_link")}),p&&n.jsx("div",{className:`mb-4 p-3 rounded ${p.type==="error"?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-200"}`,children:p.message}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"enter_new_password")}),n.jsx("input",{type:"password",value:a,onChange:C=>l(C.target.value),className:"w-full px-3 py-2 border rounded bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",placeholder:"********"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"confirm_password")}),n.jsx("input",{type:"password",value:d,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border rounded bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",placeholder:"********"})]}),n.jsx("button",{disabled:!v||_,type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 rounded",children:_?u(e,"processing"):u(e,"set_new_password")}),n.jsx("div",{className:"text-center mt-3",children:n.jsx(_t,{to:"/login",className:"text-blue-600 hover:underline",children:u(e,"back_to_login")})})]})]})})})}function hj(){var S,y,N;const[e,t]=k.useState(""),[r,i]=k.useState(""),[a,l]=k.useState(""),[d,f]=k.useState(null),[p,x]=k.useState(!1),_=ct(),g=dr(),v=((S=g.state)==null?void 0:S.isFirstLogin)||!1,w=((y=g.state)==null?void 0:y.message)||null,b=((N=g.state)==null?void 0:N.email)||null,C=(()=>{try{return!!(sessionStorage.getItem("token")||localStorage.getItem("token"))}catch{return!1}})();async function E(R){if(R.preventDefault(),f(null),!e||!r)return f({type:"error",message:"Vui lòng nhập đầy đủ"});if(r.length<6)return f({type:"error",message:"Mật khẩu mới phải có ít nhất 6 ký tự"});if(r!==a)return f({type:"error",message:"Xác nhận mật khẩu không khớp"});try{if(x(!0),v||C)await Dk({current_password:e,new_password:r});else{const M=(document.getElementById("cp-email-input")||{value:""}).value.trim();if(!/^\S+@\S+\.\S+$/.test(M)){f({type:"error",message:"Vui lòng nhập email hợp lệ"}),x(!1);return}await X0({email:M,current_password:e,new_password:r})}f({type:"success",message:"Đổi mật khẩu thành công. Vui lòng đăng nhập lại."});try{sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}setTimeout(()=>_("/login"),1200)}catch(M){console.error("change password error",M);const D=M&&M.error;f(D==="invalid_credentials"?{type:"error",message:"Mật khẩu hiện tại không đúng"}:D==="missing_token"||D==="invalid_token"?{type:"error",message:"Phiên đổi mật khẩu đã hết hạn. Vui lòng đăng nhập lại."}:{type:"error",message:"Đổi mật khẩu thất bại"})}finally{x(!1)}}return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full mb-4",children:n.jsx("span",{className:"text-2xl",children:"🔐"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:v?"Đổi mật khẩu bắt buộc":"Đổi mật khẩu"}),v&&b&&n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Xin chào ",n.jsx("strong",{children:b}),n.jsx("br",{}),"Bạn cần đổi mật khẩu để tiếp tục sử dụng hệ thống."]})]}),w&&n.jsx("div",{className:"mb-4 p-3 rounded bg-yellow-50 text-yellow-700 text-sm",children:w}),!v&&!C&&n.jsx("div",{className:"mb-4 p-3 rounded bg-blue-50 text-blue-700 text-sm",children:'Bạn có thể đổi mật khẩu bằng cách nhập Email + mật khẩu hiện tại + mật khẩu mới. Hoặc đăng nhập trước, hay dùng chức năng "Quên mật khẩu" để yêu cầu đặt lại.'}),d&&n.jsx("div",{className:`mb-4 p-3 rounded ${d.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:d.message}),n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!v&&!C&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email tài khoản"}),n.jsx("input",{id:"cp-email-input",type:"email",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"example@email.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:v?"Mật khẩu tạm thời (số điện thoại)":"Mật khẩu hiện tại"}),n.jsx("input",{value:e,onChange:R=>t(R.target.value),type:"password",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:v?"Nhập số điện thoại của bạn":"Nhập mật khẩu hiện tại"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mật khẩu mới"}),n.jsx("input",{value:r,onChange:R=>i(R.target.value),type:"password",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhập mật khẩu mới"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Xác nhận mật khẩu mới"}),n.jsx("input",{value:a,onChange:R=>l(R.target.value),type:"password",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhập lại mật khẩu mới"})]}),n.jsx("button",{disabled:p||!v&&!C,type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 hover:shadow-lg transition-all",children:p?"Đang xử lý...":"Đổi mật khẩu"})]})]})})})}const tx=k.createContext({addToast:()=>{}});function fj({children:e}){const[t,r]=k.useState([]),i=k.useCallback(d=>{r(f=>f.filter(p=>p.id!==d))},[]),a=k.useCallback(({type:d="info",title:f,message:p,duration:x=2500})=>{const _=Math.random().toString(36).slice(2),g={id:_,type:d,title:f,message:p};return r(v=>[g,...v]),x>0&&setTimeout(()=>i(_),x),_},[i]),l=k.useMemo(()=>({addToast:a}),[a]);return n.jsxs(tx.Provider,{value:l,children:[e,n.jsx("div",{className:"fixed z-[100] top-4 right-4 space-y-2 w-[90vw] max-w-sm",children:t.map(d=>n.jsx(pj,{toast:d,onClose:()=>i(d.id)},d.id))})]})}function rx(){return k.useContext(tx)}function pj({toast:e,onClose:t}){const{type:r,title:i,message:a}=e,l={info:"bg-blue-600 text-white",success:"bg-green-600 text-white",warning:"bg-yellow-600 text-white",error:"bg-red-600 text-white"};return n.jsx("div",{className:`shadow-lg rounded-xl ${l[r]||l.info} overflow-hidden`,children:n.jsxs("div",{className:"p-3 flex items-start gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[i&&n.jsx("div",{className:"font-semibold text-sm truncate",children:i}),a&&n.jsx("div",{className:"text-sm opacity-90 break-words",children:a})]}),n.jsx("button",{onClick:t,className:"ml-2 text-white/80 hover:text-white",children:"✕"})]})})}function mj(){const[e,t]=k.useState(""),[r,i]=k.useState(""),[a,l]=k.useState(""),[d,f]=k.useState(""),[p,x]=k.useState(!1),[_,g]=k.useState({}),v=ct(),{addToast:w}=rx(),{lang:b}=ke(),C=()=>{const S={};return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())||(S.email=u(b,"invalid_email")),r||(S.current=u(b,"enter_current_password")),a||(S.new=u(b,"enter_new_password")),a&&a.length<6&&(S.new=u(b,"password_min6")),a!==d&&(S.confirm=u(b,"passwords_do_not_match")),g(S),Object.keys(S).length===0},E=async S=>{if(S.preventDefault(),!!C())try{x(!0),await X0({email:e.trim(),current_password:r,new_password:a}),w({type:"success",title:u(b,"success"),message:u(b,"password_change_success")});try{sessionStorage.clear(),localStorage.clear()}catch{}setTimeout(()=>v("/login"),800)}catch(y){const N=y&&y.error;N==="invalid_credentials"?(g({current:u(b,"current_password_incorrect")}),w({type:"error",title:u(b,"error"),message:u(b,"current_password_incorrect")})):N==="user_not_found"?(g({email:u(b,"user_not_found")}),w({type:"error",title:u(b,"error"),message:u(b,"user_not_found")})):w({type:"error",title:u(b,"error"),message:u(b,"login_failed")})}finally{x(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900 p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20 dark:border-gray-700",children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx(qn,{})}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-full mb-4",children:n.jsx("span",{className:"text-2xl",children:"🔐"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:u(b,"public_change_password_title")}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:u(b,"public_change_password_desc")})]}),n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(b,"email")}),n.jsx("input",{type:"email",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100 ${_.email?"border-red-500":""}`,placeholder:u(b,"email_placeholder"),value:e,onChange:S=>t(S.target.value)}),_.email&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:_.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(b,"current_password_label")}),n.jsx("input",{type:"password",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100 ${_.current?"border-red-500":""}`,placeholder:u(b,"enter_current_password"),value:r,onChange:S=>i(S.target.value)}),_.current&&n.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:_.current})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(b,"new_password_label")}),n.jsx("input",{type:"password",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100 ${_.new?"border-red-500":""}`,placeholder:u(b,"password_min6"),value:a,onChange:S=>l(S.target.value)}),_.new&&n.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:_.new})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(b,"confirm_new_password_label")}),n.jsx("input",{type:"password",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100 ${_.confirm?"border-red-500":""}`,placeholder:u(b,"confirm_password_placeholder"),value:d,onChange:S=>f(S.target.value)}),_.confirm&&n.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:_.confirm})]}),n.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 hover:shadow-lg transition-all",children:p?u(b,"processing"):u(b,"change_password")}),n.jsx("button",{type:"button",onClick:()=>v("/login"),className:"w-full mt-2 text-indigo-600 hover:text-indigo-700 font-medium",children:u(b,"back_to_login")})]})]})})})}function nx(e,t){const r=k.useRef(t);k.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}const gj=1;function xj(e){return Object.freeze({__version:gj,map:e})}function yj(e,t){return Object.freeze({...e,...t})}const sx=k.createContext(null),ix=sx.Provider;function ax(){const e=k.useContext(sx);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function _j(e){function t(r,i){const{instance:a,context:l}=e(r).current;return k.useImperativeHandle(i,()=>a),r.children==null?null:pn.createElement(ix,{value:l},r.children)}return k.forwardRef(t)}function vj(e){function t(r,i){const[a,l]=k.useState(!1),{instance:d}=e(r,l).current;k.useImperativeHandle(i,()=>d),k.useEffect(function(){a&&d.update()},[d,a,r.children]);const f=d._contentNode;return f?L0.createPortal(r.children,f):null}return k.forwardRef(t)}function bj(e){function t(r,i){const{instance:a}=e(r).current;return k.useImperativeHandle(i,()=>a),null}return k.forwardRef(t)}function ox(e,t){const r=k.useRef();k.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function ch(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function wj(e,t){return function(i,a){const l=ax(),d=e(ch(i,l),l);return nx(l.map,i.attribution),ox(d.current,i.eventHandlers),t(d.current,l,i,a),d}}var qd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,i){i(t)})(S_,function(r){var i="1.9.4";function a(s){var o,c,h,m;for(c=1,h=arguments.length;c<h;c++){m=arguments[c];for(o in m)s[o]=m[o]}return s}var l=Object.create||function(){function s(){}return function(o){return s.prototype=o,new s}}();function d(s,o){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var h=c.call(arguments,2);return function(){return s.apply(o,h.length?h.concat(c.call(arguments)):arguments)}}var f=0;function p(s){return"_leaflet_id"in s||(s._leaflet_id=++f),s._leaflet_id}function x(s,o,c){var h,m,j,A;return A=function(){h=!1,m&&(j.apply(c,m),m=!1)},j=function(){h?m=arguments:(s.apply(c,arguments),setTimeout(A,o),h=!0)},j}function _(s,o,c){var h=o[1],m=o[0],j=h-m;return s===h&&c?s:((s-m)%j+j)%j+m}function g(){return!1}function v(s,o){if(o===!1)return s;var c=Math.pow(10,o===void 0?6:o);return Math.round(s*c)/c}function w(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return w(s).split(/\s+/)}function C(s,o){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?l(s.options):{});for(var c in o)s.options[c]=o[c];return s.options}function E(s,o,c){var h=[];for(var m in s)h.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(s[m]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function y(s,o){return s.replace(S,function(c,h){var m=o[h];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(o)),m})}var N=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function R(s,o){for(var c=0;c<s.length;c++)if(s[c]===o)return c;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var O=0;function P(s){var o=+new Date,c=Math.max(0,16-(o-O));return O=o+c,window.setTimeout(s,c)}var G=window.requestAnimationFrame||D("RequestAnimationFrame")||P,I=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ne(s,o,c){if(c&&G===P)s.call(o);else return G.call(window,d(s,o))}function ge(s){s&&I.call(window,s)}var z={__proto__:null,extend:a,create:l,bind:d,get lastId(){return f},stamp:p,throttle:x,wrapNum:_,falseFn:g,formatNum:v,trim:w,splitWords:b,setOptions:C,getParamString:E,template:y,isArray:N,indexOf:R,emptyImageUrl:M,requestFn:G,cancelFn:I,requestAnimFrame:ne,cancelAnimFrame:ge};function ee(){}ee.extend=function(s){var o=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,h=l(c);h.constructor=o,o.prototype=h;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return s.statics&&a(o,s.statics),s.includes&&(oe(s.includes),a.apply(null,[h].concat(s.includes))),a(h,s),delete h.statics,delete h.includes,h.options&&(h.options=c.options?l(c.options):{},a(h.options,s.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,A=h._initHooks.length;j<A;j++)h._initHooks[j].call(this)}},o},ee.include=function(s){var o=this.prototype.options;return a(this.prototype,s),s.options&&(this.prototype.options=o,this.mergeOptions(s.options)),this},ee.mergeOptions=function(s){return a(this.prototype.options,s),this},ee.addInitHook=function(s){var o=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function oe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=N(s)?s:[s];for(var o=0;o<s.length;o++)s[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ie={on:function(s,o,c){if(typeof s=="object")for(var h in s)this._on(h,s[h],o);else{s=b(s);for(var m=0,j=s.length;m<j;m++)this._on(s[m],o,c)}return this},off:function(s,o,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var h in s)this._off(h,s[h],o);else{s=b(s);for(var m=arguments.length===1,j=0,A=s.length;j<A;j++)m?this._off(s[j]):this._off(s[j],o,c)}return this},_on:function(s,o,c,h){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(s,o,c)===!1){c===this&&(c=void 0);var m={fn:o,ctx:c};h&&(m.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(m)}},_off:function(s,o,c){var h,m,j;if(this._events&&(h=this._events[s],!!h)){if(arguments.length===1){if(this._firingCount)for(m=0,j=h.length;m<j;m++)h[m].fn=g;delete this._events[s];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var A=this._listens(s,o,c);if(A!==!1){var B=h[A];this._firingCount&&(B.fn=g,this._events[s]=h=h.slice()),h.splice(A,1)}}},fire:function(s,o,c){if(!this.listens(s,c))return this;var h=a({},o,{type:s,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[s];if(m){this._firingCount=this._firingCount+1||1;for(var j=0,A=m.length;j<A;j++){var B=m[j],F=B.fn;B.once&&this.off(s,F,B.ctx),F.call(B.ctx||this,h)}this._firingCount--}}return c&&this._propagateEvent(h),this},listens:function(s,o,c,h){typeof s!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(h=!!o,m=void 0,c=void 0);var j=this._events&&this._events[s];if(j&&j.length&&this._listens(s,m,c)!==!1)return!0;if(h){for(var A in this._eventParents)if(this._eventParents[A].listens(s,o,c,h))return!0}return!1},_listens:function(s,o,c){if(!this._events)return!1;var h=this._events[s]||[];if(!o)return!!h.length;c===this&&(c=void 0);for(var m=0,j=h.length;m<j;m++)if(h[m].fn===o&&h[m].ctx===c)return m;return!1},once:function(s,o,c){if(typeof s=="object")for(var h in s)this._on(h,s[h],o,!0);else{s=b(s);for(var m=0,j=s.length;m<j;m++)this._on(s[m],o,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[p(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[p(s)],this},_propagateEvent:function(s){for(var o in this._eventParents)this._eventParents[o].fire(s.type,a({layer:s.target,propagatedFrom:s.target},s),!0)}};ie.addEventListener=ie.on,ie.removeEventListener=ie.clearAllEventListeners=ie.off,ie.addOneTimeEventListener=ie.once,ie.fireEvent=ie.fire,ie.hasEventListeners=ie.listens;var J=ee.extend(ie);function $(s,o,c){this.x=c?Math.round(s):s,this.y=c?Math.round(o):o}var te=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(s){return this.clone()._add(T(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(T(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new $(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new $(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(s){s=T(s);var o=s.x-this.x,c=s.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(s){return s=T(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=T(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function T(s,o,c){return s instanceof $?s:N(s)?new $(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new $(s.x,s.y):new $(s,o,c)}function V(s,o){if(s)for(var c=o?[s,o]:s,h=0,m=c.length;h<m;h++)this.extend(c[h])}V.prototype={extend:function(s){var o,c;if(!s)return this;if(s instanceof $||typeof s[0]=="number"||"x"in s)o=c=T(s);else if(s=q(s),o=s.min,c=s.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return T((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return T(this.min.x,this.max.y)},getTopRight:function(){return T(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var o,c;return typeof s[0]=="number"||s instanceof $?s=T(s):s=q(s),s instanceof V?(o=s.min,c=s.max):o=c=s,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=q(s);var o=this.min,c=this.max,h=s.min,m=s.max,j=m.x>=o.x&&h.x<=c.x,A=m.y>=o.y&&h.y<=c.y;return j&&A},overlaps:function(s){s=q(s);var o=this.min,c=this.max,h=s.min,m=s.max,j=m.x>o.x&&h.x<c.x,A=m.y>o.y&&h.y<c.y;return j&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var o=this.min,c=this.max,h=Math.abs(o.x-c.x)*s,m=Math.abs(o.y-c.y)*s;return q(T(o.x-h,o.y-m),T(c.x+h,c.y+m))},equals:function(s){return s?(s=q(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function q(s,o){return!s||s instanceof V?s:new V(s,o)}function de(s,o){if(s)for(var c=o?[s,o]:s,h=0,m=c.length;h<m;h++)this.extend(c[h])}de.prototype={extend:function(s){var o=this._southWest,c=this._northEast,h,m;if(s instanceof Y)h=s,m=s;else if(s instanceof de){if(h=s._southWest,m=s._northEast,!h||!m)return this}else return s?this.extend(re(s)||H(s)):this;return!o&&!c?(this._southWest=new Y(h.lat,h.lng),this._northEast=new Y(m.lat,m.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(s){var o=this._southWest,c=this._northEast,h=Math.abs(o.lat-c.lat)*s,m=Math.abs(o.lng-c.lng)*s;return new de(new Y(o.lat-h,o.lng-m),new Y(c.lat+h,c.lng+m))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Y||"lat"in s?s=re(s):s=H(s);var o=this._southWest,c=this._northEast,h,m;return s instanceof de?(h=s.getSouthWest(),m=s.getNorthEast()):h=m=s,h.lat>=o.lat&&m.lat<=c.lat&&h.lng>=o.lng&&m.lng<=c.lng},intersects:function(s){s=H(s);var o=this._southWest,c=this._northEast,h=s.getSouthWest(),m=s.getNorthEast(),j=m.lat>=o.lat&&h.lat<=c.lat,A=m.lng>=o.lng&&h.lng<=c.lng;return j&&A},overlaps:function(s){s=H(s);var o=this._southWest,c=this._northEast,h=s.getSouthWest(),m=s.getNorthEast(),j=m.lat>o.lat&&h.lat<c.lat,A=m.lng>o.lng&&h.lng<c.lng;return j&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,o){return s?(s=H(s),this._southWest.equals(s.getSouthWest(),o)&&this._northEast.equals(s.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function H(s,o){return s instanceof de?s:new de(s,o)}function Y(s,o,c){if(isNaN(s)||isNaN(o))throw new Error("Invalid LatLng object: ("+s+", "+o+")");this.lat=+s,this.lng=+o,c!==void 0&&(this.alt=+c)}Y.prototype={equals:function(s,o){if(!s)return!1;s=re(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(o===void 0?1e-9:o)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Pe.distance(this,re(s))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(s){var o=180*s/40075017,c=o/Math.cos(Math.PI/180*this.lat);return H([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function re(s,o,c){return s instanceof Y?s:N(s)&&typeof s[0]!="object"?s.length===3?new Y(s[0],s[1],s[2]):s.length===2?new Y(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Y(s.lat,"lng"in s?s.lng:s.lon,s.alt):o===void 0?null:new Y(s,o,c)}var ue={latLngToPoint:function(s,o){var c=this.projection.project(s),h=this.scale(o);return this.transformation._transform(c,h)},pointToLatLng:function(s,o){var c=this.scale(o),h=this.transformation.untransform(s,c);return this.projection.unproject(h)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(s),h=this.transformation.transform(o.min,c),m=this.transformation.transform(o.max,c);return new V(h,m)},infinite:!1,wrapLatLng:function(s){var o=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,h=s.alt;return new Y(c,o,h)},wrapLatLngBounds:function(s){var o=s.getCenter(),c=this.wrapLatLng(o),h=o.lat-c.lat,m=o.lng-c.lng;if(h===0&&m===0)return s;var j=s.getSouthWest(),A=s.getNorthEast(),B=new Y(j.lat-h,j.lng-m),F=new Y(A.lat-h,A.lng-m);return new de(B,F)}},Pe=a({},ue,{wrapLng:[-180,180],R:6371e3,distance:function(s,o){var c=Math.PI/180,h=s.lat*c,m=o.lat*c,j=Math.sin((o.lat-s.lat)*c/2),A=Math.sin((o.lng-s.lng)*c/2),B=j*j+Math.cos(h)*Math.cos(m)*A*A,F=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*F}}),Xt=6378137,Z={R:Xt,MAX_LATITUDE:85.0511287798,project:function(s){var o=Math.PI/180,c=this.MAX_LATITUDE,h=Math.max(Math.min(c,s.lat),-c),m=Math.sin(h*o);return new $(this.R*s.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(s){var o=180/Math.PI;return new Y((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*o,s.x*o/this.R)},bounds:function(){var s=Xt*Math.PI;return new V([-s,-s],[s,s])}()};function K(s,o,c,h){if(N(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=o,this._c=c,this._d=h}K.prototype={transform:function(s,o){return this._transform(s.clone(),o)},_transform:function(s,o){return o=o||1,s.x=o*(this._a*s.x+this._b),s.y=o*(this._c*s.y+this._d),s},untransform:function(s,o){return o=o||1,new $((s.x/o-this._b)/this._a,(s.y/o-this._d)/this._c)}};function je(s,o,c,h){return new K(s,o,c,h)}var Ne=a({},Pe,{code:"EPSG:3857",projection:Z,transformation:function(){var s=.5/(Math.PI*Z.R);return je(s,.5,-s,.5)}()}),Ee=a({},Ne,{code:"EPSG:900913"});function Ae(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function mt(s,o){var c="",h,m,j,A,B,F;for(h=0,j=s.length;h<j;h++){for(B=s[h],m=0,A=B.length;m<A;m++)F=B[m],c+=(m?"L":"M")+F.x+" "+F.y;c+=o?ce.svg?"z":"x":""}return c||"M0 0"}var jt=document.documentElement.style,Wr="ActiveXObject"in window,Al=Wr&&!document.addEventListener,pa="msLaunchUri"in navigator&&!("documentMode"in document),Gs=hr("webkit"),ma=hr("android"),ga=hr("android 2")||hr("android 3"),Q=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Se=ma&&hr("Google")&&Q<537&&!("AudioNode"in window),qe=!!window.opera,Cr=!pa&&hr("chrome"),Jt=hr("gecko")&&!Gs&&!qe&&!Wr,Rl=!Cr&&hr("safari"),xa=hr("phantom"),bh="OTransition"in jt,oy=navigator.platform.indexOf("Win")===0,wh=Wr&&"transition"in jt,zl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ga,kh="MozPerspective"in jt,ly=!window.L_DISABLE_3D&&(wh||zl||kh)&&!bh&&!xa,Qs=typeof orientation<"u"||hr("mobile"),cy=Qs&&Gs,dy=Qs&&zl,jh=!window.PointerEvent&&window.MSPointerEvent,Nh=!!(window.PointerEvent||jh),Sh="ontouchstart"in window||!!window.TouchEvent,uy=!window.L_NO_TOUCH&&(Sh||Nh),hy=Qs&&qe,fy=Qs&&Jt,py=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,my=function(){var s=!1;try{var o=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,o),window.removeEventListener("testPassiveEventSupport",g,o)}catch{}return s}(),gy=function(){return!!document.createElement("canvas").getContext}(),Bl=!!(document.createElementNS&&Ae("svg").createSVGRect),xy=!!Bl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),yy=!Bl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var o=s.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),_y=navigator.platform.indexOf("Mac")===0,vy=navigator.platform.indexOf("Linux")===0;function hr(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:Wr,ielt9:Al,edge:pa,webkit:Gs,android:ma,android23:ga,androidStock:Se,opera:qe,chrome:Cr,gecko:Jt,safari:Rl,phantom:xa,opera12:bh,win:oy,ie3d:wh,webkit3d:zl,gecko3d:kh,any3d:ly,mobile:Qs,mobileWebkit:cy,mobileWebkit3d:dy,msPointer:jh,pointer:Nh,touch:uy,touchNative:Sh,mobileOpera:hy,mobileGecko:fy,retina:py,passiveEvents:my,canvas:gy,svg:Bl,vml:yy,inlineSvg:xy,mac:_y,linux:vy},Ch=ce.msPointer?"MSPointerDown":"pointerdown",Eh=ce.msPointer?"MSPointerMove":"pointermove",Th=ce.msPointer?"MSPointerUp":"pointerup",Ph=ce.msPointer?"MSPointerCancel":"pointercancel",Dl={touchstart:Ch,touchmove:Eh,touchend:Th,touchcancel:Ph},Lh={touchstart:Sy,touchmove:ya,touchend:ya,touchcancel:ya},Kn={},Mh=!1;function by(s,o,c){return o==="touchstart"&&Ny(),Lh[o]?(c=Lh[o].bind(this,c),s.addEventListener(Dl[o],c,!1),c):(console.warn("wrong event specified:",o),g)}function wy(s,o,c){if(!Dl[o]){console.warn("wrong event specified:",o);return}s.removeEventListener(Dl[o],c,!1)}function ky(s){Kn[s.pointerId]=s}function jy(s){Kn[s.pointerId]&&(Kn[s.pointerId]=s)}function Oh(s){delete Kn[s.pointerId]}function Ny(){Mh||(document.addEventListener(Ch,ky,!0),document.addEventListener(Eh,jy,!0),document.addEventListener(Th,Oh,!0),document.addEventListener(Ph,Oh,!0),Mh=!0)}function ya(s,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in Kn)o.touches.push(Kn[c]);o.changedTouches=[o],s(o)}}function Sy(s,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&st(o),ya(s,o)}function Cy(s){var o={},c,h;for(h in s)c=s[h],o[h]=c&&c.bind?c.bind(s):c;return s=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ey=200;function Ty(s,o){s.addEventListener("dblclick",o);var c=0,h;function m(j){if(j.detail!==1){h=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var A=Dh(j);if(!(A.some(function(F){return F instanceof HTMLLabelElement&&F.attributes.for})&&!A.some(function(F){return F instanceof HTMLInputElement||F instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Ey?(h++,h===2&&o(Cy(j))):h=1,c=B}}}return s.addEventListener("click",m),{dblclick:o,simDblclick:m}}function Py(s,o){s.removeEventListener("dblclick",o.dblclick),s.removeEventListener("click",o.simDblclick)}var Il=ba(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xs=ba(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ah=Xs==="webkitTransition"||Xs==="OTransition"?Xs+"End":"transitionend";function Rh(s){return typeof s=="string"?document.getElementById(s):s}function Js(s,o){var c=s.style[o]||s.currentStyle&&s.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(s,null);c=h?h[o]:null}return c==="auto"?null:c}function Te(s,o,c){var h=document.createElement(s);return h.className=o||"",c&&c.appendChild(h),h}function De(s){var o=s.parentNode;o&&o.removeChild(s)}function _a(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Gn(s){var o=s.parentNode;o&&o.lastChild!==s&&o.appendChild(s)}function Qn(s){var o=s.parentNode;o&&o.firstChild!==s&&o.insertBefore(s,o.firstChild)}function $l(s,o){if(s.classList!==void 0)return s.classList.contains(o);var c=va(s);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function xe(s,o){if(s.classList!==void 0)for(var c=b(o),h=0,m=c.length;h<m;h++)s.classList.add(c[h]);else if(!$l(s,o)){var j=va(s);Fl(s,(j?j+" ":"")+o)}}function Ze(s,o){s.classList!==void 0?s.classList.remove(o):Fl(s,w((" "+va(s)+" ").replace(" "+o+" "," ")))}function Fl(s,o){s.className.baseVal===void 0?s.className=o:s.className.baseVal=o}function va(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function $t(s,o){"opacity"in s.style?s.style.opacity=o:"filter"in s.style&&Ly(s,o)}function Ly(s,o){var c=!1,h="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):s.style.filter+=" progid:"+h+"(opacity="+o+")"}function ba(s){for(var o=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in o)return s[c];return!1}function jn(s,o,c){var h=o||new $(0,0);s.style[Il]=(ce.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(c?" scale("+c+")":"")}function Ke(s,o){s._leaflet_pos=o,ce.any3d?jn(s,o):(s.style.left=o.x+"px",s.style.top=o.y+"px")}function Nn(s){return s._leaflet_pos||new $(0,0)}var Ys,ei,Ul;if("onselectstart"in document)Ys=function(){pe(window,"selectstart",st)},ei=function(){Me(window,"selectstart",st)};else{var ti=ba(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ys=function(){if(ti){var s=document.documentElement.style;Ul=s[ti],s[ti]="none"}},ei=function(){ti&&(document.documentElement.style[ti]=Ul,Ul=void 0)}}function Hl(){pe(window,"dragstart",st)}function Zl(){Me(window,"dragstart",st)}var wa,Vl;function Wl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ka(),wa=s,Vl=s.style.outlineStyle,s.style.outlineStyle="none",pe(window,"keydown",ka))}function ka(){wa&&(wa.style.outlineStyle=Vl,wa=void 0,Vl=void 0,Me(window,"keydown",ka))}function zh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ql(s){var o=s.getBoundingClientRect();return{x:o.width/s.offsetWidth||1,y:o.height/s.offsetHeight||1,boundingClientRect:o}}var My={__proto__:null,TRANSFORM:Il,TRANSITION:Xs,TRANSITION_END:Ah,get:Rh,getStyle:Js,create:Te,remove:De,empty:_a,toFront:Gn,toBack:Qn,hasClass:$l,addClass:xe,removeClass:Ze,setClass:Fl,getClass:va,setOpacity:$t,testProp:ba,setTransform:jn,setPosition:Ke,getPosition:Nn,get disableTextSelection(){return Ys},get enableTextSelection(){return ei},disableImageDrag:Hl,enableImageDrag:Zl,preventOutline:Wl,restoreOutline:ka,getSizedParentNode:zh,getScale:ql};function pe(s,o,c,h){if(o&&typeof o=="object")for(var m in o)Gl(s,m,o[m],c);else{o=b(o);for(var j=0,A=o.length;j<A;j++)Gl(s,o[j],c,h)}return this}var fr="_leaflet_events";function Me(s,o,c,h){if(arguments.length===1)Bh(s),delete s[fr];else if(o&&typeof o=="object")for(var m in o)Ql(s,m,o[m],c);else if(o=b(o),arguments.length===2)Bh(s,function(B){return R(o,B)!==-1});else for(var j=0,A=o.length;j<A;j++)Ql(s,o[j],c,h);return this}function Bh(s,o){for(var c in s[fr]){var h=c.split(/\d/)[0];(!o||o(h))&&Ql(s,h,null,null,c)}}var Kl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Gl(s,o,c,h){var m=o+p(c)+(h?"_"+p(h):"");if(s[fr]&&s[fr][m])return this;var j=function(B){return c.call(h||s,B||window.event)},A=j;!ce.touchNative&&ce.pointer&&o.indexOf("touch")===0?j=by(s,o,j):ce.touch&&o==="dblclick"?j=Ty(s,j):"addEventListener"in s?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?s.addEventListener(Kl[o]||o,j,ce.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(j=function(B){B=B||window.event,Jl(s,B)&&A(B)},s.addEventListener(Kl[o],j,!1)):s.addEventListener(o,A,!1):s.attachEvent("on"+o,j),s[fr]=s[fr]||{},s[fr][m]=j}function Ql(s,o,c,h,m){m=m||o+p(c)+(h?"_"+p(h):"");var j=s[fr]&&s[fr][m];if(!j)return this;!ce.touchNative&&ce.pointer&&o.indexOf("touch")===0?wy(s,o,j):ce.touch&&o==="dblclick"?Py(s,j):"removeEventListener"in s?s.removeEventListener(Kl[o]||o,j,!1):s.detachEvent("on"+o,j),s[fr][m]=null}function Sn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Xl(s){return Gl(s,"wheel",Sn),this}function ri(s){return pe(s,"mousedown touchstart dblclick contextmenu",Sn),s._leaflet_disable_click=!0,this}function st(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Cn(s){return st(s),Sn(s),this}function Dh(s){if(s.composedPath)return s.composedPath();for(var o=[],c=s.target;c;)o.push(c),c=c.parentNode;return o}function Ih(s,o){if(!o)return new $(s.clientX,s.clientY);var c=ql(o),h=c.boundingClientRect;return new $((s.clientX-h.left)/c.x-o.clientLeft,(s.clientY-h.top)/c.y-o.clientTop)}var Oy=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $h(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Oy:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Jl(s,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Ay={__proto__:null,on:pe,off:Me,stopPropagation:Sn,disableScrollPropagation:Xl,disableClickPropagation:ri,preventDefault:st,stop:Cn,getPropagationPath:Dh,getMousePosition:Ih,getWheelDelta:$h,isExternalTarget:Jl,addListener:pe,removeListener:Me},Fh=J.extend({run:function(s,o,c,h){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Nn(s),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(s){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,o){var c=this._startPos.add(this._offset.multiplyBy(s));o&&c._round(),Ke(this._el,c),this.fire("step")},_complete:function(){ge(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),be=J.extend({options:{crs:Ne,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,o){o=C(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(re(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xs&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pe(this._proxy,Ah,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),s=this._limitCenter(re(s),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=a({animate:c.animate},c.zoom),c.pan=a({animate:c.animate,duration:c.duration},c.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,o,c.zoom):this._tryAnimatedPan(s,c.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(s,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,o){return this._loaded?this.setView(this.getCenter(),s,{zoom:o}):(this._zoom=s,this)},zoomIn:function(s,o){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,o)},zoomOut:function(s,o){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,o)},setZoomAround:function(s,o,c){var h=this.getZoomScale(o),m=this.getSize().divideBy(2),j=s instanceof $?s:this.latLngToContainerPoint(s),A=j.subtract(m).multiplyBy(1-1/h),B=this.containerPointToLatLng(m.add(A));return this.setView(B,o,{zoom:c})},_getBoundsCenterZoom:function(s,o){o=o||{},s=s.getBounds?s.getBounds():H(s);var c=T(o.paddingTopLeft||o.padding||[0,0]),h=T(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(s,!1,c.add(h));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:s.getCenter(),zoom:m};var j=h.subtract(c).divideBy(2),A=this.project(s.getSouthWest(),m),B=this.project(s.getNorthEast(),m),F=this.unproject(A.add(B).divideBy(2).add(j),m);return{center:F,zoom:m}},fitBounds:function(s,o){if(s=H(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,o){return this.setView(s,this._zoom,{pan:o})},panBy:function(s,o){if(s=T(s).round(),o=o||{},!s.x&&!s.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,o,c){if(c=c||{},c.animate===!1||!ce.any3d)return this.setView(s,o,c);this._stop();var h=this.project(this.getCenter()),m=this.project(s),j=this.getSize(),A=this._zoom;s=re(s),o=o===void 0?A:o;var B=Math.max(j.x,j.y),F=B*this.getZoomScale(A,o),W=m.distanceTo(h)||1,se=1.42,he=se*se;function ye(Ge){var Ra=Ge?-1:1,w_=Ge?F:B,k_=F*F-B*B+Ra*he*he*W*W,j_=2*w_*he*W,cc=k_/j_,wf=Math.sqrt(cc*cc+1)-cc,N_=wf<1e-9?-18:Math.log(wf);return N_}function gt(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function tt(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}function Ut(Ge){return gt(Ge)/tt(Ge)}var Nt=ye(0);function rs(Ge){return B*(tt(Nt)/tt(Nt+se*Ge))}function y_(Ge){return B*(tt(Nt)*Ut(Nt+se*Ge)-gt(Nt))/he}function __(Ge){return 1-Math.pow(1-Ge,1.5)}var v_=Date.now(),vf=(ye(1)-Nt)/se,b_=c.duration?1e3*c.duration:1e3*vf*.8;function bf(){var Ge=(Date.now()-v_)/b_,Ra=__(Ge)*vf;Ge<=1?(this._flyToFrame=ne(bf,this),this._move(this.unproject(h.add(m.subtract(h).multiplyBy(y_(Ra)/W)),A),this.getScaleZoom(B/rs(Ra),A),{flyTo:!0})):this._move(s,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),bf.call(this),this},flyToBounds:function(s,o){var c=this._getBoundsCenterZoom(s,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(s){return s=H(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var o=this.options.minZoom;return this.options.minZoom=s,this._loaded&&o!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var o=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&o!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,o){this._enforcingBounds=!0;var c=this.getCenter(),h=this._limitCenter(c,this._zoom,H(s));return c.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(s,o){o=o||{};var c=T(o.paddingTopLeft||o.padding||[0,0]),h=T(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),j=this.project(s),A=this.getPixelBounds(),B=q([A.min.add(c),A.max.subtract(h)]),F=B.getSize();if(!B.contains(j)){this._enforcingBounds=!0;var W=j.subtract(B.getCenter()),se=B.extend(j).getSize().subtract(F);m.x+=W.x<0?-se.x:se.x,m.y+=W.y<0?-se.y:se.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=a({animate:!1,pan:!0},s===!0?{animate:!0}:s);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),h=o.divideBy(2).round(),m=c.divideBy(2).round(),j=h.subtract(m);return!j.x&&!j.y?this:(s.animate&&s.pan?this.panBy(j):(s.pan&&this._rawPanBy(j),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=a({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=d(this._handleGeolocationResponse,this),c=d(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,s):navigator.geolocation.getCurrentPosition(o,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var o=s.code,c=s.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var o=s.coords.latitude,c=s.coords.longitude,h=new Y(o,c),m=h.toBounds(s.coords.accuracy*2),j=this._locateOptions;if(j.setView){var A=this.getBoundsZoom(m);this.setView(h,j.maxZoom?Math.min(A,j.maxZoom):A)}var B={latlng:h,bounds:m,timestamp:s.timestamp};for(var F in s.coords)typeof s.coords[F]=="number"&&(B[F]=s.coords[F]);this.fire("locationfound",B)}},addHandler:function(s,o){if(!o)return this;var c=this[s]=new o(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),De(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ge(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)De(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,o){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),h=Te("div",c,o||this._mapPane);return s&&(this._panes[s]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),o=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new de(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,o,c){s=H(s),c=T(c||[0,0]);var h=this.getZoom()||0,m=this.getMinZoom(),j=this.getMaxZoom(),A=s.getNorthWest(),B=s.getSouthEast(),F=this.getSize().subtract(c),W=q(this.project(B,h),this.project(A,h)).getSize(),se=ce.any3d?this.options.zoomSnap:1,he=F.x/W.x,ye=F.y/W.y,gt=o?Math.max(he,ye):Math.min(he,ye);return h=this.getScaleZoom(gt,h),se&&(h=Math.round(h/(se/100))*(se/100),h=o?Math.ceil(h/se)*se:Math.floor(h/se)*se),Math.max(m,Math.min(j,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,o){var c=this._getTopLeftPoint(s,o);return new V(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(s)/c.scale(o)},getScaleZoom:function(s,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var h=c.zoom(s*c.scale(o));return isNaN(h)?1/0:h},project:function(s,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(re(s),o)},unproject:function(s,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(T(s),o)},layerPointToLatLng:function(s){var o=T(s).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(s){var o=this.project(re(s))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(re(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(H(s))},distance:function(s,o){return this.options.crs.distance(re(s),re(o))},containerPointToLayerPoint:function(s){return T(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return T(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var o=this.containerPointToLayerPoint(T(s));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(s)))},mouseEventToContainerPoint:function(s){return Ih(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var o=this._container=Rh(s);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pe(o,"scroll",this._onScroll,this),this._containerId=p(o)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,xe(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Js(s,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ke(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(s.markerPane,"leaflet-zoom-hide"),xe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,o,c){Ke(this._mapPane,new $(0,0));var h=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,c)._move(s,o)._moveEnd(m),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(s,o){return s&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(s,o,c,h){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),h?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ge(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Ke(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[p(this._container)]=this;var o=s?Me:pe;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ge(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,o){for(var c=[],h,m=o==="mouseout"||o==="mouseover",j=s.target||s.srcElement,A=!1;j;){if(h=this._targets[p(j)],h&&(o==="click"||o==="preclick")&&this._draggableMoved(h)){A=!0;break}if(h&&h.listens(o,!0)&&(m&&!Jl(j,s)||(c.push(h),m))||j===this._container)break;j=j.parentNode}return!c.length&&!A&&!m&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var o=s.target||s.srcElement;if(!(!this._loaded||o._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(o))){var c=s.type;c==="mousedown"&&Wl(o),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,o,c){if(s.type==="click"){var h=a({},s);h.type="preclick",this._fireDOMEvent(h,h.type,c)}var m=this._findEventTargets(s,o);if(c){for(var j=[],A=0;A<c.length;A++)c[A].listens(o,!0)&&j.push(c[A]);m=j.concat(m)}if(m.length){o==="contextmenu"&&st(s);var B=m[0],F={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var W=B.getLatLng&&(!B._radius||B._radius<=10);F.containerPoint=W?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(s),F.layerPoint=this.containerPointToLayerPoint(F.containerPoint),F.latlng=W?B.getLatLng():this.layerPointToLatLng(F.layerPoint)}for(A=0;A<m.length;A++)if(m[A].fire(o,F,!0),F.originalEvent._stopped||m[A].options.bubblingMouseEvents===!1&&R(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,o=this._handlers.length;s<o;s++)this._handlers[s].disable()},whenReady:function(s,o){return this._loaded?s.call(o||this,{target:this}):this.on("load",s,o),this},_getMapPanePos:function(){return Nn(this._mapPane)||new $(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,o){var c=s&&o!==void 0?this._getNewPixelOrigin(s,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,o){var c=this.getSize()._divideBy(2);return this.project(s,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,o,c){var h=this._getNewPixelOrigin(c,o);return this.project(s,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(s,o,c){var h=this._getNewPixelOrigin(c,o);return q([this.project(s.getSouthWest(),o)._subtract(h),this.project(s.getNorthWest(),o)._subtract(h),this.project(s.getSouthEast(),o)._subtract(h),this.project(s.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,o,c){if(!c)return s;var h=this.project(s,o),m=this.getSize().divideBy(2),j=new V(h.subtract(m),h.add(m)),A=this._getBoundsOffset(j,c,o);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?s:this.unproject(h.add(A),o)},_limitOffset:function(s,o){if(!o)return s;var c=this.getPixelBounds(),h=new V(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(s,o,c){var h=q(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),m=h.min.subtract(s.min),j=h.max.subtract(s.max),A=this._rebound(m.x,-j.x),B=this._rebound(m.y,-j.y);return new $(A,B)},_rebound:function(s,o){return s+o>0?Math.round(s-o)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(o))},_limitZoom:function(s){var o=this.getMinZoom(),c=this.getMaxZoom(),h=ce.any3d?this.options.zoomSnap:1;return h&&(s=Math.round(s/h)*h),Math.max(o,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,o){var c=this._getCenterOffset(s)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var s=this._proxy=Te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(o){var c=Il,h=this._proxy.style[c];jn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){De(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),o=this.getZoom();jn(this._proxy,this.project(s,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),m=this._getCenterOffset(s)._divideBy(1-1/h);return c.animate!==!0&&!this.getSize().contains(m)?!1:(ne(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,o,!0)},this),!0)},_animateZoom:function(s,o,c,h){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=o,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:o,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ry(s,o){return new be(s,o)}var Yt=ee.extend({options:{position:"topright"},initialize:function(s){C(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var o=this._map;return o&&o.removeControl(this),this.options.position=s,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var o=this._container=this.onAdd(s),c=this.getPosition(),h=s._controlCorners[c];return xe(o,"leaflet-control"),c.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(De(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ni=function(s){return new Yt(s)};be.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},o="leaflet-",c=this._controlContainer=Te("div",o+"control-container",this._container);function h(m,j){var A=o+m+" "+o+j;s[m+j]=Te("div",A,c)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)De(this._controlCorners[s]);De(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uh=Yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,o,c,h){return c<h?-1:h<c?1:0}},initialize:function(s,o,c){C(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in s)this._addLayer(s[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Yt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,o){return this._addLayer(s,o),this._map?this._update():this},addOverlay:function(s,o){return this._addLayer(s,o,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var o=this._getLayer(p(s));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",o=this._container=Te("div",s),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),ri(o),Xl(o);var h=this._section=Te("section",s+"-list");c&&(this._map.on("click",this.collapse,this),pe(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Te("a",s+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),pe(m,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){st(j),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Te("div",s+"-base",h),this._separator=Te("div",s+"-separator",h),this._overlaysList=Te("div",s+"-overlays",h),o.appendChild(h)},_getLayer:function(s){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&p(this._layers[o].layer)===s)return this._layers[o]},_addLayer:function(s,o,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(d(function(h,m){return this.options.sortFunction(h.layer,m.layer,h.name,m.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;_a(this._baseLayersList),_a(this._overlaysList),this._layerControlInputs=[];var s,o,c,h,m=0;for(c=0;c<this._layers.length;c++)h=this._layers[c],this._addItem(h),o=o||h.overlay,s=s||!h.overlay,m+=h.overlay?0:1;return this.options.hideSingleBase&&(s=s&&m>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=o&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var o=this._getLayer(p(s.target)),c=o.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(s,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=c,h.firstChild},_addItem:function(s){var o=document.createElement("label"),c=this._map.hasLayer(s.layer),h;s.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=c):h=this._createRadioElement("leaflet-base-layers_"+p(this),c),this._layerControlInputs.push(h),h.layerId=p(s.layer),pe(h,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+s.name;var j=document.createElement("span");o.appendChild(j),j.appendChild(h),j.appendChild(m);var A=s.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,o,c,h=[],m=[];this._handlingClick=!0;for(var j=s.length-1;j>=0;j--)o=s[j],c=this._getLayer(o.layerId).layer,o.checked?h.push(c):o.checked||m.push(c);for(j=0;j<m.length;j++)this._map.hasLayer(m[j])&&this._map.removeLayer(m[j]);for(j=0;j<h.length;j++)this._map.hasLayer(h[j])||this._map.addLayer(h[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,o,c,h=this._map.getZoom(),m=s.length-1;m>=0;m--)o=s[m],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&h<c.options.minZoom||c.options.maxZoom!==void 0&&h>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,pe(s,"click",st),this.expand();var o=this;setTimeout(function(){Me(s,"click",st),o._preventClick=!1})}}),zy=function(s,o,c){return new Uh(s,o,c)},Yl=Yt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var o="leaflet-control-zoom",c=Te("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,o,c,h,m){var j=Te("a",c,h);return j.innerHTML=s,j.href="#",j.title=o,j.setAttribute("role","button"),j.setAttribute("aria-label",o),ri(j),pe(j,"click",Cn),pe(j,"click",m,this),pe(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var s=this._map,o="leaflet-disabled";Ze(this._zoomInButton,o),Ze(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(xe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(xe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Yl,this.addControl(this.zoomControl))});var By=function(s){return new Yl(s)},Hh=Yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var o="leaflet-control-scale",c=Te("div",o),h=this.options;return this._addScales(h,o+"-line",c),s.on(h.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,o,c){s.metric&&(this._mScale=Te("div",o,c)),s.imperial&&(this._iScale=Te("div",o,c))},_update:function(){var s=this._map,o=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,o]),s.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var o=this._getRoundNum(s),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/s)},_updateImperial:function(s){var o=s*3.2808399,c,h,m;o>5280?(c=o/5280,h=this._getRoundNum(c),this._updateScale(this._iScale,h+" mi",h/c)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(s,o,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=o},_getRoundNum:function(s){var o=Math.pow(10,(Math.floor(s)+"").length-1),c=s/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),Dy=function(s){return new Hh(s)},Iy='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ec=Yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?Iy+" ":"")+"Leaflet</a>"},initialize:function(s){C(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Te("div","leaflet-control-attribution"),ri(this._container);for(var o in s._layers)s._layers[o].getAttribution&&this.addAttribution(s._layers[o].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var o in this._attributions)this._attributions[o]&&s.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new ec().addTo(this)});var $y=function(s){return new ec(s)};Yt.Layers=Uh,Yt.Zoom=Yl,Yt.Scale=Hh,Yt.Attribution=ec,ni.layers=zy,ni.zoom=By,ni.scale=Dy,ni.attribution=$y;var pr=ee.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pr.addTo=function(s,o){return s.addHandler(o,this),this};var Fy={Events:ie},Zh=ce.touch?"touchstart mousedown":"mousedown",qr=J.extend({options:{clickTolerance:3},initialize:function(s,o,c,h){C(this,h),this._element=s,this._dragStartTarget=o||s,this._preventOutline=c},enable:function(){this._enabled||(pe(this._dragStartTarget,Zh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qr._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,Zh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!$l(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){qr._dragging===this&&this.finishDrag();return}if(!(qr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(qr._dragging=this,this._preventOutline&&Wl(this._element),Hl(),Ys(),!this._moving)){this.fire("down");var o=s.touches?s.touches[0]:s,c=zh(this._element);this._startPoint=new $(o.clientX,o.clientY),this._startPos=Nn(this._element),this._parentScale=ql(c);var h=s.type==="mousedown";pe(document,h?"mousemove":"touchmove",this._onMove,this),pe(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var o=s.touches&&s.touches.length===1?s.touches[0]:s,c=new $(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,st(s),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Ke(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),Zl(),ei();var o=this._moved&&this._moving;this._moving=!1,qr._dragging=!1,o&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Vh(s,o,c){var h,m=[1,4,2,8],j,A,B,F,W,se,he,ye;for(j=0,se=s.length;j<se;j++)s[j]._code=En(s[j],o);for(B=0;B<4;B++){for(he=m[B],h=[],j=0,se=s.length,A=se-1;j<se;A=j++)F=s[j],W=s[A],F._code&he?W._code&he||(ye=ja(W,F,he,o,c),ye._code=En(ye,o),h.push(ye)):(W._code&he&&(ye=ja(W,F,he,o,c),ye._code=En(ye,o),h.push(ye)),h.push(F));s=h}return s}function Wh(s,o){var c,h,m,j,A,B,F,W,se;if(!s||s.length===0)throw new Error("latlngs not passed");Ft(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var he=re([0,0]),ye=H(s),gt=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());gt<1700&&(he=tc(s));var tt=s.length,Ut=[];for(c=0;c<tt;c++){var Nt=re(s[c]);Ut.push(o.project(re([Nt.lat-he.lat,Nt.lng-he.lng])))}for(B=F=W=0,c=0,h=tt-1;c<tt;h=c++)m=Ut[c],j=Ut[h],A=m.y*j.x-j.y*m.x,F+=(m.x+j.x)*A,W+=(m.y+j.y)*A,B+=A*3;B===0?se=Ut[0]:se=[F/B,W/B];var rs=o.unproject(T(se));return re([rs.lat+he.lat,rs.lng+he.lng])}function tc(s){for(var o=0,c=0,h=0,m=0;m<s.length;m++){var j=re(s[m]);o+=j.lat,c+=j.lng,h++}return re([o/h,c/h])}var Uy={__proto__:null,clipPolygon:Vh,polygonCenter:Wh,centroid:tc};function qh(s,o){if(!o||!s.length)return s.slice();var c=o*o;return s=Vy(s,c),s=Zy(s,c),s}function Kh(s,o,c){return Math.sqrt(si(s,o,c,!0))}function Hy(s,o,c){return si(s,o,c)}function Zy(s,o){var c=s.length,h=typeof Uint8Array<"u"?Uint8Array:Array,m=new h(c);m[0]=m[c-1]=1,rc(s,m,o,0,c-1);var j,A=[];for(j=0;j<c;j++)m[j]&&A.push(s[j]);return A}function rc(s,o,c,h,m){var j=0,A,B,F;for(B=h+1;B<=m-1;B++)F=si(s[B],s[h],s[m],!0),F>j&&(A=B,j=F);j>c&&(o[A]=1,rc(s,o,c,h,A),rc(s,o,c,A,m))}function Vy(s,o){for(var c=[s[0]],h=1,m=0,j=s.length;h<j;h++)Wy(s[h],s[m])>o&&(c.push(s[h]),m=h);return m<j-1&&c.push(s[j-1]),c}var Gh;function Qh(s,o,c,h,m){var j=h?Gh:En(s,c),A=En(o,c),B,F,W;for(Gh=A;;){if(!(j|A))return[s,o];if(j&A)return!1;B=j||A,F=ja(s,o,B,c,m),W=En(F,c),B===j?(s=F,j=W):(o=F,A=W)}}function ja(s,o,c,h,m){var j=o.x-s.x,A=o.y-s.y,B=h.min,F=h.max,W,se;return c&8?(W=s.x+j*(F.y-s.y)/A,se=F.y):c&4?(W=s.x+j*(B.y-s.y)/A,se=B.y):c&2?(W=F.x,se=s.y+A*(F.x-s.x)/j):c&1&&(W=B.x,se=s.y+A*(B.x-s.x)/j),new $(W,se,m)}function En(s,o){var c=0;return s.x<o.min.x?c|=1:s.x>o.max.x&&(c|=2),s.y<o.min.y?c|=4:s.y>o.max.y&&(c|=8),c}function Wy(s,o){var c=o.x-s.x,h=o.y-s.y;return c*c+h*h}function si(s,o,c,h){var m=o.x,j=o.y,A=c.x-m,B=c.y-j,F=A*A+B*B,W;return F>0&&(W=((s.x-m)*A+(s.y-j)*B)/F,W>1?(m=c.x,j=c.y):W>0&&(m+=A*W,j+=B*W)),A=s.x-m,B=s.y-j,h?A*A+B*B:new $(m,j)}function Ft(s){return!N(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Xh(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ft(s)}function Jh(s,o){var c,h,m,j,A,B,F,W;if(!s||s.length===0)throw new Error("latlngs not passed");Ft(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=re([0,0]),he=H(s),ye=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());ye<1700&&(se=tc(s));var gt=s.length,tt=[];for(c=0;c<gt;c++){var Ut=re(s[c]);tt.push(o.project(re([Ut.lat-se.lat,Ut.lng-se.lng])))}for(c=0,h=0;c<gt-1;c++)h+=tt[c].distanceTo(tt[c+1])/2;if(h===0)W=tt[0];else for(c=0,j=0;c<gt-1;c++)if(A=tt[c],B=tt[c+1],m=A.distanceTo(B),j+=m,j>h){F=(j-h)/m,W=[B.x-F*(B.x-A.x),B.y-F*(B.y-A.y)];break}var Nt=o.unproject(T(W));return re([Nt.lat+se.lat,Nt.lng+se.lng])}var qy={__proto__:null,simplify:qh,pointToSegmentDistance:Kh,closestPointOnSegment:Hy,clipSegment:Qh,_getEdgeIntersection:ja,_getBitCode:En,_sqClosestPointOnSegment:si,isFlat:Ft,_flat:Xh,polylineCenter:Jh},nc={project:function(s){return new $(s.lng,s.lat)},unproject:function(s){return new Y(s.y,s.x)},bounds:new V([-180,-90],[180,90])},sc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new V([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var o=Math.PI/180,c=this.R,h=s.lat*o,m=this.R_MINOR/c,j=Math.sqrt(1-m*m),A=j*Math.sin(h),B=Math.tan(Math.PI/4-h/2)/Math.pow((1-A)/(1+A),j/2);return h=-c*Math.log(Math.max(B,1e-10)),new $(s.lng*o*c,h)},unproject:function(s){for(var o=180/Math.PI,c=this.R,h=this.R_MINOR/c,m=Math.sqrt(1-h*h),j=Math.exp(-s.y/c),A=Math.PI/2-2*Math.atan(j),B=0,F=.1,W;B<15&&Math.abs(F)>1e-7;B++)W=m*Math.sin(A),W=Math.pow((1-W)/(1+W),m/2),F=Math.PI/2-2*Math.atan(j*W)-A,A+=F;return new Y(A*o,s.x*o/c)}},Ky={__proto__:null,LonLat:nc,Mercator:sc,SphericalMercator:Z},Gy=a({},Pe,{code:"EPSG:3395",projection:sc,transformation:function(){var s=.5/(Math.PI*sc.R);return je(s,.5,-s,.5)}()}),Yh=a({},Pe,{code:"EPSG:4326",projection:nc,transformation:je(1/180,1,-1/180,.5)}),Qy=a({},ue,{projection:nc,transformation:je(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,o){var c=o.lng-s.lng,h=o.lat-s.lat;return Math.sqrt(c*c+h*h)},infinite:!0});ue.Earth=Pe,ue.EPSG3395=Gy,ue.EPSG3857=Ne,ue.EPSG900913=Ee,ue.EPSG4326=Yh,ue.Simple=Qy;var er=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[p(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[p(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var o=s.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});be.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var o=p(s);return this._layers[o]?this:(this._layers[o]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var o=p(s);return this._layers[o]?(this._loaded&&s.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return p(s)in this._layers},eachLayer:function(s,o){for(var c in this._layers)s.call(o,this._layers[c]);return this},_addLayers:function(s){s=s?N(s)?s:[s]:[];for(var o=0,c=s.length;o<c;o++)this.addLayer(s[o])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[p(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var o=p(s);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,o=-1/0,c=this._getZoomSpan();for(var h in this._zoomBoundLayers){var m=this._zoomBoundLayers[h].options;s=m.minZoom===void 0?s:Math.min(s,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xn=er.extend({initialize:function(s,o){C(this,o),this._layers={};var c,h;if(s)for(c=0,h=s.length;c<h;c++)this.addLayer(s[c])},addLayer:function(s){var o=this.getLayerId(s);return this._layers[o]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var o=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(s){var o=typeof s=="number"?s:this.getLayerId(s);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var o=Array.prototype.slice.call(arguments,1),c,h;for(c in this._layers)h=this._layers[c],h[s]&&h[s].apply(h,o);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,o){for(var c in this._layers)s.call(o,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return p(s)}}),Xy=function(s,o){return new Xn(s,o)},Er=Xn.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Xn.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Xn.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new de;for(var o in this._layers){var c=this._layers[o];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),Jy=function(s,o){return new Er(s,o)},Jn=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){C(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,o){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(s,o){var c=this.options,h=c[o+"Size"];typeof h=="number"&&(h=[h,h]);var m=T(h),j=T(o==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));s.className="leaflet-marker-"+o+" "+(c.className||""),j&&(s.style.marginLeft=-j.x+"px",s.style.marginTop=-j.y+"px"),m&&(s.style.width=m.x+"px",s.style.height=m.y+"px")},_createImg:function(s,o){return o=o||document.createElement("img"),o.src=s,o},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Yy(s){return new Jn(s)}var ii=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ii.imagePath!="string"&&(ii.imagePath=this._detectIconPath()),(this.options.imagePath||ii.imagePath)+Jn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var o=function(c,h,m){var j=h.exec(c);return j&&j[m]};return s=o(s,/^url\((['"])?(.+)\1\)$/,2),s&&o(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Te("div","leaflet-default-icon-path",document.body),o=Js(s,"background-image")||Js(s,"backgroundImage");if(document.body.removeChild(s),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),ef=pr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new qr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var o=this._marker,c=o._map,h=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,j=Nn(o._icon),A=c.getPixelBounds(),B=c.getPixelOrigin(),F=q(A.min._subtract(B).add(m),A.max._subtract(B).subtract(m));if(!F.contains(j)){var W=T((Math.max(F.max.x,j.x)-F.max.x)/(A.max.x-F.max.x)-(Math.min(F.min.x,j.x)-F.min.x)/(A.min.x-F.min.x),(Math.max(F.max.y,j.y)-F.max.y)/(A.max.y-F.max.y)-(Math.min(F.min.y,j.y)-F.min.y)/(A.min.y-F.min.y)).multiplyBy(h);c.panBy(W,{animate:!1}),this._draggable._newPos._add(W),this._draggable._startPos._add(W),Ke(o._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ne(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(ge(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,s)))},_onDrag:function(s){var o=this._marker,c=o._shadow,h=Nn(o._icon),m=o._map.layerPointToLatLng(h);c&&Ke(c,h),o._latlng=m,s.latlng=m,s.oldLatLng=this._oldLatLng,o.fire("move",s).fire("drag",s)},_onDragEnd:function(s){ge(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Na=er.extend({options:{icon:new ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,o){C(this,o),this._latlng=re(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var o=this._latlng;return this._latlng=re(s),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),h=!1;c!==this._icon&&(this._icon&&this._removeIcon(),h=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),xe(c,o),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pe(c,"focus",this._panOnFocus,this);var m=s.icon.createShadow(this._shadow),j=!1;m!==this._shadow&&(this._removeShadow(),j=!0),m&&(xe(m,o),m.alt=""),this._shadow=m,s.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&j&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),De(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&De(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Ke(this._icon,s),this._shadow&&Ke(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var o=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ef)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ef(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&$t(this._icon,s),this._shadow&&$t(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var o=this.options.icon.options,c=o.iconSize?T(o.iconSize):T(0,0),h=o.iconAnchor?T(o.iconAnchor):T(0,0);s.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:c.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function e_(s,o){return new Na(s,o)}var Kr=er.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return C(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Sa=Kr.extend({options:{fill:!0,radius:10},initialize:function(s,o){C(this,o),this._latlng=re(s),this._radius=this.options.radius},setLatLng:function(s){var o=this._latlng;return this._latlng=re(s),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var o=s&&s.radius||this._radius;return Kr.prototype.setStyle.call(this,s),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,o=this._radiusY||s,c=this._clickTolerance(),h=[s+c,o+c];this._pxBounds=new V(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function t_(s,o){return new Sa(s,o)}var ic=Sa.extend({initialize:function(s,o,c){if(typeof o=="number"&&(o=a({},c,{radius:o})),C(this,o),this._latlng=re(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new de(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Kr.prototype.setStyle,_project:function(){var s=this._latlng.lng,o=this._latlng.lat,c=this._map,h=c.options.crs;if(h.distance===Pe.distance){var m=Math.PI/180,j=this._mRadius/Pe.R/m,A=c.project([o+j,s]),B=c.project([o-j,s]),F=A.add(B).divideBy(2),W=c.unproject(F).lat,se=Math.acos((Math.cos(j*m)-Math.sin(o*m)*Math.sin(W*m))/(Math.cos(o*m)*Math.cos(W*m)))/m;(isNaN(se)||se===0)&&(se=j/Math.cos(Math.PI/180*o)),this._point=F.subtract(c.getPixelOrigin()),this._radius=isNaN(se)?0:F.x-c.project([W,s-se]).x,this._radiusY=F.y-A.y}else{var he=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(he).x}this._updateBounds()}});function r_(s,o,c){return new ic(s,o,c)}var Tr=Kr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,o){C(this,o),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var o=1/0,c=null,h=si,m,j,A=0,B=this._parts.length;A<B;A++)for(var F=this._parts[A],W=1,se=F.length;W<se;W++){m=F[W-1],j=F[W];var he=h(s,m,j,!0);he<o&&(o=he,c=h(s,m,j))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,o){return o=o||this._defaultShape(),s=re(s),o.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new de,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ft(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var o=[],c=Ft(s),h=0,m=s.length;h<m;h++)c?(o[h]=re(s[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(s[h]);return o},_project:function(){var s=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),o=new $(s,s);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(s,o,c){var h=s[0]instanceof Y,m=s.length,j,A;if(h){for(A=[],j=0;j<m;j++)A[j]=this._map.latLngToLayerPoint(s[j]),c.extend(A[j]);o.push(A)}else for(j=0;j<m;j++)this._projectLatlngs(s[j],o,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,h,m,j,A,B,F;for(c=0,m=0,j=this._rings.length;c<j;c++)for(F=this._rings[c],h=0,A=F.length;h<A-1;h++)B=Qh(F[h],F[h+1],s,h,!0),B&&(o[m]=o[m]||[],o[m].push(B[0]),(B[1]!==F[h+1]||h===A-2)&&(o[m].push(B[1]),m++))}},_simplifyPoints:function(){for(var s=this._parts,o=this.options.smoothFactor,c=0,h=s.length;c<h;c++)s[c]=qh(s[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,o){var c,h,m,j,A,B,F=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,j=this._parts.length;c<j;c++)for(B=this._parts[c],h=0,A=B.length,m=A-1;h<A;m=h++)if(!(!o&&h===0)&&Kh(s,B[m],B[h])<=F)return!0;return!1}});function n_(s,o){return new Tr(s,o)}Tr._flat=Xh;var Yn=Tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var o=Tr.prototype._convertLatLngs.call(this,s),c=o.length;return c>=2&&o[0]instanceof Y&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(s){Tr.prototype._setLatLngs.call(this,s),Ft(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ft(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,o=this.options.weight,c=new $(o,o);if(s=new V(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,m=this._rings.length,j;h<m;h++)j=Vh(this._rings[h],s,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var o=!1,c,h,m,j,A,B,F,W;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(j=0,F=this._parts.length;j<F;j++)for(c=this._parts[j],A=0,W=c.length,B=W-1;A<W;B=A++)h=c[A],m=c[B],h.y>s.y!=m.y>s.y&&s.x<(m.x-h.x)*(s.y-h.y)/(m.y-h.y)+h.x&&(o=!o);return o||Tr.prototype._containsPoint.call(this,s,!0)}});function s_(s,o){return new Yn(s,o)}var Pr=Er.extend({initialize:function(s,o){C(this,o),this._layers={},s&&this.addData(s)},addData:function(s){var o=N(s)?s:s.features,c,h,m;if(o){for(c=0,h=o.length;c<h;c++)m=o[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var j=this.options;if(j.filter&&!j.filter(s))return this;var A=Ca(s,j);return A?(A.feature=Pa(s),A.defaultOptions=A.options,this.resetStyle(A),j.onEachFeature&&j.onEachFeature(s,A),this.addLayer(A)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=a({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(o){this._setLayerStyle(o,s)},this)},_setLayerStyle:function(s,o){s.setStyle&&(typeof o=="function"&&(o=o(s.feature)),s.setStyle(o))}});function Ca(s,o){var c=s.type==="Feature"?s.geometry:s,h=c?c.coordinates:null,m=[],j=o&&o.pointToLayer,A=o&&o.coordsToLatLng||ac,B,F,W,se;if(!h&&!c)return null;switch(c.type){case"Point":return B=A(h),tf(j,s,B,o);case"MultiPoint":for(W=0,se=h.length;W<se;W++)B=A(h[W]),m.push(tf(j,s,B,o));return new Er(m);case"LineString":case"MultiLineString":return F=Ea(h,c.type==="LineString"?0:1,A),new Tr(F,o);case"Polygon":case"MultiPolygon":return F=Ea(h,c.type==="Polygon"?1:2,A),new Yn(F,o);case"GeometryCollection":for(W=0,se=c.geometries.length;W<se;W++){var he=Ca({geometry:c.geometries[W],type:"Feature",properties:s.properties},o);he&&m.push(he)}return new Er(m);case"FeatureCollection":for(W=0,se=c.features.length;W<se;W++){var ye=Ca(c.features[W],o);ye&&m.push(ye)}return new Er(m);default:throw new Error("Invalid GeoJSON object.")}}function tf(s,o,c,h){return s?s(o,c):new Na(c,h&&h.markersInheritOptions&&h)}function ac(s){return new Y(s[1],s[0],s[2])}function Ea(s,o,c){for(var h=[],m=0,j=s.length,A;m<j;m++)A=o?Ea(s[m],o-1,c):(c||ac)(s[m]),h.push(A);return h}function oc(s,o){return s=re(s),s.alt!==void 0?[v(s.lng,o),v(s.lat,o),v(s.alt,o)]:[v(s.lng,o),v(s.lat,o)]}function Ta(s,o,c,h){for(var m=[],j=0,A=s.length;j<A;j++)m.push(o?Ta(s[j],Ft(s[j])?0:o-1,c,h):oc(s[j],h));return!o&&c&&m.length>0&&m.push(m[0].slice()),m}function es(s,o){return s.feature?a({},s.feature,{geometry:o}):Pa(o)}function Pa(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var lc={toGeoJSON:function(s){return es(this,{type:"Point",coordinates:oc(this.getLatLng(),s)})}};Na.include(lc),ic.include(lc),Sa.include(lc),Tr.include({toGeoJSON:function(s){var o=!Ft(this._latlngs),c=Ta(this._latlngs,o?1:0,!1,s);return es(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Yn.include({toGeoJSON:function(s){var o=!Ft(this._latlngs),c=o&&!Ft(this._latlngs[0]),h=Ta(this._latlngs,c?2:o?1:0,!0,s);return o||(h=[h]),es(this,{type:(c?"Multi":"")+"Polygon",coordinates:h})}}),Xn.include({toMultiPoint:function(s){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(s).geometry.coordinates)}),es(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(s){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(s);var c=o==="GeometryCollection",h=[];return this.eachLayer(function(m){if(m.toGeoJSON){var j=m.toGeoJSON(s);if(c)h.push(j.geometry);else{var A=Pa(j);A.type==="FeatureCollection"?h.push.apply(h,A.features):h.push(A)}}}),c?es(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function rf(s,o){return new Pr(s,o)}var i_=rf,La=er.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,o,c){this._url=s,this._bounds=H(o),C(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){De(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Gn(this._image),this},bringToBack:function(){return this._map&&Qn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=H(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",o=this._image=s?this._url:Te("img");if(xe(o,"leaflet-image-layer"),this._zoomAnimated&&xe(o,"leaflet-zoom-animated"),this.options.className&&xe(o,this.options.className),o.onselectstart=g,o.onmousemove=g,o.onload=d(this.fire,this,"load"),o.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(s){var o=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;jn(this._image,c,o)},_reset:function(){var s=this._image,o=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Ke(s,o.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){$t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),a_=function(s,o,c){return new La(s,o,c)},nf=La.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",o=this._image=s?this._url:Te("video");if(xe(o,"leaflet-image-layer"),this._zoomAnimated&&xe(o,"leaflet-zoom-animated"),this.options.className&&xe(o,this.options.className),o.onselectstart=g,o.onmousemove=g,o.onloadeddata=d(this.fire,this,"load"),s){for(var c=o.getElementsByTagName("source"),h=[],m=0;m<c.length;m++)h.push(c[m].src);this._url=c.length>0?h:[o.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var A=Te("source");A.src=this._url[j],o.appendChild(A)}}});function o_(s,o,c){return new nf(s,o,c)}var sf=La.extend({_initImage:function(){var s=this._image=this._url;xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function l_(s,o,c){return new sf(s,o,c)}var mr=er.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,o){s&&(s instanceof Y||N(s))?(this._latlng=re(s),C(this,o)):(C(this,s),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&$t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&$t(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?($t(this._container,0),this._removeTimeout=setTimeout(d(De,void 0,this._container),200)):De(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=re(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gn(this._container),this},bringToBack:function(){return this._map&&Qn(this._container),this},_prepareOpen:function(s){var o=this._source;if(!o._map)return!1;if(o instanceof Er){o=null;var c=this._source._layers;for(var h in c)if(c[h]._map){o=c[h];break}if(!o)return!1;this._source=o}if(!s)if(o.getCenter)s=o.getCenter();else if(o.getLatLng)s=o.getLatLng();else if(o.getBounds)s=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")s.innerHTML=o;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),o=T(this.options.offset),c=this._getAnchor();this._zoomAnimated?Ke(this._container,s.add(c)):o=o.add(s).add(c);var h=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(s,o,c,h){var m=o;return m instanceof s||(m=new s(h).setContent(o)),c&&m.setLatLng(c),m}}),er.include({_initOverlay:function(s,o,c,h){var m=c;return m instanceof s?(C(m,h),m._source=this):(m=o&&!h?o:new s(h,this),m.setContent(c)),m}});var Ma=mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mr.prototype.openOn.call(this,s)},onAdd:function(s){mr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Kr||this._source.on("preclick",Sn))},onRemove:function(s){mr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Kr||this._source.off("preclick",Sn))},getEvents:function(){var s=mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",o=this._container=Te("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Te("div",s+"-content-wrapper",o);if(this._contentNode=Te("div",s+"-content",c),ri(o),Xl(this._contentNode),pe(o,"contextmenu",Sn),this._tipContainer=Te("div",s+"-tip-container",o),this._tip=Te("div",s+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Te("a",s+"-close-button",o);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',pe(h,"click",function(m){st(m),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,o=s.style;o.width="",o.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var h=s.offsetHeight,m=this.options.maxHeight,j="leaflet-popup-scrolled";m&&h>m?(o.height=m+"px",xe(s,j)):Ze(s,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var o=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();Ke(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,o=parseInt(Js(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,h=this._containerWidth,m=new $(this._containerLeft,-c-this._containerBottom);m._add(Nn(this._container));var j=s.layerPointToContainerPoint(m),A=T(this.options.autoPanPadding),B=T(this.options.autoPanPaddingTopLeft||A),F=T(this.options.autoPanPaddingBottomRight||A),W=s.getSize(),se=0,he=0;j.x+h+F.x>W.x&&(se=j.x+h-W.x+F.x),j.x-se-B.x<0&&(se=j.x-B.x),j.y+c+F.y>W.y&&(he=j.y+c-W.y+F.y),j.y-he-B.y<0&&(he=j.y-B.y),(se||he)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,he]))}},_getAnchor:function(){return T(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),c_=function(s,o){return new Ma(s,o)};be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(s,o,c){return this._initOverlay(Ma,s,o,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),er.include({bindPopup:function(s,o){return this._popup=this._initOverlay(Ma,this._popup,s,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Er||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Cn(s);var o=s.layer||s.target;if(this._popup._source===o&&!(o instanceof Kr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=o,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Oa=mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",o=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Te("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var o,c,h=this._map,m=this._container,j=h.latLngToContainerPoint(h.getCenter()),A=h.layerPointToContainerPoint(s),B=this.options.direction,F=m.offsetWidth,W=m.offsetHeight,se=T(this.options.offset),he=this._getAnchor();B==="top"?(o=F/2,c=W):B==="bottom"?(o=F/2,c=0):B==="center"?(o=F/2,c=W/2):B==="right"?(o=0,c=W/2):B==="left"?(o=F,c=W/2):A.x<j.x?(B="right",o=0,c=W/2):(B="left",o=F+(se.x+he.x)*2,c=W/2),s=s.subtract(T(o,c,!0)).add(se).add(he),Ze(m,"leaflet-tooltip-right"),Ze(m,"leaflet-tooltip-left"),Ze(m,"leaflet-tooltip-top"),Ze(m,"leaflet-tooltip-bottom"),xe(m,"leaflet-tooltip-"+B),Ke(m,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&$t(this._container,s)},_animateZoom:function(s){var o=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(o)},_getAnchor:function(){return T(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),d_=function(s,o){return new Oa(s,o)};be.include({openTooltip:function(s,o,c){return this._initOverlay(Oa,s,o,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),er.include({bindTooltip:function(s,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Oa,this._tooltip,s,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var o=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Er||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var o=typeof s.getElement=="function"&&s.getElement();o&&(pe(o,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),pe(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var o=typeof s.getElement=="function"&&s.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var o=s.latlng,c,h;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),h=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var af=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var o=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(_a(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var h=T(c.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function u_(s){return new af(s)}Jn.Default=ii;var ai=er.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){C(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),De(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Qn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof $?s:new $(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var o=this.getPane().children,c=-s(-1/0,1/0),h=0,m=o.length,j;h<m;h++)j=o[h].style.zIndex,o[h]!==this._container&&j&&(c=s(c,+j));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){$t(this._container,this.options.opacity);var s=+new Date,o=!1,c=!1;for(var h in this._tiles){var m=this._tiles[h];if(!(!m.current||!m.loaded)){var j=Math.min(1,(s-m.loaded)/200);$t(m.el,j),j<1?o=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(ge(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,o=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=o-Math.abs(s-c),this._onUpdateLevel(c)):(De(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var h=this._levels[s],m=this._map;return h||(h=this._levels[s]={},h.el=Te("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=m.project(m.unproject(m.getPixelOrigin()),s).round(),h.zoom=s,this._setZoomTransform(h,m.getCenter(),m.getZoom()),g(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)o=this._tiles[s],o.retain=o.current;for(s in this._tiles)if(o=this._tiles[s],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var o in this._tiles)this._tiles[o].coords.z===s&&this._removeTile(o)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)De(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,o,c,h){var m=Math.floor(s/2),j=Math.floor(o/2),A=c-1,B=new $(+m,+j);B.z=+A;var F=this._tileCoordsToKey(B),W=this._tiles[F];return W&&W.active?(W.retain=!0,!0):(W&&W.loaded&&(W.retain=!0),A>h?this._retainParent(m,j,A,h):!1)},_retainChildren:function(s,o,c,h){for(var m=2*s;m<2*s+2;m++)for(var j=2*o;j<2*o+2;j++){var A=new $(m,j);A.z=c+1;var B=this._tileCoordsToKey(A),F=this._tiles[B];if(F&&F.active){F.retain=!0;continue}else F&&F.loaded&&(F.retain=!0);c+1<h&&this._retainChildren(m,j,c+1,h)}},_resetView:function(s){var o=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var o=this.options;return o.minNativeZoom!==void 0&&s<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<s?o.maxNativeZoom:s},_setView:function(s,o,c,h){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var j=this.options.updateWhenZooming&&m!==this._tileZoom;(!h||j)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,o)},_setZoomTransforms:function(s,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,o)},_setZoomTransform:function(s,o,c){var h=this._map.getZoomScale(c,s.zoom),m=s.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,c)).round();ce.any3d?jn(s.el,m,h):Ke(s.el,m)},_resetGrid:function(){var s=this._map,o=s.options.crs,c=this._tileSize=this.getTileSize(),h=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,o.wrapLng[0]],h).x/c.x),Math.ceil(s.project([0,o.wrapLng[1]],h).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([o.wrapLat[0],0],h).y/c.x),Math.ceil(s.project([o.wrapLat[1],0],h).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(c,this._tileZoom),m=o.project(s,this._tileZoom).floor(),j=o.getSize().divideBy(h*2);return new V(m.subtract(j),m.add(j))},_update:function(s){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(s===void 0&&(s=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(s),m=this._pxBoundsToTileRange(h),j=m.getCenter(),A=[],B=this.options.keepBuffer,F=new V(m.getBottomLeft().subtract([B,-B]),m.getTopRight().add([B,-B]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var W in this._tiles){var se=this._tiles[W].coords;(se.z!==this._tileZoom||!F.contains(new $(se.x,se.y)))&&(this._tiles[W].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var he=m.min.y;he<=m.max.y;he++)for(var ye=m.min.x;ye<=m.max.x;ye++){var gt=new $(ye,he);if(gt.z=this._tileZoom,!!this._isValidTile(gt)){var tt=this._tiles[this._tileCoordsToKey(gt)];tt?tt.current=!0:A.push(gt)}}if(A.sort(function(Nt,rs){return Nt.distanceTo(j)-rs.distanceTo(j)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ut=document.createDocumentFragment();for(ye=0;ye<A.length;ye++)this._addTile(A[ye],Ut);this._level.el.appendChild(Ut)}}}},_isValidTile:function(s){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!o.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(s);return H(this.options.bounds).overlaps(h)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var o=this._map,c=this.getTileSize(),h=s.scaleBy(c),m=h.add(c),j=o.unproject(h,s.z),A=o.unproject(m,s.z);return[j,A]},_tileCoordsToBounds:function(s){var o=this._tileCoordsToNwSe(s),c=new de(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var o=s.split(":"),c=new $(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(s){var o=this._tiles[s];o&&(De(o.el),delete this._tiles[s],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){xe(s,"leaflet-tile");var o=this.getTileSize();s.style.width=o.x+"px",s.style.height=o.y+"px",s.onselectstart=g,s.onmousemove=g,ce.ielt9&&this.options.opacity<1&&$t(s,this.options.opacity)},_addTile:function(s,o){var c=this._getTilePos(s),h=this._tileCoordsToKey(s),m=this.createTile(this._wrapCoords(s),d(this._tileReady,this,s));this._initTile(m),this.createTile.length<2&&ne(d(this._tileReady,this,s,null,m)),Ke(m,c),this._tiles[h]={el:m,coords:s,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:s})},_tileReady:function(s,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:s});var h=this._tileCoordsToKey(s);c=this._tiles[h],c&&(c.loaded=+new Date,this._map._fadeAnimated?($t(c.el,0),ge(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(xe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var o=new $(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return o.z=s.z,o},_pxBoundsToTileRange:function(s){var o=this.getTileSize();return new V(s.min.unscaleBy(o).floor(),s.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function h_(s){return new ai(s)}var ts=ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,o){this._url=s,o=C(this,o),o.detectRetina&&ce.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,o){return this._url===s&&o===void 0&&(o=!0),this._url=s,o||this.redraw(),this},createTile:function(s,o){var c=document.createElement("img");return pe(c,"load",d(this._tileOnLoad,this,o,c)),pe(c,"error",d(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var o={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(o.y=c),o["-y"]=c}return y(this._url,a(o,this.options))},_tileOnLoad:function(s,o){ce.ielt9?setTimeout(d(s,this,null,o),0):s(null,o)},_tileOnError:function(s,o,c){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),s(c,o)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,h=this.options.zoomOffset;return c&&(s=o-s),s+h},_getSubdomain:function(s){var o=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var s,o;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(o=this._tiles[s].el,o.onload=g,o.onerror=g,!o.complete)){o.src=M;var c=this._tiles[s].coords;De(o),delete this._tiles[s],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(s){var o=this._tiles[s];if(o)return o.el.setAttribute("src",M),ai.prototype._removeTile.call(this,s)},_tileReady:function(s,o,c){if(!(!this._map||c&&c.getAttribute("src")===M))return ai.prototype._tileReady.call(this,s,o,c)}});function of(s,o){return new ts(s,o)}var lf=ts.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,o){this._url=s;var c=a({},this.defaultWmsParams);for(var h in o)h in this.options||(c[h]=o[h]);o=C(this,o);var m=o.detectRetina&&ce.retina?2:1,j=this.getTileSize();c.width=j.x*m,c.height=j.y*m,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,ts.prototype.onAdd.call(this,s)},getTileUrl:function(s){var o=this._tileCoordsToNwSe(s),c=this._crs,h=q(c.project(o[0]),c.project(o[1])),m=h.min,j=h.max,A=(this._wmsVersion>=1.3&&this._crs===Yh?[m.y,m.x,j.y,j.x]:[m.x,m.y,j.x,j.y]).join(","),B=ts.prototype.getTileUrl.call(this,s);return B+E(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(s,o){return a(this.wmsParams,s),o||this.redraw(),this}});function f_(s,o){return new lf(s,o)}ts.WMS=lf,of.wms=f_;var Lr=er.extend({options:{padding:.1},initialize:function(s){C(this,s),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,o){var c=this._map.getZoomScale(o,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),j=h.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(s,o));ce.any3d?jn(this._container,j,c):Ke(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-s)).round();this._bounds=new V(c,c.add(o.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cf=Lr.extend({options:{tolerance:0},getEvents:function(){var s=Lr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");pe(s,"mousemove",this._onMouseMove,this),pe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){ge(this._redrawRequest),delete this._ctx,De(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var o in this._layers)s=this._layers[o],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var s=this._bounds,o=this._container,c=s.getSize(),h=ce.retina?2:1;Ke(o,s.min),o.width=h*c.x,o.height=h*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[p(s)]=s;var o=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var o=s._order,c=o.next,h=o.prev;c?c.prev=h:this._drawLast=h,h?h.next=c:this._drawFirst=c,delete s._order,delete this._layers[p(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var o=s.options.dashArray.split(/[, ]+/),c=[],h,m;for(m=0;m<o.length;m++){if(h=Number(o[m]),isNaN(h))return;c.push(h)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var o=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(s._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(s._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var o=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)s=h.layer,(!o||s._pxBounds&&s._pxBounds.intersects(o))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,o){if(this._drawing){var c,h,m,j,A=s._parts,B=A.length,F=this._ctx;if(B){for(F.beginPath(),c=0;c<B;c++){for(h=0,m=A[c].length;h<m;h++)j=A[c][h],F[h?"lineTo":"moveTo"](j.x,j.y);o&&F.closePath()}this._fillStroke(F,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var o=s._point,c=this._ctx,h=Math.max(Math.round(s._radius),1),m=(Math.max(Math.round(s._radiusY),1)||h)/h;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(o.x,o.y/m,h,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,o){var c=o.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(o.options&&o.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var o=this._map.mouseEventToLayerPoint(s),c,h,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(h=c);this._fireEvent(h?[h]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,o)}},_handleMouseOut:function(s){var o=this._hoveredLayer;o&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([o],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,o){if(!this._mouseHoverThrottled){for(var c,h,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(h=c);h!==this._hoveredLayer&&(this._handleMouseOut(s),h&&(xe(this._container,"leaflet-interactive"),this._fireEvent([h],s,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,o,c){this._map._fireDOMEvent(o,c||o.type,s)},_bringToFront:function(s){var o=s._order;if(o){var c=o.next,h=o.prev;if(c)c.prev=h;else return;h?h.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(s)}},_bringToBack:function(s){var o=s._order;if(o){var c=o.next,h=o.prev;if(h)h.next=c;else return;c?c.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(s)}}});function df(s){return ce.canvas?new cf(s):null}var oi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),p_={_initContainer:function(){this._container=Te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Lr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var o=s._container=oi("shape");xe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",s._path=oi("path"),o.appendChild(s._path),this._updateStyle(s),this._layers[p(s)]=s},_addPath:function(s){var o=s._container;this._container.appendChild(o),s.options.interactive&&s.addInteractiveTarget(o)},_removePath:function(s){var o=s._container;De(o),s.removeInteractiveTarget(o),delete this._layers[p(s)]},_updateStyle:function(s){var o=s._stroke,c=s._fill,h=s.options,m=s._container;m.stroked=!!h.stroke,m.filled=!!h.fill,h.stroke?(o||(o=s._stroke=oi("stroke")),m.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=N(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(m.removeChild(o),s._stroke=null),h.fill?(c||(c=s._fill=oi("fill")),m.appendChild(c),c.color=h.fillColor||h.color,c.opacity=h.fillOpacity):c&&(m.removeChild(c),s._fill=null)},_updateCircle:function(s){var o=s._point.round(),c=Math.round(s._radius),h=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+h+" 0,"+65535*360)},_setPath:function(s,o){s._path.v=o},_bringToFront:function(s){Gn(s._container)},_bringToBack:function(s){Qn(s._container)}},Aa=ce.vml?oi:Ae,li=Lr.extend({_initContainer:function(){this._container=Aa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Aa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){De(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var s=this._bounds,o=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Ke(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(s){var o=s._path=Aa("path");s.options.className&&xe(o,s.options.className),s.options.interactive&&xe(o,"leaflet-interactive"),this._updateStyle(s),this._layers[p(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){De(s._path),s.removeInteractiveTarget(s._path),delete this._layers[p(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var o=s._path,c=s.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(s,o){this._setPath(s,mt(s._parts,o))},_updateCircle:function(s){var o=s._point,c=Math.max(Math.round(s._radius),1),h=Math.max(Math.round(s._radiusY),1)||c,m="a"+c+","+h+" 0 1,0 ",j=s._empty()?"M0 0":"M"+(o.x-c)+","+o.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(s,j)},_setPath:function(s,o){s._path.setAttribute("d",o)},_bringToFront:function(s){Gn(s._path)},_bringToBack:function(s){Qn(s._path)}});ce.vml&&li.include(p_);function uf(s){return ce.svg||ce.vml?new li(s):null}be.include({getRenderer:function(s){var o=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var o=this._paneRenderers[s];return o===void 0&&(o=this._createRenderer({pane:s}),this._paneRenderers[s]=o),o},_createRenderer:function(s){return this.options.preferCanvas&&df(s)||uf(s)}});var hf=Yn.extend({initialize:function(s,o){Yn.prototype.initialize.call(this,this._boundsToLatLngs(s),o)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=H(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function m_(s,o){return new hf(s,o)}li.create=Aa,li.pointsToPath=mt,Pr.geometryToLayer=Ca,Pr.coordsToLatLng=ac,Pr.coordsToLatLngs=Ea,Pr.latLngToCoords=oc,Pr.latLngsToCoords=Ta,Pr.getFeature=es,Pr.asFeature=Pa,be.mergeOptions({boxZoom:!0});var ff=pr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){De(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ys(),Hl(),this._startPoint=this._map.mouseEventToContainerPoint(s),pe(document,{contextmenu:Cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Te("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var o=new V(this._point,this._startPoint),c=o.getSize();Ke(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(De(this._box),Ze(this._container,"leaflet-crosshair")),ei(),Zl(),Me(document,{contextmenu:Cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var o=new de(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",ff),be.mergeOptions({doubleClickZoom:!0});var pf=pr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var o=this._map,c=o.getZoom(),h=o.options.zoomDelta,m=s.originalEvent.shiftKey?c-h:c+h;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(s.containerPoint,m)}});be.addInitHook("addHandler","doubleClickZoom",pf),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mf=pr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new qr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=H(this._map.options.maxBounds);this._offsetLimit=q(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,o){return s-(s-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;s.x<o.min.x&&(s.x=this._viscousLimit(s.x,o.min.x)),s.y<o.min.y&&(s.y=this._viscousLimit(s.y,o.min.y)),s.x>o.max.x&&(s.x=this._viscousLimit(s.x,o.max.x)),s.y>o.max.y&&(s.y=this._viscousLimit(s.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,o=Math.round(s/2),c=this._initialWorldOffset,h=this._draggable._newPos.x,m=(h-o+c)%s+o-c,j=(h+o+c)%s-o-c,A=Math.abs(m+c)<Math.abs(j+c)?m:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(s){var o=this._map,c=o.options,h=!c.inertia||s.noInertia||this._times.length<2;if(o.fire("dragend",s),h)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,A=c.easeLinearity,B=m.multiplyBy(A/j),F=B.distanceTo([0,0]),W=Math.min(c.inertiaMaxSpeed,F),se=B.multiplyBy(W/F),he=W/(c.inertiaDeceleration*A),ye=se.multiplyBy(-he/2).round();!ye.x&&!ye.y?o.fire("moveend"):(ye=o._limitOffset(ye,o.options.maxBounds),ne(function(){o.panBy(ye,{duration:he,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",mf),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gf=pr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),pe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,o=document.documentElement,c=s.scrollTop||o.scrollTop,h=s.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var o=this._panKeys={},c=this.keyCodes,h,m;for(h=0,m=c.left.length;h<m;h++)o[c.left[h]]=[-1*s,0];for(h=0,m=c.right.length;h<m;h++)o[c.right[h]]=[s,0];for(h=0,m=c.down.length;h<m;h++)o[c.down[h]]=[0,s];for(h=0,m=c.up.length;h<m;h++)o[c.up[h]]=[0,-1*s]},_setZoomDelta:function(s){var o=this._zoomKeys={},c=this.keyCodes,h,m;for(h=0,m=c.zoomIn.length;h<m;h++)o[c.zoomIn[h]]=s;for(h=0,m=c.zoomOut.length;h<m;h++)o[c.zoomOut[h]]=-s},_addHooks:function(){pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var o=s.keyCode,c=this._map,h;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(h=this._panKeys[o],s.shiftKey&&(h=T(h).multiplyBy(3)),c.options.maxBounds&&(h=c._limitOffset(T(h),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(h)));c.panTo(m)}else c.panBy(h)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Cn(s)}}});be.addInitHook("addHandler","keyboard",gf),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xf=pr.extend({addHooks:function(){pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var o=$h(s),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var h=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),h),Cn(s)},_performZoom:function(){var s=this._map,o=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,j=c?Math.ceil(m/c)*c:m,A=s._limitZoom(o+(this._delta>0?j:-j))-o;this._delta=0,this._startTime=null,A&&(s.options.scrollWheelZoom==="center"?s.setZoom(o+A):s.setZoomAround(this._lastMousePos,o+A))}});be.addInitHook("addHandler","scrollWheelZoom",xf);var g_=600;be.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var yf=pr.extend({addHooks:function(){pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var o=s.touches[0];this._startPos=this._newPos=new $(o.clientX,o.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(pe(document,"touchend",st),pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),g_),pe(document,"touchend touchcancel contextmenu",this._cancel,this),pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Me(document,"touchend",st),Me(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(s){var o=s.touches[0];this._newPos=new $(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,o){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});be.addInitHook("addHandler","tapHold",yf),be.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var _f=pr.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var o=this._map;if(!(!s.touches||s.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(s.touches[0]),h=o.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(h)._divideBy(2))),this._startDist=c.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),pe(document,"touchmove",this._onTouchMove,this),pe(document,"touchend touchcancel",this._onTouchEnd,this),st(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(s.touches[0]),h=o.mouseEventToContainerPoint(s.touches[1]),m=c.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var j=c._add(h)._divideBy(2)._subtract(this._centerPoint);if(m===1&&j.x===0&&j.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),ge(this._animRequest);var A=d(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(A,this,!0),st(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ge(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",_f),be.BoxZoom=ff,be.DoubleClickZoom=pf,be.Drag=mf,be.Keyboard=gf,be.ScrollWheelZoom=xf,be.TapHold=yf,be.TouchZoom=_f,r.Bounds=V,r.Browser=ce,r.CRS=ue,r.Canvas=cf,r.Circle=ic,r.CircleMarker=Sa,r.Class=ee,r.Control=Yt,r.DivIcon=af,r.DivOverlay=mr,r.DomEvent=Ay,r.DomUtil=My,r.Draggable=qr,r.Evented=J,r.FeatureGroup=Er,r.GeoJSON=Pr,r.GridLayer=ai,r.Handler=pr,r.Icon=Jn,r.ImageOverlay=La,r.LatLng=Y,r.LatLngBounds=de,r.Layer=er,r.LayerGroup=Xn,r.LineUtil=qy,r.Map=be,r.Marker=Na,r.Mixin=Fy,r.Path=Kr,r.Point=$,r.PolyUtil=Uy,r.Polygon=Yn,r.Polyline=Tr,r.Popup=Ma,r.PosAnimation=Fh,r.Projection=Ky,r.Rectangle=hf,r.Renderer=Lr,r.SVG=li,r.SVGOverlay=sf,r.TileLayer=ts,r.Tooltip=Oa,r.Transformation=K,r.Util=z,r.VideoOverlay=nf,r.bind=d,r.bounds=q,r.canvas=df,r.circle=r_,r.circleMarker=t_,r.control=ni,r.divIcon=u_,r.extend=a,r.featureGroup=Jy,r.geoJSON=rf,r.geoJson=i_,r.gridLayer=h_,r.icon=Yy,r.imageOverlay=a_,r.latLng=re,r.latLngBounds=H,r.layerGroup=Xy,r.map=Ry,r.marker=e_,r.point=T,r.polygon=s_,r.polyline=n_,r.popup=c_,r.rectangle=m_,r.setOptions=C,r.stamp=p,r.svg=uf,r.svgOverlay=l_,r.tileLayer=of,r.tooltip=d_,r.transformation=je,r.version=i,r.videoOverlay=o_;var x_=window.L;r.noConflict=function(){return window.L=x_,this},window.L=r})})(qd,qd.exports);var Hs=qd.exports;const ca=au(Hs),ss=ym({__proto__:null,default:ca},[Hs]);function dh(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function uh(e,t){return t==null?function(i,a){const l=k.useRef();return l.current||(l.current=e(i,a)),l}:function(i,a){const l=k.useRef();l.current||(l.current=e(i,a));const d=k.useRef(i),{instance:f}=l.current;return k.useEffect(function(){d.current!==i&&(t(f,i,d.current),d.current=i)},[f,i,a]),l}}function kj(e,t){k.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function lx(e){return function(r){const i=ax(),a=e(ch(r,i),i);return nx(i.map,r.attribution),ox(a.current,r.eventHandlers),kj(a.current,i),a}}function jj(e,t){const r=uh(e,t),i=lx(r);return _j(i)}function Nj(e,t){const r=uh(e),i=wj(r,t);return vj(i)}function Sj(e,t){const r=uh(e,t),i=lx(r);return bj(i)}function Cj(e,t,r){const{opacity:i,zIndex:a}=t;i!=null&&i!==r.opacity&&e.setOpacity(i),a!=null&&a!==r.zIndex&&e.setZIndex(a)}function Kd(){return Kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Kd.apply(this,arguments)}function Ej({bounds:e,boundsOptions:t,center:r,children:i,className:a,id:l,placeholder:d,style:f,whenReady:p,zoom:x,..._},g){const[v]=k.useState({className:a,id:l,style:f}),[w,b]=k.useState(null);k.useImperativeHandle(g,()=>(w==null?void 0:w.map)??null,[w]);const C=k.useCallback(S=>{if(S!==null&&w===null){const y=new Hs.Map(S,_);r!=null&&x!=null?y.setView(r,x):e!=null&&y.fitBounds(e,t),p!=null&&y.whenReady(p),b(xj(y))}},[]);k.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const E=w?pn.createElement(ix,{value:w},i):d??null;return pn.createElement("div",Kd({},v,{ref:C}),E)}const cx=k.forwardRef(Ej),dx=jj(function({position:t,...r},i){const a=new Hs.Marker(t,r);return dh(a,yj(i,{overlayContainer:a}))},function(t,r,i){r.position!==i.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==i.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==i.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==i.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),ux=Nj(function(t,r){const i=new Hs.Popup(t,r.overlayContainer);return dh(i,r)},function(t,r,{position:i},a){k.useEffect(function(){const{instance:d}=t;function f(x){x.popup===d&&(d.update(),a(!0))}function p(x){x.popup===d&&a(!1)}return r.map.on({popupopen:f,popupclose:p}),r.overlayContainer==null?(i!=null&&d.setLatLng(i),d.openOn(r.map)):r.overlayContainer.bindPopup(d),function(){var _;r.map.off({popupopen:f,popupclose:p}),(_=r.overlayContainer)==null||_.unbindPopup(),r.map.removeLayer(d)}},[t,r,a,i])}),el=Sj(function({url:t,...r},i){const a=new Hs.TileLayer(t,ch(r,i));return dh(a,i)},function(t,r,i){Cj(t,r,i);const{url:a}=r;a!=null&&a!==i.url&&t.setUrl(a)}),Tj=new ca.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/61/61135.png",iconSize:[32,32]});function hx({bus:e}){return n.jsx(dx,{position:[e.lat,e.lng],icon:Tj,children:n.jsx(ux,{children:n.jsxs("div",{children:[n.jsx("strong",{children:e.id}),n.jsxs("div",{children:["Speed: ",e.speed??"-"," km/h"]}),n.jsxs("div",{children:["Students: ",e.students??"-"]})]})})})}const Pj=new ca.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/3135/3135755.png",iconSize:[28,28]}),Lj=new ca.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/61/61135.png",iconSize:[26,26]}),Mj=new ca.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/190/190411.png",iconSize:[24,24]});function Oj({student:e}){const{display_lat:t,display_lng:r,trip_status:i}=e;if(t==null||r==null)return null;let a=Pj;return i==="onboard"?a=Lj:i==="dropped"&&(a=Mj),n.jsx(dx,{position:[t,r],icon:a,children:n.jsx(ux,{children:n.jsxs("div",{children:[n.jsx("strong",{children:e.student_name}),e.stop_name&&n.jsxs("div",{children:["Stop: ",e.stop_name]}),n.jsxs("div",{children:["Status: ",i]})]})})})}function Aj({bus:e=null,students:t=[]}){const{isDark:r}=bl(),i=e&&e.current_lat&&e.current_lng?[e.current_lat,e.current_lng]:t.length&&t[0].display_lat&&t[0].display_lng?[t[0].display_lat,t[0].display_lng]:[10.762622,106.660172],a=e?{id:e.bus_id||e.id||e.bus_plate,lat:e.current_lat,lng:e.current_lng,speed:e.speed,students:e.students_onboard}:null;return n.jsxs(cx,{center:i,zoom:13,style:{height:"100%",width:"100%"},children:[r?n.jsx(el,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OSM</a> © <a href='https://carto.com/attributions'>CARTO</a>"}):n.jsx(el,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"}),a&&n.jsx(hx,{bus:a}),t&&t.map(l=>n.jsx(Oj,{student:l},l.student_id))]})}function fx(e,t){return function(){return e.apply(t,arguments)}}const{toString:Rj}=Object.prototype,{getPrototypeOf:hh}=Object,{iterator:kl,toStringTag:px}=Symbol,jl=(e=>t=>{const r=Rj.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ur=e=>(e=e.toLowerCase(),t=>jl(t)===e),Nl=e=>t=>typeof t===e,{isArray:Zs}=Array,Rs=Nl("undefined");function da(e){return e!==null&&!Rs(e)&&e.constructor!==null&&!Rs(e.constructor)&&Mt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mx=ur("ArrayBuffer");function zj(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mx(e.buffer),t}const Bj=Nl("string"),Mt=Nl("function"),gx=Nl("number"),ua=e=>e!==null&&typeof e=="object",Dj=e=>e===!0||e===!1,_o=e=>{if(jl(e)!=="object")return!1;const t=hh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(px in e)&&!(kl in e)},Ij=e=>{if(!ua(e)||da(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},$j=ur("Date"),Fj=ur("File"),Uj=ur("Blob"),Hj=ur("FileList"),Zj=e=>ua(e)&&Mt(e.pipe),Vj=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Mt(e.append)&&((t=jl(e))==="formdata"||t==="object"&&Mt(e.toString)&&e.toString()==="[object FormData]"))},Wj=ur("URLSearchParams"),[qj,Kj,Gj,Qj]=["ReadableStream","Request","Response","Headers"].map(ur),Xj=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ha(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),Zs(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(da(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),d=l.length;let f;for(i=0;i<d;i++)f=l[i],t.call(null,e[f],f,e)}}function xx(e,t){if(da(e))return null;t=t.toLowerCase();const r=Object.keys(e);let i=r.length,a;for(;i-- >0;)if(a=r[i],t===a.toLowerCase())return a;return null}const Rn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yx=e=>!Rs(e)&&e!==Rn;function Gd(){const{caseless:e,skipUndefined:t}=yx(this)&&this||{},r={},i=(a,l)=>{const d=e&&xx(r,l)||l;_o(r[d])&&_o(a)?r[d]=Gd(r[d],a):_o(a)?r[d]=Gd({},a):Zs(a)?r[d]=a.slice():(!t||!Rs(a))&&(r[d]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&ha(arguments[a],i);return r}const Jj=(e,t,r,{allOwnKeys:i}={})=>(ha(t,(a,l)=>{r&&Mt(a)?e[l]=fx(a,r):e[l]=a},{allOwnKeys:i}),e),Yj=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),eN=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},tN=(e,t,r,i)=>{let a,l,d;const f={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)d=a[l],(!i||i(d,e,t))&&!f[d]&&(t[d]=e[d],f[d]=!0);e=r!==!1&&hh(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},rN=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},nN=e=>{if(!e)return null;if(Zs(e))return e;let t=e.length;if(!gx(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},sN=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hh(Uint8Array)),iN=(e,t)=>{const i=(e&&e[kl]).call(e);let a;for(;(a=i.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},aN=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},oN=ur("HTMLFormElement"),lN=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,a){return i.toUpperCase()+a}),Wp=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),cN=ur("RegExp"),_x=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};ha(r,(a,l)=>{let d;(d=t(a,l,e))!==!1&&(i[l]=d||a)}),Object.defineProperties(e,i)},dN=e=>{_x(e,(t,r)=>{if(Mt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(Mt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},uN=(e,t)=>{const r={},i=a=>{a.forEach(l=>{r[l]=!0})};return Zs(e)?i(e):i(String(e).split(t)),r},hN=()=>{},fN=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pN(e){return!!(e&&Mt(e.append)&&e[px]==="FormData"&&e[kl])}const mN=e=>{const t=new Array(10),r=(i,a)=>{if(ua(i)){if(t.indexOf(i)>=0)return;if(da(i))return i;if(!("toJSON"in i)){t[a]=i;const l=Zs(i)?[]:{};return ha(i,(d,f)=>{const p=r(d,a+1);!Rs(p)&&(l[f]=p)}),t[a]=void 0,l}}return i};return r(e,0)},gN=ur("AsyncFunction"),xN=e=>e&&(ua(e)||Mt(e))&&Mt(e.then)&&Mt(e.catch),vx=((e,t)=>e?setImmediate:t?((r,i)=>(Rn.addEventListener("message",({source:a,data:l})=>{a===Rn&&l===r&&i.length&&i.shift()()},!1),a=>{i.push(a),Rn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Mt(Rn.postMessage)),yN=typeof queueMicrotask<"u"?queueMicrotask.bind(Rn):typeof process<"u"&&process.nextTick||vx,_N=e=>e!=null&&Mt(e[kl]),U={isArray:Zs,isArrayBuffer:mx,isBuffer:da,isFormData:Vj,isArrayBufferView:zj,isString:Bj,isNumber:gx,isBoolean:Dj,isObject:ua,isPlainObject:_o,isEmptyObject:Ij,isReadableStream:qj,isRequest:Kj,isResponse:Gj,isHeaders:Qj,isUndefined:Rs,isDate:$j,isFile:Fj,isBlob:Uj,isRegExp:cN,isFunction:Mt,isStream:Zj,isURLSearchParams:Wj,isTypedArray:sN,isFileList:Hj,forEach:ha,merge:Gd,extend:Jj,trim:Xj,stripBOM:Yj,inherits:eN,toFlatObject:tN,kindOf:jl,kindOfTest:ur,endsWith:rN,toArray:nN,forEachEntry:iN,matchAll:aN,isHTMLForm:oN,hasOwnProperty:Wp,hasOwnProp:Wp,reduceDescriptors:_x,freezeMethods:dN,toObjectSet:uN,toCamelCase:lN,noop:hN,toFiniteNumber:fN,findKey:xx,global:Rn,isContextDefined:yx,isSpecCompliantForm:pN,toJSONObject:mN,isAsyncFn:gN,isThenable:xN,setImmediate:vx,asap:yN,isIterable:_N};function me(e,t,r,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}U.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const bx=me.prototype,wx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wx[e]={value:e}});Object.defineProperties(me,wx);Object.defineProperty(bx,"isAxiosError",{value:!0});me.from=(e,t,r,i,a,l)=>{const d=Object.create(bx);U.toFlatObject(e,d,function(_){return _!==Error.prototype},x=>x!=="isAxiosError");const f=e&&e.message?e.message:"Error",p=t==null&&e?e.code:t;return me.call(d,f,p,r,i,a),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",l&&Object.assign(d,l),d};const vN=null;function Qd(e){return U.isPlainObject(e)||U.isArray(e)}function kx(e){return U.endsWith(e,"[]")?e.slice(0,-2):e}function qp(e,t,r){return e?e.concat(t).map(function(a,l){return a=kx(a),!r&&l?"["+a+"]":a}).join(r?".":""):t}function bN(e){return U.isArray(e)&&!e.some(Qd)}const wN=U.toFlatObject(U,{},null,function(t){return/^is[A-Z]/.test(t)});function Sl(e,t,r){if(!U.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=U.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,E){return!U.isUndefined(E[C])});const i=r.metaTokens,a=r.visitor||_,l=r.dots,d=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(a))throw new TypeError("visitor must be a function");function x(b){if(b===null)return"";if(U.isDate(b))return b.toISOString();if(U.isBoolean(b))return b.toString();if(!p&&U.isBlob(b))throw new me("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(b)||U.isTypedArray(b)?p&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function _(b,C,E){let S=b;if(b&&!E&&typeof b=="object"){if(U.endsWith(C,"{}"))C=i?C:C.slice(0,-2),b=JSON.stringify(b);else if(U.isArray(b)&&bN(b)||(U.isFileList(b)||U.endsWith(C,"[]"))&&(S=U.toArray(b)))return C=kx(C),S.forEach(function(N,R){!(U.isUndefined(N)||N===null)&&t.append(d===!0?qp([C],R,l):d===null?C:C+"[]",x(N))}),!1}return Qd(b)?!0:(t.append(qp(E,C,l),x(b)),!1)}const g=[],v=Object.assign(wN,{defaultVisitor:_,convertValue:x,isVisitable:Qd});function w(b,C){if(!U.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+C.join("."));g.push(b),U.forEach(b,function(S,y){(!(U.isUndefined(S)||S===null)&&a.call(t,S,U.isString(y)?y.trim():y,C,v))===!0&&w(S,C?C.concat(y):[y])}),g.pop()}}if(!U.isObject(e))throw new TypeError("data must be an object");return w(e),t}function Kp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function fh(e,t){this._pairs=[],e&&Sl(e,this,t)}const jx=fh.prototype;jx.append=function(t,r){this._pairs.push([t,r])};jx.toString=function(t){const r=t?function(i){return t.call(this,i,Kp)}:Kp;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function kN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Nx(e,t,r){if(!t)return e;const i=r&&r.encode||kN;U.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let l;if(a?l=a(t,r):l=U.isURLSearchParams(t)?t.toString():new fh(t,r).toString(i),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Gp{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){U.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Sx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jN=typeof URLSearchParams<"u"?URLSearchParams:fh,NN=typeof FormData<"u"?FormData:null,SN=typeof Blob<"u"?Blob:null,CN={isBrowser:!0,classes:{URLSearchParams:jN,FormData:NN,Blob:SN},protocols:["http","https","file","blob","url","data"]},ph=typeof window<"u"&&typeof document<"u",Xd=typeof navigator=="object"&&navigator||void 0,EN=ph&&(!Xd||["ReactNative","NativeScript","NS"].indexOf(Xd.product)<0),TN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PN=ph&&window.location.href||"http://localhost",LN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ph,hasStandardBrowserEnv:EN,hasStandardBrowserWebWorkerEnv:TN,navigator:Xd,origin:PN},Symbol.toStringTag,{value:"Module"})),ft={...LN,...CN};function MN(e,t){return Sl(e,new ft.classes.URLSearchParams,{visitor:function(r,i,a,l){return ft.isNode&&U.isBuffer(r)?(this.append(i,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function ON(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function AN(e){const t={},r=Object.keys(e);let i;const a=r.length;let l;for(i=0;i<a;i++)l=r[i],t[l]=e[l];return t}function Cx(e){function t(r,i,a,l){let d=r[l++];if(d==="__proto__")return!0;const f=Number.isFinite(+d),p=l>=r.length;return d=!d&&U.isArray(a)?a.length:d,p?(U.hasOwnProp(a,d)?a[d]=[a[d],i]:a[d]=i,!f):((!a[d]||!U.isObject(a[d]))&&(a[d]=[]),t(r,i,a[d],l)&&U.isArray(a[d])&&(a[d]=AN(a[d])),!f)}if(U.isFormData(e)&&U.isFunction(e.entries)){const r={};return U.forEachEntry(e,(i,a)=>{t(ON(i),a,r,0)}),r}return null}function RN(e,t,r){if(U.isString(e))try{return(t||JSON.parse)(e),U.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const fa={transitional:Sx,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",a=i.indexOf("application/json")>-1,l=U.isObject(t);if(l&&U.isHTMLForm(t)&&(t=new FormData(t)),U.isFormData(t))return a?JSON.stringify(Cx(t)):t;if(U.isArrayBuffer(t)||U.isBuffer(t)||U.isStream(t)||U.isFile(t)||U.isBlob(t)||U.isReadableStream(t))return t;if(U.isArrayBufferView(t))return t.buffer;if(U.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return MN(t,this.formSerializer).toString();if((f=U.isFileList(t))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Sl(f?{"files[]":t}:t,p&&new p,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),RN(t)):t}],transformResponse:[function(t){const r=this.transitional||fa.transitional,i=r&&r.forcedJSONParsing,a=this.responseType==="json";if(U.isResponse(t)||U.isReadableStream(t))return t;if(t&&U.isString(t)&&(i&&!this.responseType||a)){const d=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(f){if(d)throw f.name==="SyntaxError"?me.from(f,me.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ft.classes.FormData,Blob:ft.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],e=>{fa.headers[e]={}});const zN=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BN=e=>{const t={};let r,i,a;return e&&e.split(`
`).forEach(function(d){a=d.indexOf(":"),r=d.substring(0,a).trim().toLowerCase(),i=d.substring(a+1).trim(),!(!r||t[r]&&zN[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},Qp=Symbol("internals");function xi(e){return e&&String(e).trim().toLowerCase()}function vo(e){return e===!1||e==null?e:U.isArray(e)?e.map(vo):String(e)}function DN(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const IN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $c(e,t,r,i,a){if(U.isFunction(i))return i.call(this,t,r);if(a&&(t=r),!!U.isString(t)){if(U.isString(i))return t.indexOf(i)!==-1;if(U.isRegExp(i))return i.test(t)}}function $N(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function FN(e,t){const r=U.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(a,l,d){return this[i].call(this,t,a,l,d)},configurable:!0})})}let Ot=class{constructor(t){t&&this.set(t)}set(t,r,i){const a=this;function l(f,p,x){const _=xi(p);if(!_)throw new Error("header name must be a non-empty string");const g=U.findKey(a,_);(!g||a[g]===void 0||x===!0||x===void 0&&a[g]!==!1)&&(a[g||p]=vo(f))}const d=(f,p)=>U.forEach(f,(x,_)=>l(x,_,p));if(U.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(U.isString(t)&&(t=t.trim())&&!IN(t))d(BN(t),r);else if(U.isObject(t)&&U.isIterable(t)){let f={},p,x;for(const _ of t){if(!U.isArray(_))throw TypeError("Object iterator must return a key-value pair");f[x=_[0]]=(p=f[x])?U.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}d(f,r)}else t!=null&&l(r,t,i);return this}get(t,r){if(t=xi(t),t){const i=U.findKey(this,t);if(i){const a=this[i];if(!r)return a;if(r===!0)return DN(a);if(U.isFunction(r))return r.call(this,a,i);if(U.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=xi(t),t){const i=U.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||$c(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let a=!1;function l(d){if(d=xi(d),d){const f=U.findKey(i,d);f&&(!r||$c(i,i[f],f,r))&&(delete i[f],a=!0)}}return U.isArray(t)?t.forEach(l):l(t),a}clear(t){const r=Object.keys(this);let i=r.length,a=!1;for(;i--;){const l=r[i];(!t||$c(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const r=this,i={};return U.forEach(this,(a,l)=>{const d=U.findKey(i,l);if(d){r[d]=vo(a),delete r[l];return}const f=t?$N(l):String(l).trim();f!==l&&delete r[l],r[f]=vo(a),i[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return U.forEach(this,(i,a)=>{i!=null&&i!==!1&&(r[a]=t&&U.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[Qp]=this[Qp]={accessors:{}}).accessors,a=this.prototype;function l(d){const f=xi(d);i[f]||(FN(a,d),i[f]=!0)}return U.isArray(t)?t.forEach(l):l(t),this}};Ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(Ot.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});U.freezeMethods(Ot);function Fc(e,t){const r=this||fa,i=t||r,a=Ot.from(i.headers);let l=i.data;return U.forEach(e,function(f){l=f.call(r,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Ex(e){return!!(e&&e.__CANCEL__)}function Vs(e,t,r){me.call(this,e??"canceled",me.ERR_CANCELED,t,r),this.name="CanceledError"}U.inherits(Vs,me,{__CANCEL__:!0});function Tx(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new me("Request failed with status code "+r.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function UN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function HN(e,t){e=e||10;const r=new Array(e),i=new Array(e);let a=0,l=0,d;return t=t!==void 0?t:1e3,function(p){const x=Date.now(),_=i[l];d||(d=x),r[a]=p,i[a]=x;let g=l,v=0;for(;g!==a;)v+=r[g++],g=g%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),x-d<t)return;const w=_&&x-_;return w?Math.round(v*1e3/w):void 0}}function ZN(e,t){let r=0,i=1e3/t,a,l;const d=(x,_=Date.now())=>{r=_,a=null,l&&(clearTimeout(l),l=null),e(...x)};return[(...x)=>{const _=Date.now(),g=_-r;g>=i?d(x,_):(a=x,l||(l=setTimeout(()=>{l=null,d(a)},i-g)))},()=>a&&d(a)]}const tl=(e,t,r=3)=>{let i=0;const a=HN(50,250);return ZN(l=>{const d=l.loaded,f=l.lengthComputable?l.total:void 0,p=d-i,x=a(p),_=d<=f;i=d;const g={loaded:d,total:f,progress:f?d/f:void 0,bytes:p,rate:x||void 0,estimated:x&&f&&_?(f-d)/x:void 0,event:l,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(g)},r)},Xp=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},Jp=e=>(...t)=>U.asap(()=>e(...t)),VN=ft.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ft.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ft.origin),ft.navigator&&/(msie|trident)/i.test(ft.navigator.userAgent)):()=>!0,WN=ft.hasStandardBrowserEnv?{write(e,t,r,i,a,l){const d=[e+"="+encodeURIComponent(t)];U.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),U.isString(i)&&d.push("path="+i),U.isString(a)&&d.push("domain="+a),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function KN(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Px(e,t,r){let i=!qN(t);return e&&(i||r==!1)?KN(e,t):t}const Yp=e=>e instanceof Ot?{...e}:e;function Zn(e,t){t=t||{};const r={};function i(x,_,g,v){return U.isPlainObject(x)&&U.isPlainObject(_)?U.merge.call({caseless:v},x,_):U.isPlainObject(_)?U.merge({},_):U.isArray(_)?_.slice():_}function a(x,_,g,v){if(U.isUndefined(_)){if(!U.isUndefined(x))return i(void 0,x,g,v)}else return i(x,_,g,v)}function l(x,_){if(!U.isUndefined(_))return i(void 0,_)}function d(x,_){if(U.isUndefined(_)){if(!U.isUndefined(x))return i(void 0,x)}else return i(void 0,_)}function f(x,_,g){if(g in t)return i(x,_);if(g in e)return i(void 0,x)}const p={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:f,headers:(x,_,g)=>a(Yp(x),Yp(_),g,!0)};return U.forEach(Object.keys({...e,...t}),function(_){const g=p[_]||a,v=g(e[_],t[_],_);U.isUndefined(v)&&g!==f||(r[_]=v)}),r}const Lx=e=>{const t=Zn({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:d,auth:f}=t;if(t.headers=d=Ot.from(d),t.url=Nx(Px(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),f&&d.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),U.isFormData(r)){if(ft.hasStandardBrowserEnv||ft.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(U.isFunction(r.getHeaders)){const p=r.getHeaders(),x=["content-type","content-length"];Object.entries(p).forEach(([_,g])=>{x.includes(_.toLowerCase())&&d.set(_,g)})}}if(ft.hasStandardBrowserEnv&&(i&&U.isFunction(i)&&(i=i(t)),i||i!==!1&&VN(t.url))){const p=a&&l&&WN.read(l);p&&d.set(a,p)}return t},GN=typeof XMLHttpRequest<"u",QN=GN&&function(e){return new Promise(function(r,i){const a=Lx(e);let l=a.data;const d=Ot.from(a.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:x}=a,_,g,v,w,b;function C(){w&&w(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(_),a.signal&&a.signal.removeEventListener("abort",_)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function S(){if(!E)return;const N=Ot.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),M={data:!f||f==="text"||f==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:N,config:e,request:E};Tx(function(O){r(O),C()},function(O){i(O),C()},M),E=null}"onloadend"in E?E.onloadend=S:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(S)},E.onabort=function(){E&&(i(new me("Request aborted",me.ECONNABORTED,e,E)),E=null)},E.onerror=function(R){const M=R&&R.message?R.message:"Network Error",D=new me(M,me.ERR_NETWORK,e,E);D.event=R||null,i(D),E=null},E.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const M=a.transitional||Sx;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),i(new me(R,M.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,e,E)),E=null},l===void 0&&d.setContentType(null),"setRequestHeader"in E&&U.forEach(d.toJSON(),function(R,M){E.setRequestHeader(M,R)}),U.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),f&&f!=="json"&&(E.responseType=a.responseType),x&&([v,b]=tl(x,!0),E.addEventListener("progress",v)),p&&E.upload&&([g,w]=tl(p),E.upload.addEventListener("progress",g),E.upload.addEventListener("loadend",w)),(a.cancelToken||a.signal)&&(_=N=>{E&&(i(!N||N.type?new Vs(null,e,E):N),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(_),a.signal&&(a.signal.aborted?_():a.signal.addEventListener("abort",_)));const y=UN(a.url);if(y&&ft.protocols.indexOf(y)===-1){i(new me("Unsupported protocol "+y+":",me.ERR_BAD_REQUEST,e));return}E.send(l||null)})},XN=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,a;const l=function(x){if(!a){a=!0,f();const _=x instanceof Error?x:this.reason;i.abort(_ instanceof me?_:new Vs(_ instanceof Error?_.message:_))}};let d=t&&setTimeout(()=>{d=null,l(new me(`timeout ${t} of ms exceeded`,me.ETIMEDOUT))},t);const f=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(x=>{x.unsubscribe?x.unsubscribe(l):x.removeEventListener("abort",l)}),e=null)};e.forEach(x=>x.addEventListener("abort",l));const{signal:p}=i;return p.unsubscribe=()=>U.asap(f),p}},JN=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,a;for(;i<r;)a=i+t,yield e.slice(i,a),i=a},YN=async function*(e,t){for await(const r of e2(e))yield*JN(r,t)},e2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},em=(e,t,r,i)=>{const a=YN(e,t);let l=0,d,f=p=>{d||(d=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:x,value:_}=await a.next();if(x){f(),p.close();return}let g=_.byteLength;if(r){let v=l+=g;r(v)}p.enqueue(new Uint8Array(_))}catch(x){throw f(x),x}},cancel(p){return f(p),a.return()}},{highWaterMark:2})},tm=64*1024,{isFunction:Ya}=U,t2=(({Request:e,Response:t})=>({Request:e,Response:t}))(U.global),{ReadableStream:rm,TextEncoder:nm}=U.global,sm=(e,...t)=>{try{return!!e(...t)}catch{return!1}},r2=e=>{e=U.merge.call({skipUndefined:!0},t2,e);const{fetch:t,Request:r,Response:i}=e,a=t?Ya(t):typeof fetch=="function",l=Ya(r),d=Ya(i);if(!a)return!1;const f=a&&Ya(rm),p=a&&(typeof nm=="function"?(b=>C=>b.encode(C))(new nm):async b=>new Uint8Array(await new r(b).arrayBuffer())),x=l&&f&&sm(()=>{let b=!1;const C=new r(ft.origin,{body:new rm,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!C}),_=d&&f&&sm(()=>U.isReadableStream(new i("").body)),g={stream:_&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!g[b]&&(g[b]=(C,E)=>{let S=C&&C[b];if(S)return S.call(C);throw new me(`Response type '${b}' is not supported`,me.ERR_NOT_SUPPORT,E)})});const v=async b=>{if(b==null)return 0;if(U.isBlob(b))return b.size;if(U.isSpecCompliantForm(b))return(await new r(ft.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(U.isArrayBufferView(b)||U.isArrayBuffer(b))return b.byteLength;if(U.isURLSearchParams(b)&&(b=b+""),U.isString(b))return(await p(b)).byteLength},w=async(b,C)=>{const E=U.toFiniteNumber(b.getContentLength());return E??v(C)};return async b=>{let{url:C,method:E,data:S,signal:y,cancelToken:N,timeout:R,onDownloadProgress:M,onUploadProgress:D,responseType:O,headers:P,withCredentials:G="same-origin",fetchOptions:I}=Lx(b),ne=t||fetch;O=O?(O+"").toLowerCase():"text";let ge=XN([y,N&&N.toAbortSignal()],R),z=null;const ee=ge&&ge.unsubscribe&&(()=>{ge.unsubscribe()});let oe;try{if(D&&x&&E!=="get"&&E!=="head"&&(oe=await w(P,S))!==0){let V=new r(C,{method:"POST",body:S,duplex:"half"}),q;if(U.isFormData(S)&&(q=V.headers.get("content-type"))&&P.setContentType(q),V.body){const[de,H]=Xp(oe,tl(Jp(D)));S=em(V.body,tm,de,H)}}U.isString(G)||(G=G?"include":"omit");const ie=l&&"credentials"in r.prototype,J={...I,signal:ge,method:E.toUpperCase(),headers:P.normalize().toJSON(),body:S,duplex:"half",credentials:ie?G:void 0};z=l&&new r(C,J);let $=await(l?ne(z,I):ne(C,J));const te=_&&(O==="stream"||O==="response");if(_&&(M||te&&ee)){const V={};["status","statusText","headers"].forEach(Y=>{V[Y]=$[Y]});const q=U.toFiniteNumber($.headers.get("content-length")),[de,H]=M&&Xp(q,tl(Jp(M),!0))||[];$=new i(em($.body,tm,de,()=>{H&&H(),ee&&ee()}),V)}O=O||"text";let T=await g[U.findKey(g,O)||"text"]($,b);return!te&&ee&&ee(),await new Promise((V,q)=>{Tx(V,q,{data:T,headers:Ot.from($.headers),status:$.status,statusText:$.statusText,config:b,request:z})})}catch(ie){throw ee&&ee(),ie&&ie.name==="TypeError"&&/Load failed|fetch/i.test(ie.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,b,z),{cause:ie.cause||ie}):me.from(ie,ie&&ie.code,b,z)}}},n2=new Map,Mx=e=>{let t=e?e.env:{};const{fetch:r,Request:i,Response:a}=t,l=[i,a,r];let d=l.length,f=d,p,x,_=n2;for(;f--;)p=l[f],x=_.get(p),x===void 0&&_.set(p,x=f?new Map:r2(t)),_=x;return x};Mx();const Jd={http:vN,xhr:QN,fetch:{get:Mx}};U.forEach(Jd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const im=e=>`- ${e}`,s2=e=>U.isFunction(e)||e===null||e===!1,Ox={getAdapter:(e,t)=>{e=U.isArray(e)?e:[e];const{length:r}=e;let i,a;const l={};for(let d=0;d<r;d++){i=e[d];let f;if(a=i,!s2(i)&&(a=Jd[(f=String(i)).toLowerCase()],a===void 0))throw new me(`Unknown adapter '${f}'`);if(a&&(U.isFunction(a)||(a=a.get(t))))break;l[f||"#"+d]=a}if(!a){const d=Object.entries(l).map(([p,x])=>`adapter ${p} `+(x===!1?"is not supported by the environment":"is not available in the build"));let f=r?d.length>1?`since :
`+d.map(im).join(`
`):" "+im(d[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return a},adapters:Jd};function Uc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vs(null,e)}function am(e){return Uc(e),e.headers=Ot.from(e.headers),e.data=Fc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ox.getAdapter(e.adapter||fa.adapter,e)(e).then(function(i){return Uc(e),i.data=Fc.call(e,e.transformResponse,i),i.headers=Ot.from(i.headers),i},function(i){return Ex(i)||(Uc(e),i&&i.response&&(i.response.data=Fc.call(e,e.transformResponse,i.response),i.response.headers=Ot.from(i.response.headers))),Promise.reject(i)})}const Ax="1.12.2",Cl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Cl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const om={};Cl.transitional=function(t,r,i){function a(l,d){return"[Axios v"+Ax+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return(l,d,f)=>{if(t===!1)throw new me(a(d," has been removed"+(r?" in "+r:"")),me.ERR_DEPRECATED);return r&&!om[d]&&(om[d]=!0,console.warn(a(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,d,f):!0}};Cl.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function i2(e,t,r){if(typeof e!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const l=i[a],d=t[l];if(d){const f=e[l],p=f===void 0||d(f,l,e);if(p!==!0)throw new me("option "+l+" must be "+p,me.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new me("Unknown option "+l,me.ERR_BAD_OPTION)}}const bo={assertOptions:i2,validators:Cl},xr=bo.validators;let Dn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Gp,response:new Gp}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Zn(this.defaults,r);const{transitional:i,paramsSerializer:a,headers:l}=r;i!==void 0&&bo.assertOptions(i,{silentJSONParsing:xr.transitional(xr.boolean),forcedJSONParsing:xr.transitional(xr.boolean),clarifyTimeoutError:xr.transitional(xr.boolean)},!1),a!=null&&(U.isFunction(a)?r.paramsSerializer={serialize:a}:bo.assertOptions(a,{encode:xr.function,serialize:xr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),bo.assertOptions(r,{baseUrl:xr.spelling("baseURL"),withXsrfToken:xr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=l&&U.merge(l.common,l[r.method]);l&&U.forEach(["delete","get","head","post","put","patch","common"],b=>{delete l[b]}),r.headers=Ot.concat(d,l);const f=[];let p=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(r)===!1||(p=p&&C.synchronous,f.unshift(C.fulfilled,C.rejected))});const x=[];this.interceptors.response.forEach(function(C){x.push(C.fulfilled,C.rejected)});let _,g=0,v;if(!p){const b=[am.bind(this),void 0];for(b.unshift(...f),b.push(...x),v=b.length,_=Promise.resolve(r);g<v;)_=_.then(b[g++],b[g++]);return _}v=f.length;let w=r;for(;g<v;){const b=f[g++],C=f[g++];try{w=b(w)}catch(E){C.call(this,E);break}}try{_=am.call(this,w)}catch(b){return Promise.reject(b)}for(g=0,v=x.length;g<v;)_=_.then(x[g++],x[g++]);return _}getUri(t){t=Zn(this.defaults,t);const r=Px(t.baseURL,t.url,t.allowAbsoluteUrls);return Nx(r,t.params,t.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(t){Dn.prototype[t]=function(r,i){return this.request(Zn(i||{},{method:t,url:r,data:(i||{}).data}))}});U.forEach(["post","put","patch"],function(t){function r(i){return function(l,d,f){return this.request(Zn(f||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}Dn.prototype[t]=r(),Dn.prototype[t+"Form"]=r(!0)});let a2=class Rx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const d=new Promise(f=>{i.subscribe(f),l=f}).then(a);return d.cancel=function(){i.unsubscribe(l)},d},t(function(l,d,f){i.reason||(i.reason=new Vs(l,d,f),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Rx(function(a){t=a}),cancel:t}}};function o2(e){return function(r){return e.apply(null,r)}}function l2(e){return U.isObject(e)&&e.isAxiosError===!0}const Yd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yd).forEach(([e,t])=>{Yd[t]=e});function zx(e){const t=new Dn(e),r=fx(Dn.prototype.request,t);return U.extend(r,Dn.prototype,t,{allOwnKeys:!0}),U.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return zx(Zn(e,a))},r}const We=zx(fa);We.Axios=Dn;We.CanceledError=Vs;We.CancelToken=a2;We.isCancel=Ex;We.VERSION=Ax;We.toFormData=Sl;We.AxiosError=me;We.Cancel=We.CanceledError;We.all=function(t){return Promise.all(t)};We.spread=o2;We.isAxiosError=l2;We.mergeConfig=Zn;We.AxiosHeaders=Ot;We.formToJSON=e=>Cx(U.isHTMLForm(e)?new FormData(e):e);We.getAdapter=Ox.getAdapter;We.HttpStatusCode=Yd;We.default=We;const{Axios:s4,AxiosError:i4,CanceledError:a4,isCancel:o4,CancelToken:l4,VERSION:c4,all:d4,Cancel:u4,isAxiosError:h4,spread:f4,toFormData:p4,AxiosHeaders:m4,HttpStatusCode:g4,formToJSON:x4,getAdapter:y4,mergeConfig:_4}=We;function c2(e){let t=e.trim();return t?(t.startsWith(":")&&(t=`http://localhost${t}`),/^https?:\/\//i.test(t)||(t=`http://${t.replace(/^\/+/,"")}`),t):"http://localhost:25565/api"}const d2=c2("http://localhost:25565/api")||"http://localhost:25565/api",le=We.create({baseURL:d2,timeout:1e4,headers:{"Content-Type":"application/json"}});le.interceptors.request.use(e=>{const t=sessionStorage.getItem("token")||localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));le.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const Ai=async()=>{try{return(await le.get("/trips/my-schedule")).data}catch(e){throw console.error("Error fetching driver schedule:",e),e}},Ns=async e=>{try{return(await le.get(`/trips/schedule/${e}/students`)).data}catch(t){throw console.error("Error fetching schedule students:",t),t}},mh=async(e,t,r=null)=>{try{return(await le.put(`/trips/${e}/status`,{status:t,notes:r})).data}catch(i){throw console.error("Error updating trip status:",i),i}},u2=async(e,t,r=0,i=0,a=10)=>{try{return(await le.post("/trips/location",{lat:e,lng:t,speed:r,heading:i,accuracy:a})).data}catch(l){throw console.error("Error updating location:",l),l}},Bx=async e=>{try{return(await le.post(`/trips/schedule/${e}/start`)).data}catch(t){throw console.error("Error starting trip:",t),t}},Dx=async e=>{try{return(await le.post(`/trips/schedule/${e}/complete`)).data}catch(t){throw console.error("Error completing trip:",t),t}},h2=async()=>{try{return(await le.get("/trips/admin/active-drivers")).data}catch(e){throw console.error("Error fetching active drivers (admin):",e),e}},lm=async e=>{try{return(await le.get(`/trips/admin/schedule/${e}/students`)).data}catch(t){throw console.error("Error fetching schedule students (admin):",t),t}};function f2(){const{lang:e}=ke(),[t,r]=k.useState([]),[i,a]=k.useState(!0),[l,d]=k.useState(null),[f,p]=k.useState([]);k.useEffect(()=>{x();const v=setInterval(x,1e4);return()=>clearInterval(v)},[]),k.useEffect(()=>{if(!(l!=null&&l.schedule_id))return;const v=async()=>{try{const b=await lm(l.schedule_id);p(b.students||[])}catch{}};v();const w=setInterval(v,1e4);return()=>clearInterval(w)},[l==null?void 0:l.schedule_id]);const x=async()=>{try{const w=(await h2()).drivers||[];if(r(w),!l&&w.length>0)_(w[0]);else if(l){const b=w.find(C=>C.driver_id===l.driver_id&&C.schedule_id===l.schedule_id)||l;d(b)}}catch(v){console.error("Error loading active drivers:",v),r([])}finally{a(!1)}},_=async v=>{if(d(v),p([]),!!(v!=null&&v.schedule_id))try{const w=await lm(v.schedule_id);p(w.students||[])}catch(w){console.error("Failed to load students for schedule",v.schedule_id,w),p([])}},g=k.useMemo(()=>l?{bus_id:l.bus_id,bus_plate:l.bus_plate,current_lat:l.current_lat,current_lng:l.current_lng,speed:l.speed,heading:l.heading,students_onboard:l.students_onboard}:null,[l]);return n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:n.jsx("span",{className:"text-3xl",children:"📍"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:u(e,"tracking")}),n.jsx("p",{className:"text-orange-100 mt-1",children:i?u(e,"loading"):`${t.length} ${u(e,"active_drivers")}`})]})]}),n.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2",children:[n.jsx("div",{className:"text-sm text-orange-100",children:u(e,"update")}),n.jsx("div",{className:"text-lg font-bold",children:u(e,"every_10s")})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-3",children:n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:n.jsx("div",{className:"h-[600px]",children:n.jsx(Aj,{bus:g,students:f})})})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("span",{className:"text-2xl",children:"�‍✈️"}),n.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:u(e,"drivers")})]}),i?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"inline-block animate-spin text-4xl mb-2",children:"⏳"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:u(e,"loading")})]}):t.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("span",{className:"text-4xl mb-2 block",children:"🅿️"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:u(e,"no_active_trip_now")})]}):n.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto",children:t.map(v=>{var b,C;const w=l&&v.driver_id===l.driver_id&&v.schedule_id===l.schedule_id;return n.jsx("button",{onClick:()=>_(v),className:`w-full text-left p-3 rounded-lg border transition-all ${w?"bg-blue-50 dark:bg-blue-900/30 border-blue-300 dark:border-blue-600":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30",children:n.jsx(a1,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-100",children:v.driver_name||"N/A"}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:[v.bus_plate," • ",v.route_name]})]})]}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[n.jsx(Lt,{className:"h-3 w-3"}),(b=v.current_lat)!=null&&b.toFixed?v.current_lat.toFixed(3):v.current_lat,", ",(C=v.current_lng)!=null&&C.toFixed?v.current_lng.toFixed(3):v.current_lng]})]})},`${v.driver_id}-${v.schedule_id}`)})})]})})]})]})})}function p2(){const{lang:e}=ke(),[t,r]=k.useState([]),[i,a]=k.useState([]),[l,d]=k.useState([]),[f,p]=k.useState(!0),[x,_]=k.useState(!1),[g,v]=k.useState(!1),[w,b]=k.useState({route_id:"",bus_id:"",scheduled_date:"",start_time:"",recurrence:"once",end_date:""});k.useEffect(()=>{C()},[]),k.useEffect(()=>{if(!x)return;const M=setInterval(()=>{C()},15e3);return()=>clearInterval(M)},[x]);const C=async()=>{try{p(!0);const[M,D,O]=await Promise.all([le.get("/admin/schedules"),le.get("/admin/routes"),le.get("/admin/buses")]);r(M.data.schedules||[]),a(D.data.routes||[]),d(O.data.buses||[])}catch(M){console.error("Error loading data:",M)}finally{p(!1)}},E=async M=>{var D,O;if(M.preventDefault(),w.bus_id){const P=l.find(G=>G.id===w.bus_id);if(P&&!P.driver_id&&!window.confirm(`⚠️ ${u(e,"warning")}: ${u(e,"bus")} "${P.plate}" ${u(e,"no_driver")}!

${u(e,"proceed_create_schedule_question")}

💡 ${u(e,"hint_assign_driver_first")}`))return}try{if(w.recurrence==="once")await le.post("/admin/schedules",{route_id:w.route_id,bus_id:w.bus_id||null,scheduled_date:w.scheduled_date,start_time:w.start_time});else{const P=new Date(w.scheduled_date),G=new Date(w.end_date||w.scheduled_date),I=[];if(w.recurrence==="daily")for(let ne=new Date(P);ne<=G;ne.setDate(ne.getDate()+1))I.push(new Date(ne).toISOString().split("T")[0]);else if(w.recurrence==="weekly")for(let ne=new Date(P);ne<=G;ne.setDate(ne.getDate()+7))I.push(new Date(ne).toISOString().split("T")[0]);else if(w.recurrence==="monthly")for(let ne=new Date(P);ne<=G;ne.setMonth(ne.getMonth()+1))I.push(new Date(ne).toISOString().split("T")[0]);await Promise.all(I.map(ne=>le.post("/admin/schedules",{route_id:w.route_id,bus_id:w.bus_id||null,scheduled_date:ne,start_time:w.start_time})))}v(!1),b({route_id:"",bus_id:"",scheduled_date:"",start_time:"",recurrence:"once",end_date:""}),C(),alert(`✅ ${w.recurrence==="once"?u(e,"schedule_created_success"):u(e,"recurring_schedule_created_success")}`)}catch(P){console.error("Error creating schedule:",P),alert("❌ "+u(e,"error")+": "+(((O=(D=P.response)==null?void 0:D.data)==null?void 0:O.error)||P.message))}},S=async M=>{if(confirm(u(e,"confirm_delete_schedule")))try{await le.delete(`/admin/schedules/${M}`),C()}catch(D){console.error("Error deleting schedule:",D),alert(u(e,"error_deleting_schedule"))}},y=async(M,D)=>{try{await le.put(`/admin/schedules/${M}`,{bus_id:D}),C()}catch(O){console.error("Error assigning bus:",O),alert(u(e,"error_assigning_bus"))}},N=M=>{switch(M){case"completed":return"bg-green-100 text-green-700 border-green-200";case"in-progress":return"bg-blue-100 text-blue-700 border-blue-200";case"active":return"bg-blue-100 text-blue-700 border-blue-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";case"scheduled":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},R=M=>{switch(M){case"completed":return u(e,"completed");case"in-progress":return u(e,"in_progress");case"active":return u(e,"in_progress");case"cancelled":return u(e,"cancelled");case"scheduled":return u(e,"scheduled");default:return M}};return f?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 rounded-lg p-3",children:n.jsx(xo,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:u(e,"schedule_page_title")}),n.jsx("p",{className:"text-blue-100 mt-1",children:u(e,"schedule_subtitle")})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"hidden md:inline-flex items-center gap-2 text-sm text-white/90",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:M=>_(M.target.checked)}),u(e,"auto_refresh_15s_label")]}),n.jsxs("button",{onClick:()=>v(!0),className:"bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center gap-2",children:[n.jsx(oh,{className:"w-5 h-5"}),u(e,"add_schedule")]})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"date")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"time")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"routes")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"buses")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"driver_label")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"status")}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-200 uppercase",children:u(e,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[n.jsx(xo,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:u(e,"no_schedules_yet")}),n.jsx("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:u(e,"add_schedule")})]})}):t.map(M=>{var D,O;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xo,{className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(M.scheduled_date).toLocaleDateString(e==="vi"?"vi-VN":"en-US")})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xe,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:M.start_time})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"w-4 h-4 text-orange-600"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:M.route_name||"N/A"})]})}),n.jsx("td",{className:"px-6 py-4",children:M.bus_plate?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(at,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:M.bus_plate})]}):n.jsxs("select",{onChange:P=>y(M.id,P.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:u(e,"assign_bus")}),l.filter(P=>P.active).map(P=>n.jsx("option",{value:P.id,children:P.plate},P.id))]})}),n.jsx("td",{className:"px-6 py-4",children:M.bus_plate&&((D=l.find(P=>P.id===M.bus_id))!=null&&D.driver_name)?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jr,{className:"w-4 h-4 text-purple-600"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:(O=l.find(P=>P.id===M.bus_id))==null?void 0:O.driver_name})]}):n.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:u(e,"not_assigned")})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${N(M.status)}`,children:R(M.status)})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"flex items-center justify-end gap-2",children:n.jsx("button",{onClick:()=>S(M.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:n.jsx(la,{className:"w-4 h-4"})})})})]},M.id)})})]})})}),g&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-t-xl text-white sticky top-0",children:[n.jsx("h2",{className:"text-xl font-bold",children:u(e,"create_new_schedule_title")}),n.jsx("p",{className:"text-sm text-blue-100 mt-1",children:u(e,"schedule_create_subtitle")})]}),n.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:u(e,"schedule_type")}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"once",label:u(e,"once_label"),desc:u(e,"once_desc")},{value:"daily",label:u(e,"daily_label"),desc:u(e,"daily_desc")},{value:"weekly",label:u(e,"weekly_label"),desc:u(e,"weekly_desc")},{value:"monthly",label:u(e,"monthly_label"),desc:u(e,"monthly_desc")}].map(M=>n.jsxs("button",{type:"button",onClick:()=>b({...w,recurrence:M.value}),className:`px-4 py-3 rounded-lg border-2 transition-all text-left ${w.recurrence===M.value?"border-blue-600 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx("div",{className:"font-semibold",children:M.label}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:M.desc})]},M.value))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u(e,"route_name")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{required:!0,value:w.route_id,onChange:M=>b({...w,route_id:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:u(e,"choose_route")}),i.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:u(e,"bus_assign_later")}),n.jsxs("select",{value:w.bus_id,onChange:M=>b({...w,bus_id:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:u(e,"choose_bus_optional")}),l.filter(M=>M.active).map(M=>n.jsxs("option",{value:M.id,children:["🚌 ",M.plate," ",M.driver_name?`- ${M.driver_name}`:`(${u(e,"no_driver")})`]},M.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[w.recurrence==="once"?u(e,"date"):u(e,"from_date")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",required:!0,value:w.scheduled_date,onChange:M=>b({...w,scheduled_date:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),w.recurrence!=="once"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u(e,"to_date")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",required:!0,value:w.end_date,onChange:M=>b({...w,end_date:M.target.value}),min:w.scheduled_date,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u(e,"departure_time")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",required:!0,value:w.start_time,onChange:M=>b({...w,start_time:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>v(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(lh,{className:"w-4 h-4"}),u(e,"cancel_button")]}),n.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-colors flex items-center gap-2",children:[n.jsx(U1,{className:"w-4 h-4"}),u(e,"add_schedule")]})]})]})]})})]})}const El="/buses",Tl=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});async function Ix(){try{return(await le.get(El,Tl())).data}catch(e){return console.error("Error listing buses:",e),[]}}async function m2(e){var t;try{return(await le.post(El,e,Tl())).data}catch(r){throw((t=r.response)==null?void 0:t.data)||new Error("Failed to create bus")}}async function g2(e,t){var r;try{return(await le.put(`${El}/${e}`,t,Tl())).data}catch(i){throw((r=i.response)==null?void 0:r.data)||new Error("Failed to update bus")}}async function x2(e){var t;try{return(await le.delete(`${El}/${e}`,Tl())).data}catch(r){throw((t=r.response)==null?void 0:t.data)||new Error("Failed to delete bus")}}const Pl="/admin/drivers",Ll=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});async function $x(){var e,t;try{console.log("API: Calling listDrivers...");const r=await le.get(Pl,Ll());return console.log("API: listDrivers response:",r.data),r.data}catch(r){return console.error("Error listing drivers:",r),console.error("Error details:",{status:(e=r.response)==null?void 0:e.status,data:(t=r.response)==null?void 0:t.data,message:r.message}),[]}}async function y2(e){var t,r,i;try{console.log("API: Creating driver with data:",e);const a=await le.post(Pl,e,Ll());return console.log("API: Create driver response:",a.data),a.data}catch(a){console.error("API: Create driver error:",a);const l=((t=a.response)==null?void 0:t.data)||a.message;throw console.error("API: Error data:",l),console.error("API: Error status:",(r=a.response)==null?void 0:r.status),{error:(l==null?void 0:l.error)||"Failed to create driver",message:a.message,status:(i=a.response)==null?void 0:i.status}}}async function _2(e,t){var r,i,a;try{console.log(`API: Updating driver ${e} with data:`,t);const l=await le.put(`${Pl}/${e}`,t,Ll());return console.log(`API: Update driver ${e} response:`,l.data),l.data}catch(l){console.error(`API: Update driver ${e} error:`,l);const d=((r=l.response)==null?void 0:r.data)||l.message;throw console.error(`API: Error data for driver ${e}:`,d),console.error(`API: Error status for driver ${e}:`,(i=l.response)==null?void 0:i.status),{error:(d==null?void 0:d.error)||"Failed to update driver",message:l.message,status:(a=l.response)==null?void 0:a.status}}}async function v2(e){var t,r,i;try{console.log(`API: Deleting driver ${e}`);const a=await le.delete(`${Pl}/${e}`,Ll());return console.log(`API: Delete driver ${e} response:`,a.data),a.data}catch(a){console.error(`API: Delete driver ${e} error:`,a);const l=((t=a.response)==null?void 0:t.data)||a.message;throw console.error(`API: Error data for driver ${e}:`,l),console.error(`API: Error status for driver ${e}:`,(r=a.response)==null?void 0:r.status),{error:(l==null?void 0:l.error)||"Failed to delete driver",message:a.message,status:(i=a.response)==null?void 0:i.status}}}function b2({data:e,title:t}){if(!e||e.length===0)return n.jsx("div",{className:"text-center text-gray-400 py-8",children:"No data available"});const r=Math.max(...e.map(i=>i.value));return n.jsxs("div",{className:"w-full",children:[t&&n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:t}),n.jsx("div",{className:"space-y-3",children:e.map((i,a)=>{const l=i.value/r*100;return n.jsxs("div",{className:"group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.label}),n.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:i.value})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500 ease-out group-hover:from-blue-600 group-hover:to-purple-700",style:{width:`${l}%`}})})]},a)})})]})}function vr({className:e="",variant:t="rectangular",width:r,height:i}){const a="animate-pulse bg-gray-200 dark:bg-gray-700",l={rectangular:"rounded",circular:"rounded-full",text:"rounded h-4"},d={};return r&&(d.width=r),i&&(d.height=i),n.jsx("div",{className:`${a} ${l[t]||l.rectangular} ${e}`,style:d})}function w2({rows:e=5,columns:t=4}){return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex gap-4 pb-3 border-b border-gray-200 dark:border-gray-700",children:Array.from({length:t}).map((r,i)=>n.jsx(vr,{className:"h-4 flex-1"},i))}),Array.from({length:e}).map((r,i)=>n.jsx("div",{className:"flex gap-4 py-2",children:Array.from({length:t}).map((a,l)=>n.jsx(vr,{className:"h-6 flex-1"},l))},i))]})}function cm(){return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4",children:[n.jsx(vr,{className:"h-6 w-3/4"}),n.jsx(vr,{className:"h-4 w-full"}),n.jsx(vr,{className:"h-4 w-5/6"}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(vr,{className:"h-10 w-24"}),n.jsx(vr,{className:"h-10 w-24"})]})]})}function Hc(){return n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(vr,{className:"h-4 w-20 mb-2"}),n.jsx(vr,{className:"h-8 w-16"})]}),n.jsx(vr,{variant:"circular",className:"w-12 h-12"})]})})}function k2(){const[e,t]=k.useState([]),[r,i]=k.useState([]),[a,l]=k.useState([]),[d,f]=k.useState({buses:0,activeBuses:0,drivers:0,activeDrivers:0,students:0,routes:0,todaySchedules:0,activeTrips:0}),[p,x]=k.useState(!0),[_,g]=k.useState(!0),{lang:v}=ke();k.useEffect(()=>{async function y(){var N;try{x(!0);const R=await le.get("/admin/stats");f(R.data);const M=await Ix(),D=Array.isArray(M)?M:(M==null?void 0:M.buses)||[];t(D);const O=await $x(),P=Array.isArray(O)?O:(O==null?void 0:O.drivers)||[];i(P),g(!0);const G=await le.get("/admin/recent-activity?limit=20&hours=48");l(Array.isArray((N=G==null?void 0:G.data)==null?void 0:N.items)?G.data.items:[]),g(!1)}catch(R){console.error("Failed to load dashboard data:",R),t([]),i([]),l([]),g(!1)}finally{x(!1)}}y()},[]);const w=d.activeBuses,b=d.activeDrivers,C=d.students,E=d.activeTrips,S=[{title:u(v,"total_buses"),value:d.buses,subtitle:`${w} ${u(v,"active")}`,icon:n.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{title:u(v,"drivers"),value:d.drivers,subtitle:`${b} ${u(v,"active")}`,icon:n.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),color:"from-green-500 to-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"},{title:u(v,"students"),value:C,subtitle:u(v,"total_registered"),icon:n.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{title:u(v,"active_trips"),value:E,subtitle:u(v,"currently_running"),icon:n.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20"}];return p?n.jsx("div",{className:"space-y-6",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((y,N)=>n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg animate-pulse",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"}),n.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"}),n.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-24"})]}),n.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})},N))})}):n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 rounded-2xl p-8 text-white",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{className:"mb-4 lg:mb-0",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:u(v,"welcome_back")}),n.jsx("p",{className:"text-blue-100 text-lg",children:u(v,"dashboard_subtitle")})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2",children:[n.jsx("div",{className:"text-sm text-blue-100",children:u(v,"today_label")}),n.jsx("div",{className:"text-xl font-bold",children:new Date().toLocaleDateString()})]})})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map((y,N)=>n.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:y.title}),n.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:y.value}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.subtitle})]}),n.jsx("div",{className:`${y.bgColor} p-4 rounded-2xl group-hover:scale-110 transition-transform duration-300`,children:n.jsx("div",{className:`text-transparent bg-gradient-to-r ${y.color} bg-clip-text`,children:y.icon})})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"↗ 12%"}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:u(v,"vs_last_month")})]})})]},N))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:u(v,"bus_activity")}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:u(v,"today_label")}),n.jsx("button",{className:"px-3 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:u(v,"this_week")})]})]}),n.jsx(b2,{data:[{label:u(v,"total_buses"),value:d.buses},{label:u(v,"active_buses"),value:d.activeBuses},{label:u(v,"total_drivers"),value:d.drivers},{label:u(v,"active_drivers"),value:d.activeDrivers},{label:u(v,"students"),value:d.students},{label:u(v,"today_schedules"),value:d.todaySchedules}]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-100 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6",children:u(v,"recent_activity")}),n.jsx("div",{className:"space-y-4",children:_?[...Array(5)].map((y,N)=>n.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-xl",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"h-3 w-2/3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-2 w-1/3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]},N)):a.length===0?n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u(v,"no_data")||"No recent activity"}):a.map(y=>{const N={notification:"🔔",trip:"🎓",schedule:"📅",emergency:"⚠️",bus:"🚌"},R={blue:"text-blue-600",green:"text-green-600",teal:"text-teal-600",orange:"text-orange-600",red:"text-red-600",indigo:"text-indigo-600",gray:"text-gray-600",purple:"text-purple-600"},M=D=>{const O=Date.now()-new Date(D).getTime(),P=Math.max(0,Math.floor(O/6e4));if(P<1)return v==="vi"?"Vừa xong":"just now";if(P<60)return`${P} ${v==="vi"?"phút":"min"}`;const G=Math.floor(P/60);return G<24?`${G} ${v==="vi"?"giờ":"h"}`:`${Math.floor(G/24)} ${v==="vi"?"ngày":"d"}`};return n.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[n.jsx("div",{className:"text-2xl",title:y.type,children:N[y.type]||"•"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:y.title}),n.jsxs("p",{className:`${R[y.color]||"text-gray-500"} text-xs truncate`,children:[y.actor?`${y.actor} • `:"",M(y.created_at)]})]}),n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]},y.id)})})]})]})]})}function Qt({open:e,title:t,onClose:r,children:i,size:a="md"}){if(k.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:r}),n.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full ${l[a]} transform transition-all duration-300 scale-100`,children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t}),n.jsx("button",{onClick:r,className:"p-2 rounded-xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:i})]})]})}class j2 extends pn.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:n.jsx("div",{className:"max-w-2xl w-full",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-6 rounded-full bg-red-100 dark:bg-red-900/30",children:n.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),n.jsx("h1",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:"Oops! Something went wrong"}),n.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:"We're sorry for the inconvenience. The application encountered an unexpected error."}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Error Details:"}),n.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-mono",children:this.state.error&&this.state.error.toString()})]}),!1,n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Reload Page"}),n.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Go to Home"})]}),n.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:n.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"If this problem persists, please contact support with the error details above."})})]})})}):this.props.children}}function N2(){const{lang:e}=ke(),[t,r]=k.useState([]),[i,a]=k.useState(!1),[l,d]=k.useState(""),[f,p]=k.useState(!1),[x,_]=k.useState(null),[g,v]=k.useState({plate:"",capacity:20}),[w,b]=k.useState(!1);k.useEffect(()=>{C()},[]);async function C(){var M,D;try{a(!0),d("");const O=await Ix(),P=Array.isArray(O)?O:(O==null?void 0:O.buses)||[];r(P)}catch(O){console.error("Failed to load buses:",O),r([]),d(((D=(M=O.response)==null?void 0:M.data)==null?void 0:D.message)||O.message||"Không thể kết nối với server. Vui lòng thử lại.")}finally{a(!1)}}function E(){_(null),v({plate:"",capacity:20}),p(!0)}function S(M){_(M),v({plate:M.plate||"",capacity:M.capacity||20}),p(!0)}function y(){p(!1),_(null),v({plate:"",capacity:20})}async function N(M){if(M.preventDefault(),!g.plate.trim()){d("Vui lòng nhập biển số xe");return}try{b(!0),x?await g2(x.id,g):await m2(g),y(),C()}catch{d(x?"Lỗi cập nhật xe buýt":"Lỗi thêm xe buýt")}finally{b(!1)}}async function R(M){if(window.confirm(u(e,"confirm_delete_bus")))try{await x2(M.id),C()}catch(D){console.error("Failed to delete bus:",D),d("Lỗi xóa xe buýt")}}return u(e,"id"),u(e,"plate"),u(e,"capacity"),n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:n.jsx("span",{className:"text-3xl",children:"🚌"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:u(e,"buses_page_title")}),n.jsxs("p",{className:"text-blue-100 mt-1",children:[u(e,"buses_total_label"),": ",t.length]})]})]}),n.jsxs("button",{className:"bg-white text-blue-600 px-6 py-3 rounded-lg hover:bg-blue-50 transition-colors font-medium shadow-lg flex items-center gap-2 disabled:opacity-50",onClick:E,disabled:i,children:[n.jsx("span",{children:"➕"})," ",u(e,"add_bus_button")]})]})}),l&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-300",children:[n.jsx("span",{className:"text-xl",children:"⚠️"}),n.jsx("span",{className:"font-medium",children:l})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:i?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"inline-block animate-spin text-6xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u(e,"loading_list")})]}):t.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("span",{className:"text-6xl mb-4 block",children:"🚌"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-2",children:u(e,"no_buses")}),n.jsx("p",{className:"text-gray-400 text-sm",children:u(e,"add_bus_button")})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:"ID"}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(e,"license_plate")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(e,"capacity")}),n.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(e,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(M=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"text-gray-600 dark:text-gray-300 font-mono text-sm",children:["#",M.id]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-cyan-600 rounded-full flex items-center justify-center text-white text-xl",children:"🚌"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 font-mono",children:M.plate})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full text-sm font-medium",children:[n.jsx("span",{children:"👥"})," ",M.capacity," ",u(e,"seats")]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs("button",{onClick:()=>S(M),className:"px-3 py-1.5 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors text-sm font-medium",children:["✏️ ",u(e,"edit")]}),n.jsxs("button",{onClick:()=>R(M),className:"px-3 py-1.5 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors text-sm font-medium",children:["🗑️ ",u(e,"delete")]})]})})]},M.id))})]})})})]}),n.jsx(Qt,{open:f,title:x?`${u(e,"edit")} ${u(e,"bus")}`:u(e,"add_bus_button"),onClose:y,children:n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u(e,"license_plate")," *"]}),n.jsx("input",{type:"text",value:g.plate,onChange:M=>v({...g,plate:M.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"VD: 30A-12345"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u(e,"capacity")," (",u(e,"seats"),") *"]}),n.jsx("input",{type:"number",min:"1",value:g.capacity,onChange:M=>v({...g,capacity:parseInt(M.target.value)}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),n.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[n.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 border rounded hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600",disabled:w,children:u(e,"cancel")}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:bg-gray-400",disabled:w,children:w?u(e,"loading"):u(e,"save")})]})]})})]})}function S2(){const{lang:e}=ke(),[t,r]=k.useState([]),[i,a]=k.useState([]),[l,d]=k.useState(!1),[f,p]=k.useState(""),[x,_]=k.useState(!1),[g,v]=k.useState(null),[w,b]=k.useState({full_name:"",email:"",phone:"",password:"",license_number:"",bus_id:""}),[C,E]=k.useState(!1);k.useEffect(()=>{S(),y()},[]);async function S(){try{d(!0),console.log("Loading drivers...");const P=await $x();console.log("Raw drivers data:",P);const G=Array.isArray(P)?P:(P==null?void 0:P.drivers)||[];console.log("Processed drivers list:",G),r(G),p("")}catch(P){console.error("Failed to load drivers",P),r([]),p("Lỗi tải danh sách tài xế: "+((P==null?void 0:P.message)||(P==null?void 0:P.error)||"Unknown error"))}finally{d(!1)}}async function y(){var P;try{const I=((P=(await le.get("/admin/buses")).data)==null?void 0:P.buses)||[];a(I)}catch(G){console.error("Failed to load buses",G),a([])}}function N(){v(null),b({full_name:"",email:"",phone:"",password:"",license_number:"",bus_id:""}),_(!0)}function R(P){v(P),b({full_name:P.full_name||"",email:P.email||"",phone:P.phone||"",password:"",license_number:P.license_number||"",bus_id:P.bus_id||""}),_(!0)}function M(){_(!1),v(null),b({full_name:"",email:"",phone:"",password:"",license_number:"",bus_id:""})}async function D(P){var G,I,ne,ge,z,ee;if(P.preventDefault(),!((G=w.full_name)!=null&&G.trim())){p("Vui lòng nhập họ tên");return}if(!((I=w.phone)!=null&&I.trim())){p("Vui lòng nhập số điện thoại");return}if(!g){if(!((ne=w.email)!=null&&ne.trim())){p("Vui lòng nhập email");return}if(!((ge=w.password)!=null&&ge.trim())){p("Vui lòng nhập mật khẩu");return}if(w.password.length<6){p("Mật khẩu phải có ít nhất 6 ký tự");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)){p("Email không hợp lệ");return}}try{E(!0),p("");const oe={full_name:w.full_name.trim(),phone:w.phone.trim(),license_number:((z=w.license_number)==null?void 0:z.trim())||null,bus_id:w.bus_id||null};if(g?(ee=w.email)!=null&&ee.trim()&&(oe.email=w.email.trim()):(oe.email=w.email.trim(),oe.password=w.password),console.log("Form: Submitting driver data:",oe),console.log("Form: Edit mode:",!!g),g){console.log("Form: Updating driver ID:",g.id);const ie=await _2(g.id,oe);console.log("Form: Update result:",ie)}else{console.log("Form: Creating new driver");const ie=await y2(oe);console.log("Form: Create result:",ie)}console.log("Form: Submission successful, closing modal and reloading"),M(),await S()}catch(oe){console.error("Form: Submit error:",oe);const ie=(oe==null?void 0:oe.error)||(oe==null?void 0:oe.message)||"Lỗi không xác định";p(g?`Lỗi cập nhật tài xế: ${ie}`:`Lỗi thêm tài xế: ${ie}`)}finally{E(!1)}}async function O(P){if(window.confirm(u(e,"confirm_delete_driver")))try{p(""),console.log("Form: Deleting driver ID:",P.id);const G=await v2(P.id);console.log("Form: Delete result:",G),console.log("Form: Delete successful, reloading data"),await S()}catch(G){console.error("Form: Delete error:",G);const I=(G==null?void 0:G.error)||(G==null?void 0:G.message)||"Lỗi không xác định";p(`Lỗi xóa tài xế: ${I}`)}}return u(e,"id"),u(e,"name"),u(e,"phone"),u(e,"active"),n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:n.jsx("span",{className:"text-3xl",children:"🚗"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:u(e,"drivers_page_title")}),n.jsxs("p",{className:"text-green-100 mt-1",children:[u(e,"drivers_total_label"),": ",t.length]})]})]}),n.jsxs("button",{className:"bg-white text-green-600 px-6 py-3 rounded-lg hover:bg-green-50 transition-colors font-medium shadow-lg flex items-center gap-2 disabled:opacity-50",onClick:N,disabled:l,children:[n.jsx("span",{children:"➕"})," ",u(e,"add_driver_button")]})]})}),f&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-300",children:[n.jsx("span",{className:"text-xl",children:"⚠️"}),n.jsx("span",{className:"font-medium",children:f})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:u(e,"drivers_total_label")}),n.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:t.length})]}),n.jsx("span",{className:"text-4xl",children:"👨‍✈️"})]})}),n.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-600 dark:text-green-300 font-medium",children:u(e,"active_drivers")}),n.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:t.filter(P=>P.active).length})]}),n.jsx("span",{className:"text-4xl",children:"✅"})]})}),n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",children:u(e,"drivers_with_bus")}),n.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:t.filter(P=>P.bus_id).length})]}),n.jsx("span",{className:"text-4xl",children:"🚌"})]})})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:l?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"inline-block animate-spin text-6xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-gray-500",children:u(e,"loading_list")})]}):t.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("span",{className:"text-6xl mb-4 block",children:"🚗"}),n.jsx("p",{className:"text-gray-500 text-lg mb-2",children:u(e,"no_drivers_yet")}),n.jsx("p",{className:"text-gray-400 text-sm",children:u(e,"add_driver_button")})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(e,"driver_label")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(e,"contact")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Bằng lái"}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(e,"assigned_bus")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(e,"driver_status")}),n.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(e,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(P=>{var G,I;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-teal-600 rounded-full flex items-center justify-center text-white font-bold",children:((I=(G=P.full_name)==null?void 0:G.charAt(0))==null?void 0:I.toUpperCase())||"D"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-100",children:P.full_name}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.email})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["📞 ",P.phone||"—"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"text-sm font-mono text-gray-700 dark:text-gray-200",children:P.license_number||"—"})}),n.jsx("td",{className:"px-6 py-4",children:P.bus_plate?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full text-xs font-medium",children:[n.jsx("span",{children:"🚌"})," ",P.bus_plate]}):n.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:u(e,"no_bus")})}),n.jsx("td",{className:"px-6 py-4",children:P.active?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-full text-xs font-medium",children:[n.jsx("span",{children:"✅"})," ",u(e,"active")]}):n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 rounded-full text-xs font-medium",children:[n.jsx("span",{children:"❌"})," ",u(e,"inactive")]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs("button",{onClick:()=>R(P),className:"px-3 py-1.5 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors text-sm font-medium",children:["✏️ ",u(e,"edit")]}),n.jsxs("button",{onClick:()=>O(P),className:"px-3 py-1.5 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors text-sm font-medium",children:["🗑️ ",u(e,"delete")]})]})})]},P.id)})})]})})})]}),n.jsx(Qt,{open:x,title:g?`${u(e,"edit")} ${u(e,"driver_label")}`:u(e,"add_driver_button"),onClose:M,children:n.jsxs("form",{onSubmit:D,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:[u(e,"full_name")," *"]}),n.jsx("input",{type:"text",value:w.full_name,onChange:P=>b({...w,full_name:P.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"VD: Nguyễn Văn A"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:["Email ",!g&&"*"]}),n.jsx("input",{type:"email",value:w.email,onChange:P=>b({...w,email:P.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"VD: driver@example.com",disabled:g}),g&&n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email không thể thay đổi sau khi tạo"})]}),!g&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:[u(e,"password")," *"]}),n.jsx("input",{type:"password",value:w.password,onChange:P=>b({...w,password:P.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"Tối thiểu 6 ký tự"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:[u(e,"phone")," *"]}),n.jsx("input",{type:"tel",value:w.phone,onChange:P=>b({...w,phone:P.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"VD: 0908123456"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Số bằng lái"}),n.jsx("input",{type:"text",value:w.license_number,onChange:P=>b({...w,license_number:P.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"VD: B123456789"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:u(e,"assigned_bus")}),n.jsxs("select",{value:w.bus_id,onChange:P=>b({...w,bus_id:P.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"no_bus")," --"]}),i.filter(P=>!P.driver_id||g&&P.driver_id===g.id).map(P=>n.jsxs("option",{value:P.id,children:[P.plate," - ",P.capacity," chỗ",P.driver_name&&P.driver_id!==(g==null?void 0:g.id)?` (Đã có: ${P.driver_name})`:""]},P.id))]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(e,"select_bus")})]}),n.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[n.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 border rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:border-gray-700 dark:text-gray-200",disabled:C,children:u(e,"cancel")}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:bg-gray-400",disabled:C,children:C?u(e,"loading"):u(e,"save")})]})]})})]})}const Br="http://localhost:25565";async function Ws(e){let t=null;try{t=await e.json()}catch{t=null}if(!e.ok)throw t&&t.error?{error:t.error,status:e.status}:{error:"network_error",status:e.status};return t}function Dr(){try{const e=localStorage.getItem("token");return e?{Authorization:"Bearer "+e}:{}}catch{return{}}}async function eo(e,t={},r=2,i=1e4){let a;for(let l=0;l<=r;l++){const d=new AbortController,f=setTimeout(()=>d.abort(),i);try{const p=await fetch(e,{...t,signal:d.signal,cache:"no-store"});return clearTimeout(f),await Ws(p)}catch(p){if(clearTimeout(f),a=p,!((p==null?void 0:p.name)==="AbortError"||(p==null?void 0:p.error)==="network_error"||p instanceof TypeError))break;await new Promise(_=>setTimeout(_,300*(l+1)))}}throw a||new Error("request_failed")}async function Fx(){const e=await fetch(`${Br}/api/admin/users`,{headers:{...Dr(),"Content-Type":"application/json"}});return await Ws(e)}async function Ux(e){const t=await fetch(`${Br}/api/admin/users/${e}`,{method:"DELETE",headers:{...Dr(),"Content-Type":"application/json"}});return await Ws(t)}async function C2(e="pending"){const t=Date.now();if(e==="all"){const[r,i,a]=await Promise.all([eo(`${Br}/api/auth/password-reset-requests?status=pending&_=${t}`,{headers:{...Dr(),"Content-Type":"application/json"}}),eo(`${Br}/api/auth/password-reset-requests?status=approved&_=${t}`,{headers:{...Dr(),"Content-Type":"application/json"}}),eo(`${Br}/api/auth/password-reset-requests?status=rejected&_=${t}`,{headers:{...Dr(),"Content-Type":"application/json"}})]),l=[...Array.isArray(r==null?void 0:r.requests)?r.requests:[],...Array.isArray(i==null?void 0:i.requests)?i.requests:[],...Array.isArray(a==null?void 0:a.requests)?a.requests:[]].sort((d,f)=>new Date(f.requested_at||0)-new Date(d.requested_at||0));return{count:l.length,requests:l}}return await eo(`${Br}/api/auth/password-reset-requests?status=${encodeURIComponent(e)}&_=${t}`,{headers:{...Dr(),"Content-Type":"application/json"}})}async function Hx({email:e,full_name:t,phone:r,role:i}){const a=await fetch(`${Br}/api/auth/register`,{method:"POST",headers:{...Dr(),"Content-Type":"application/json"},body:JSON.stringify({email:e,full_name:t,phone:r,role:i})});return await Ws(a)}async function E2(e){const t=await fetch(`${Br}/api/auth/approve-password-reset`,{method:"POST",headers:{...Dr(),"Content-Type":"application/json"},body:JSON.stringify({request_id:e})});return await Ws(t)}async function T2({request_id:e,notes:t}){const r=await fetch(`${Br}/api/auth/reject-password-reset`,{method:"POST",headers:{...Dr(),"Content-Type":"application/json"},body:JSON.stringify({request_id:e,notes:t})});return await Ws(r)}function P2(){const[e,t]=k.useState([]),[r,i]=k.useState(!1),[a,l]=k.useState(null),[d,f]=k.useState(""),[p,x]=k.useState("all"),{user:_,lang:g}=ke();ct();const[v,w]=k.useState(!1),[b,C]=k.useState({email:"",full_name:"",phone:"",role:"parent"}),[E,S]=k.useState(!1);k.useEffect(()=>{y()},[]);async function y(){i(!0),l(null);try{const O=await Fx();t(O.users||[])}catch(O){l(O&&O.error?O.error:u(g,"load_list_failed_try_again"))}i(!1)}async function N(O,P){const G=u(g,"confirm_delete_user").replace("{email}",P);if(confirm(G))try{await Ux(O),t(I=>I.filter(ne=>ne.id!==O))}catch(I){alert(u(g,"delete_failed")+": "+(I.error||I.message||"Unknown error"))}}const R=e.filter(O=>{const P=O.email.toLowerCase().includes(d.toLowerCase()),G=p==="all"||O.role===p;return P&&G}),M={admin:e.filter(O=>O.role==="admin").length,driver:e.filter(O=>O.role==="driver").length,parent:e.filter(O=>O.role==="parent").length},D=O=>{const P={admin:"bg-red-100 text-red-800 border-red-200",driver:"bg-blue-100 text-blue-800 border-blue-200",parent:"bg-green-100 text-green-800 border-green-200"},G={admin:"👑",driver:"🚗",parent:"👨‍👩‍👧"},I={admin:u(g,"admin_role"),driver:u(g,"driver_role"),parent:u(g,"parent_role")};return n.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${P[O]||"bg-gray-100 text-gray-800"}`,children:[n.jsx("span",{children:G[O]||"👤"}),I[O]||O]})};return!_||_.role!=="admin"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:n.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg border border-red-200 dark:border-red-800",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-6xl",children:"🔒"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:u(g,"access_denied_title")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:u(g,"access_denied_desc")})]})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("span",{children:"👥"})," ",u(g,"users_page_title")]}),n.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[u(g,"users_total_label"),": ",e.length]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:"➕"})," ",u(g,"add_user")]}),n.jsxs("button",{onClick:y,disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[n.jsx("span",{children:"🔄"})," ",r?u(g,"loading"):u(g,"refresh")]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 font-medium",children:u(g,"admin_role")}),n.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:M.admin})]}),n.jsx("span",{className:"text-4xl",children:"👑"})]})}),n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",children:u(g,"driver_role")}),n.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:M.driver})]}),n.jsx("span",{className:"text-4xl",children:"🚗"})]})}),n.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-600 dark:text-green-300 font-medium",children:u(g,"parent_role")}),n.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:M.parent})]}),n.jsx("span",{className:"text-4xl",children:"👨‍👩‍👧"})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:u(g,"search_email_placeholder"),value:d,onChange:O=>f(O.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-900 dark:text-gray-100"})}),n.jsxs("select",{value:p,onChange:O=>x(O.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"all",children:["🌐 ",u(g,"all_roles")]}),n.jsxs("option",{value:"admin",children:["👑 ",u(g,"admin_role")]}),n.jsxs("option",{value:"driver",children:["🚗 ",u(g,"driver_role")]}),n.jsxs("option",{value:"parent",children:["👨‍👩‍👧 ",u(g,"parent_role")]})]})]})]}),a&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-300",children:[n.jsx("span",{className:"text-xl",children:"⚠️"}),n.jsx("span",{className:"font-medium",children:a})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:r?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"inline-block animate-spin text-6xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u(g,"loading_list")})]}):R.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("span",{className:"text-6xl mb-4 block",children:"🔍"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:d||p!=="all"?u(g,"no_users_found"):u(g,"no_users_system")})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(g,"email")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(g,"role")}),n.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(g,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:R.map(O=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:O.email.charAt(0).toUpperCase()}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:O.email})]})}),n.jsx("td",{className:"px-6 py-4",children:D(O.role)}),n.jsx("td",{className:"px-6 py-4 text-center",children:n.jsxs("button",{onClick:()=>N(O.id,O.email),className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors font-medium flex items-center gap-2 mx-auto",children:[n.jsx("span",{children:"🗑️"})," ",u(g,"delete_user")]})})]},O.id))})]})})}),R.length>0&&n.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[u(g,"total_count"),": ",R.length," / ",e.length]})]})}),v&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>!E&&w(!1)}),n.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-lg",children:[n.jsxs("div",{className:"p-6 border-b dark:border-gray-700 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-bold dark:text-gray-100",children:u(g,"add_user")}),n.jsx("button",{disabled:E,onClick:()=>w(!1),className:"p-2",children:"✖️"})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(g,"email")}),n.jsx("input",{value:b.email,onChange:O=>C(P=>({...P,email:O.target.value})),type:"email",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"user@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(g,"full_name")}),n.jsx("input",{value:b.full_name,onChange:O=>C(P=>({...P,full_name:O.target.value})),type:"text",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"Nguyễn Văn A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(g,"phone")}),n.jsx("input",{value:b.phone,onChange:O=>C(P=>({...P,phone:O.target.value})),type:"text",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"0123456789"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(g,"default_password_info")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(g,"role")}),n.jsxs("select",{value:b.role,onChange:O=>C(P=>({...P,role:O.target.value})),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",children:[n.jsx("option",{value:"parent",children:u(g,"parent_role")}),n.jsx("option",{value:"driver",children:u(g,"driver_role")}),n.jsx("option",{value:"admin",children:u(g,"admin_role")})]})]})]}),n.jsxs("div",{className:"p-6 border-t dark:border-gray-700 flex items-center justify-end gap-3",children:[n.jsx("button",{disabled:E,onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 dark:text-gray-200 rounded-lg",children:u(g,"cancel")}),n.jsx("button",{disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",onClick:async()=>{const{email:O,full_name:P,phone:G,role:I}=b;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(O).trim()))return alert(u(g,"invalid_email"));if(!G)return alert(u(g,"please_enter_phone"));try{S(!0),await Hx({email:O.trim(),full_name:P||void 0,phone:G.trim(),role:I}),await y(),w(!1),C({email:"",full_name:"",phone:"",role:"parent"})}catch(ne){alert(u(g,"error")+": "+(ne.error||ne.message||"Unknown error"))}finally{S(!1)}},children:E?u(g,"creating"):u(g,"create_account")})]})]})]})]})}function L2(){const{user:e,lang:t}=ke(),[r,i]=k.useState([]),[a,l]=k.useState(!1),[d,f]=k.useState(null),[p,x]=k.useState(""),[_,g]=k.useState(!1),[v,w]=k.useState({email:"",full_name:"",phone:""}),[b,C]=k.useState(!1);k.useEffect(()=>{E()},[]);async function E(){l(!0),f(null);try{const R=((await Fx()).users||[]).filter(M=>M.role==="parent");i(R)}catch(N){f(N&&N.error?N.error:u(t,"load_list_failed_try_again"))}l(!1)}async function S(N,R){const M=u(t,"confirm_delete_user").replace("{email}",R);if(confirm(M))try{await Ux(N),i(D=>D.filter(O=>O.id!==N))}catch(D){alert(u(t,"delete_failed")+": "+(D.error||D.message||"Unknown error"))}}const y=r.filter(N=>(N.email||"").toLowerCase().includes(p.toLowerCase())||(N.full_name||"").toLowerCase().includes(p.toLowerCase())||(N.phone||"").toLowerCase().includes(p.toLowerCase()));return!e||e.role!=="admin"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:n.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg border border-red-200 dark:border-red-800",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-6xl",children:"🔒"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:u(t,"access_denied_title")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:u(t,"access_denied_desc")})]})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("span",{children:"👨‍👩‍👧"})," ",u(t,"manage_parents")]}),n.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[u(t,"total_parents"),": ",r.length]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:"➕"})," ",u(t,"add_parent")]}),n.jsxs("button",{onClick:E,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[n.jsx("span",{children:"🔄"})," ",a?u(t,"loading"):u(t,"refresh")]})]})]}),n.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:u(t,"search_placeholder"),value:p,onChange:N=>x(N.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-900 dark:text-gray-100"})})})]}),d&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-300",children:[n.jsx("span",{className:"text-xl",children:"⚠️"}),n.jsx("span",{className:"font-medium",children:d})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:a?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"inline-block animate-spin text-6xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u(t,"loading_list")})]}):y.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("span",{className:"text-6xl mb-4 block",children:"🔍"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:u(t,"no_users_found")})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(t,"full_name")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(t,"email")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(t,"phone")}),n.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:u(t,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:y.map(N=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 text-gray-800 dark:text-gray-100",children:N.full_name||"-"}),n.jsx("td",{className:"px-6 py-4 text-gray-800 dark:text-gray-100",children:N.email}),n.jsx("td",{className:"px-6 py-4 text-gray-800 dark:text-gray-100",children:N.phone||"-"}),n.jsx("td",{className:"px-6 py-4 text-center",children:n.jsxs("button",{onClick:()=>S(N.id,N.email),className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors font-medium",children:["🗑️ ",u(t,"delete")]})})]},N.id))})]})})})]})}),_&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>!b&&g(!1)}),n.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-lg",children:[n.jsxs("div",{className:"p-6 border-b dark:border-gray-700 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-bold dark:text-gray-100",children:u(t,"add_parent")}),n.jsx("button",{disabled:b,onClick:()=>g(!1),className:"p-2",children:"✖️"})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(t,"full_name")}),n.jsx("input",{value:v.full_name,onChange:N=>w(R=>({...R,full_name:N.target.value})),type:"text",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"Nguyễn Văn A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(t,"email")}),n.jsx("input",{value:v.email,onChange:N=>w(R=>({...R,email:N.target.value})),type:"email",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"parent@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:u(t,"phone")}),n.jsx("input",{value:v.phone,onChange:N=>w(R=>({...R,phone:N.target.value})),type:"text",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",placeholder:"0123456789"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(t,"default_password_info")})]})]}),n.jsxs("div",{className:"p-6 border-t dark:border-gray-700 flex items-center justify-end gap-3",children:[n.jsx("button",{disabled:b,onClick:()=>g(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 dark:text-gray-200 rounded-lg",children:u(t,"cancel")}),n.jsx("button",{disabled:b,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",onClick:async()=>{const{email:N,full_name:R,phone:M}=v;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(N).trim()))return alert(u(t,"invalid_email"));if(!M)return alert(u(t,"please_enter_phone"));try{C(!0),await Hx({email:N.trim(),full_name:R||void 0,phone:M.trim(),role:"parent"}),await E(),g(!1),w({email:"",full_name:"",phone:""})}catch(D){alert(u(t,"error")+": "+(D.error||D.message||"Unknown error"))}finally{C(!1)}},children:b?u(t,"creating"):u(t,"create_account")})]})]})]})]})}function M2(){const{lang:e}=ke(),[t,r]=k.useState([]),[i,a]=k.useState([]),[l,d]=k.useState([]),[f,p]=k.useState([]),[x,_]=k.useState([]),[g,v]=k.useState(!0),[w,b]=k.useState(""),[C,E]=k.useState(""),[S,y]=k.useState(!1),[N,R]=k.useState(!1),[M,D]=k.useState(null),[O,P]=k.useState({full_name:"",grade:"",class:"",parent_user_id:"",assigned_route_id:"",assigned_stop_id:"",assigned_bus_id:"",address:""});k.useEffect(()=>{G(),I(),ne(),ge()},[]);const G=async()=>{try{v(!0);const T=await le.get("/admin/students");r(T.data.students||[])}catch(T){console.error("Error loading students:",T)}finally{v(!1)}},I=async()=>{try{const T=await le.get("/admin/users?role=parent");a(T.data.users||[])}catch(T){console.error("Error loading parents:",T)}},ne=async()=>{try{const T=await le.get("/admin/routes");d(T.data.routes||[])}catch(T){console.error("Error loading routes:",T)}},ge=async()=>{try{const T=await le.get("/admin/buses");_(T.data.buses||[])}catch(T){console.error("Error loading buses:",T)}},z=async T=>{if(!T){p([]);return}try{const V=l.find(q=>q.id===T);p((V==null?void 0:V.stops)||[])}catch(V){console.error("Error loading stops:",V)}},ee=async T=>{var V,q;T.preventDefault();try{if(!O.parent_user_id){alert("Vui lòng chọn phụ huynh!");return}await le.post("/admin/students",O),y(!1),E(""),P({full_name:"",grade:"",class:"",parent_user_id:"",assigned_route_id:"",assigned_stop_id:"",assigned_bus_id:"",address:""}),G()}catch(de){console.error("Error creating student:",de),alert("Lỗi khi tạo học sinh: "+(((q=(V=de.response)==null?void 0:V.data)==null?void 0:q.message)||de.message))}},oe=T=>{D(T),E(""),P({full_name:T.full_name,grade:T.grade,class:T.class||"",parent_user_id:T.parent_user_id,assigned_route_id:T.assigned_route_id||"",assigned_stop_id:T.assigned_stop_id||"",assigned_bus_id:T.assigned_bus_id||"",address:T.address||""}),T.assigned_route_id&&z(T.assigned_route_id),R(!0)},ie=async T=>{var V,q;T.preventDefault();try{await le.put(`/admin/students/${M.id}`,O),R(!1),D(null),E(""),P({full_name:"",grade:"",class:"",parent_user_id:"",assigned_route_id:"",assigned_stop_id:"",assigned_bus_id:""}),G()}catch(de){console.error("Error updating student:",de),alert("Lỗi khi cập nhật học sinh: "+(((q=(V=de.response)==null?void 0:V.data)==null?void 0:q.message)||de.message))}},J=async T=>{if(confirm(u(e,"confirm_delete_student")))try{await le.delete(`/admin/students/${T}`),G()}catch(V){console.error("Error deleting student:",V),alert("Lỗi khi xóa học sinh")}},$=t.filter(T=>{var V,q,de;return((V=T.full_name)==null?void 0:V.toLowerCase().includes(w.toLowerCase()))||((q=T.grade)==null?void 0:q.toLowerCase().includes(w.toLowerCase()))||((de=T.class)==null?void 0:de.toLowerCase().includes(w.toLowerCase()))}),te=i.filter(T=>{var q,de,H,Y;if(!C)return!0;const V=C.toLowerCase();return((q=T.full_name)==null?void 0:q.toLowerCase().includes(V))||((de=T.email)==null?void 0:de.toLowerCase().includes(V))||((H=T.phone)==null?void 0:H.toLowerCase().includes(V))||((Y=T.phone)==null?void 0:Y.replace(/\s/g,"").includes(V.replace(/\s/g,"")))});return g?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6",children:[n.jsx("div",{className:"h-6 bg-purple-400 rounded w-48 mb-2 animate-pulse"}),n.jsx("div",{className:"h-8 bg-purple-400 rounded w-32 animate-pulse"})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-6",children:n.jsx(w2,{rows:8,columns:6})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 rounded-lg p-3",children:n.jsx(yn,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:u(e,"students_page_title")}),n.jsxs("p",{className:"text-purple-100 mt-1",children:[u(e,"students_total_label"),": ",t.length]})]})]}),n.jsxs("button",{onClick:()=>{y(!0),E("")},className:"bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 transition-colors flex items-center gap-2",children:[n.jsx(oh,{className:"w-5 h-5"}),u(e,"add_student_button")]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 border border-gray-100 dark:border-gray-700",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:u(e,"search_students_placeholder"),value:w,onChange:T=>b(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400"})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:u(e,"student_name")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:u(e,"grade_level")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:u(e,"class_name")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:u(e,"parent_label")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:u(e,"pickup_stop")}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:u(e,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center",children:[n.jsx(rj,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:w?u(e,"no_students_found"):u(e,"no_students_yet")})]})}):$.map(T=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/30 rounded-full p-2",children:n.jsx(yn,{className:"w-4 h-4 text-purple-600 dark:text-purple-300"})}),n.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:T.full_name})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 rounded-full text-sm font-medium",children:[u(e,"grade_level")," ",T.grade]})}),n.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300",children:T.class||"-"}),n.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300",children:T.parent_name||"-"}),n.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300",children:T.stop_name||"-"}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>oe(T),className:"p-2 text-blue-600 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:u(e,"edit_item"),children:n.jsx(A1,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>J(T.id),className:"p-2 text-red-600 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:u(e,"delete_item"),children:n.jsx(la,{className:"w-4 h-4"})})]})})]},T.id))})]})})}),S&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl max-w-md w-full",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-t-xl text-white",children:n.jsx("h2",{className:"text-xl font-bold",children:u(e,"add_new_student")})}),n.jsxs("form",{onSubmit:ee,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"student_name")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:O.full_name,onChange:T=>P({...O,full_name:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",placeholder:"Nguyễn Văn A"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"grade_level")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:O.grade,onChange:T=>P({...O,grade:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",placeholder:"1, 2, 3..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"class_name")}),n.jsx("input",{type:"text",value:O.class,onChange:T=>P({...O,class:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",placeholder:"1A, 2B..."})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"parent_label")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mb-2",children:[n.jsx("input",{type:"text",placeholder:"🔍 Tìm theo tên, email hoặc số điện thoại...",value:C,onChange:T=>E(T.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm dark:bg-gray-900 dark:text-gray-100"}),n.jsx(Ic,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"})]}),n.jsxs("select",{required:!0,value:O.parent_user_id,onChange:T=>P({...O,parent_user_id:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",size:"5",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_parent")," --"]}),te.map(T=>n.jsxs("option",{value:T.id,children:[T.full_name||T.email," ",T.phone?`- ${T.phone}`:""]},T.id))]}),te.length===0&&C&&n.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:u(e,"no_matching_parents")}),te.length>0&&C&&n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[u(e,"found_parents_count_prefix")," ",te.length," ",u(e,"found_parents_count_suffix")]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"routes")}),n.jsxs("select",{value:O.assigned_route_id,onChange:T=>{P({...O,assigned_route_id:T.target.value,assigned_stop_id:""}),z(T.target.value)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_route_optional")," --"]}),l.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),O.assigned_route_id&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"pickup_stop")}),n.jsxs("select",{value:O.assigned_stop_id,onChange:T=>P({...O,assigned_stop_id:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_stop")," --"]}),f.map(T=>n.jsxs("option",{value:T.id,children:[T.name," ",T.is_pickup?"(Đón)":"(Trả)"]},T.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"buses")," 🚌"]}),n.jsxs("select",{value:O.assigned_bus_id,onChange:T=>P({...O,assigned_bus_id:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_bus_optional")," --"]}),x.map(T=>n.jsxs("option",{value:T.id,children:[T.plate," - ",T.capacity," chỗ ",T.driver_name?`(Tài xế: ${T.driver_name})`:""]},T.id))]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(e,"bus_tracking_hint")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"home_address")," 🏠"]}),n.jsx("textarea",{value:O.address,onChange:T=>P({...O,address:T.target.value}),placeholder:"Nhập địa chỉ nhà của học sinh (VD: 123 Lê Lợi, Quận 1, TP.HCM)",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-900 dark:text-gray-100",rows:"2"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(e,"address")})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx("button",{type:"button",onClick:()=>{y(!1),E("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:u(e,"cancel")}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors",children:u(e,"create_button")})]})]})]})}),N&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 rounded-t-xl text-white",children:n.jsx("h2",{className:"text-xl font-bold",children:u(e,"edit_student")})}),n.jsxs("form",{onSubmit:ie,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"student_name")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:O.full_name,onChange:T=>P({...O,full_name:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",placeholder:"Nguyễn Văn A"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"grade_level")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:O.grade,onChange:T=>P({...O,grade:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",placeholder:"1, 2, 3..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"class_name")}),n.jsx("input",{type:"text",value:O.class,onChange:T=>P({...O,class:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",placeholder:"1A, 2B..."})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"parent_label")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mb-2",children:[n.jsx("input",{type:"text",placeholder:"🔍 Tìm theo tên, email hoặc số điện thoại...",value:C,onChange:T=>E(T.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm dark:bg-gray-900 dark:text-gray-100"}),n.jsx(Ic,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"})]}),n.jsxs("select",{required:!0,value:O.parent_user_id,onChange:T=>P({...O,parent_user_id:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",size:"5",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_parent")," --"]}),te.map(T=>n.jsxs("option",{value:T.id,children:[T.full_name||T.email," ",T.phone?`- ${T.phone}`:""]},T.id))]}),te.length===0&&C&&n.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:u(e,"no_matching_parents")}),te.length>0&&C&&n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[u(e,"found_parents_count_prefix")," ",te.length," ",u(e,"found_parents_count_suffix")]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"routes")}),n.jsxs("select",{value:O.assigned_route_id,onChange:T=>{P({...O,assigned_route_id:T.target.value,assigned_stop_id:""}),z(T.target.value)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_route_optional")," --"]}),l.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),O.assigned_route_id&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:u(e,"pickup_stop")}),n.jsxs("select",{value:O.assigned_stop_id,onChange:T=>P({...O,assigned_stop_id:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_stop")," --"]}),f.map(T=>n.jsxs("option",{value:T.id,children:[T.name," ",T.is_pickup?"(Đón)":"(Trả)"]},T.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"buses")," 🚌"]}),n.jsxs("select",{value:O.assigned_bus_id,onChange:T=>P({...O,assigned_bus_id:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",children:[n.jsxs("option",{value:"",children:["-- ",u(e,"choose_bus_optional")," --"]}),x.map(T=>n.jsxs("option",{value:T.id,children:[T.plate," - ",T.capacity," chỗ ",T.driver_name?`(Tài xế: ${T.driver_name})`:""]},T.id))]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(e,"bus_tracking_hint")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[u(e,"home_address")," 🏠"]}),n.jsx("textarea",{value:O.address,onChange:T=>P({...O,address:T.target.value}),placeholder:"Nhập địa chỉ nhà của học sinh",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-gray-100",rows:"2"})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx("button",{type:"button",onClick:()=>{R(!1),D(null),E("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:u(e,"cancel")}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-colors",children:u(e,"update_button")})]})]})]})})]})}const wn="/routes",kn=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});async function O2(){try{return(await le.get(wn,kn())).data}catch(e){return console.error("Error listing routes:",e),[]}}async function dm(e){try{return(await le.get(`${wn}/${e}`,kn())).data}catch(t){return console.error("Error getting route:",t),null}}async function A2(e){var t;try{return(await le.post(wn,e,kn())).data}catch(r){throw((t=r.response)==null?void 0:t.data)||new Error("Failed to create route")}}async function R2(e,t){var r;try{return(await le.put(`${wn}/${e}`,t,kn())).data}catch(i){throw((r=i.response)==null?void 0:r.data)||new Error("Failed to update route")}}async function z2(e){var t;try{return(await le.delete(`${wn}/${e}`,kn())).data}catch(r){throw((t=r.response)==null?void 0:t.data)||new Error("Failed to delete route")}}async function B2(e,t){var r;try{return(await le.post(`${wn}/${e}/stops`,t,kn())).data}catch(i){throw((r=i.response)==null?void 0:r.data)||new Error("Failed to add route stop")}}async function yi(e,t,r){var i;try{return(await le.put(`${wn}/${e}/stops/${t}`,r,kn())).data}catch(a){throw((i=a.response)==null?void 0:i.data)||new Error("Failed to update route stop")}}async function D2(e,t){var r;try{return(await le.delete(`${wn}/${e}/stops/${t}`,kn())).data}catch(i){throw((r=i.response)==null?void 0:r.data)||new Error("Failed to delete route stop")}}function I2(){const[e,t]=k.useState([]),[r,i]=k.useState(!1),[a,l]=k.useState(""),[d,f]=k.useState(!1),[p,x]=k.useState(null),[_,g]=k.useState({name:""}),[v,w]=k.useState(!1),[b,C]=k.useState(!1),[E,S]=k.useState(null),[y,N]=k.useState([]),[R,M]=k.useState({name:"",lat:"",lng:"",is_pickup:!0}),[D,O]=k.useState(null),[P,G]=k.useState({name:"",lat:"",lng:"",is_pickup:!0}),{lang:I}=ke();k.useEffect(()=>{ne()},[]);async function ne(){try{i(!0);const H=await O2(),Y=Array.isArray(H)?H:(H==null?void 0:H.routes)||[];t(Y),l("")}catch(H){console.error("Failed to load routes:",H),t([]),l(u(I,"load_list_failed_try_again"))}finally{i(!1)}}function ge(){x(null),g({name:""}),f(!0)}function z(H){x(H),g({name:H.name||""}),f(!0)}async function ee(H){S(H),N([]),M({name:"",lat:"",lng:"",is_pickup:!0}),O(null),C(!0);try{const Y=await dm(H.id);N((Y==null?void 0:Y.stops)||[])}catch(Y){console.error("Failed to load route stops",Y)}}function oe(){f(!1),x(null),g({name:""})}const ie=[...y].sort((H,Y)=>(H.stop_order||0)-(Y.stop_order||0));async function J(H){const Y=ie.findIndex(ue=>ue.id===H.id);if(Y<=0)return;const re=ie[Y-1];try{await yi(E.id,H.id,{stop_order:re.stop_order}),await yi(E.id,re.id,{stop_order:H.stop_order}),N(ue=>ue.map(Pe=>Pe.id===H.id?{...Pe,stop_order:re.stop_order}:Pe.id===re.id?{...Pe,stop_order:H.stop_order}:Pe))}catch(ue){console.error("Move up failed",ue),alert(u(I,"move_up_failed"))}}async function $(H){const Y=ie.findIndex(ue=>ue.id===H.id);if(Y===-1||Y>=ie.length-1)return;const re=ie[Y+1];try{await yi(E.id,H.id,{stop_order:re.stop_order}),await yi(E.id,re.id,{stop_order:H.stop_order}),N(ue=>ue.map(Pe=>Pe.id===H.id?{...Pe,stop_order:re.stop_order}:Pe.id===re.id?{...Pe,stop_order:H.stop_order}:Pe))}catch(ue){console.error("Move down failed",ue),alert(u(I,"move_down_failed"))}}function te(H){O(H.id),G({name:H.name||"",lat:H.lat,lng:H.lng,is_pickup:!!H.is_pickup})}function T(){O(null)}async function V(){if(!D||!E)return;const H={name:(P.name||"").trim(),lat:parseFloat(P.lat),lng:parseFloat(P.lng),is_pickup:!!P.is_pickup};if(!H.name||isNaN(H.lat)||isNaN(H.lng)){alert(u(I,"enter_valid_stop_fields"));return}try{await yi(E.id,D,H),N(Y=>Y.map(re=>re.id===D?{...re,...H}:re)),O(null)}catch(Y){console.error("Update stop failed",Y),alert(u(I,"update_stop_failed"))}}async function q(H){if(H.preventDefault(),!_.name.trim()){l("Vui lòng nhập tên tuyến đường");return}try{w(!0),p?await R2(p.id,_):await A2(_),oe(),ne()}catch{l(p?"Lỗi cập nhật tuyến đường":"Lỗi thêm tuyến đường")}finally{w(!1)}}async function de(H){if(window.confirm("Bạn có chắc muốn xóa tuyến đường này?"))try{await z2(H.id),ne()}catch(Y){console.error("Failed to delete route:",Y),l("Lỗi xóa tuyến đường")}}return u(I,"id"),u(I,"name"),u(I,"stops"),n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:n.jsx("span",{className:"text-3xl",children:"🗺️"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:u(I,"routes_page_title")}),n.jsxs("p",{className:"text-purple-100 mt-1",children:[u(I,"routes_total_label"),": ",e.length]})]})]}),n.jsxs("button",{className:"bg-white text-purple-600 px-6 py-3 rounded-lg hover:bg-purple-50 transition-colors font-medium shadow-lg flex items-center gap-2 disabled:opacity-50",onClick:ge,disabled:r,children:[n.jsx("span",{children:"➕"})," ",u(I,"add_route")]})]})}),a&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-300",children:[n.jsx("span",{className:"text-xl",children:"⚠️"}),n.jsx("span",{className:"font-medium",children:a})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:r?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"inline-block animate-spin text-6xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u(I,"loading_list")})]}):e.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("span",{className:"text-6xl mb-4 block",children:"🗺️"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-2",children:u(I,"none_yet")})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(I,"id")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(I,"route_name")}),n.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(I,"stops")}),n.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700 dark:text-gray-200",children:u(I,"actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(H=>{var Y,re,ue;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"text-gray-600 dark:text-gray-300 font-mono text-sm",children:["#",H.id]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold",children:((re=(Y=H.name)==null?void 0:Y.charAt(0))==null?void 0:re.toUpperCase())||"R"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:H.name})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full text-sm font-medium",children:[n.jsx("span",{children:"📍"})," ",((ue=H.stops)==null?void 0:ue.length)||0," ",u(I,"stops")]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs("button",{onClick:()=>ee(H),className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm font-medium",children:["📍 ",u(I,"manage_stops")]}),n.jsxs("button",{onClick:()=>z(H),className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-medium",children:["✏️ ",u(I,"edit_item")]}),n.jsxs("button",{onClick:()=>de(H),className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:["🗑️ ",u(I,"delete_item")]})]})})]},H.id)})})]})})})]}),n.jsx(Qt,{open:d,title:p?u(I,"edit_item"):u(I,"add_route"),onClose:oe,children:n.jsxs("form",{onSubmit:q,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u(I,"route_name")," *"]}),n.jsx("input",{type:"text",value:_.name,onChange:H=>g({..._,name:H.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:u(I,"route_name")})]}),n.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[n.jsx("button",{type:"button",onClick:oe,className:"px-4 py-2 border rounded hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600",disabled:v,children:u(I,"cancel_button")}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",disabled:v,children:v?u(I,"loading"):u(I,"save")})]})]})}),n.jsx(Qt,{open:b,title:E?`${u(I,"manage_stops")} - ${E.name}`:u(I,"manage_stops"),onClose:()=>C(!1),children:E?n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold mb-3",children:u(I,"add_new_stop")}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u(I,"stop_name")," *"]}),n.jsx("input",{type:"text",value:R.name,onChange:H=>M({...R,name:H.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:u(I,"stop_name")})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u(I,"latitude")," *"]}),n.jsx("input",{type:"number",step:"0.000001",value:R.lat,onChange:H=>M({...R,lat:H.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"21.027763"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u(I,"longitude")," *"]}),n.jsx("input",{type:"number",step:"0.000001",value:R.lng,onChange:H=>M({...R,lng:H.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"105.834160"})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:!!R.is_pickup,onChange:H=>M({...R,is_pickup:H.target.checked})}),u(I,"is_pickup_stop")]}),n.jsx("button",{onClick:async()=>{if(!R.name.trim()||R.lat===""||R.lng===""){alert(u(I,"enter_valid_stop_fields"));return}try{const H={name:R.name.trim(),lat:parseFloat(R.lat),lng:parseFloat(R.lng),is_pickup:!!R.is_pickup};await B2(E.id,H);const Y=await dm(E.id);N((Y==null?void 0:Y.stops)||[]),M({name:"",lat:"",lng:"",is_pickup:!0})}catch(H){console.error("Add stop failed",H),alert(u(I,"add_stop_failed"))}},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:u(I,"add_stop")})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 font-semibold",children:[u(I,"stops_list")," (",y.length,")"]}),ie.length===0?n.jsx("div",{className:"p-6 text-gray-500 dark:text-gray-400",children:u(I,"no_stops_yet_for_route")}):n.jsx("div",{className:"max-h-80 overflow-y-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-2 text-gray-700 dark:text-gray-200",children:u(I,"order")}),n.jsx("th",{className:"text-left px-4 py-2 text-gray-700 dark:text-gray-200",children:u(I,"name")}),n.jsx("th",{className:"text-left px-4 py-2 text-gray-700 dark:text-gray-200",children:"Lat"}),n.jsx("th",{className:"text-left px-4 py-2 text-gray-700 dark:text-gray-200",children:"Lng"}),n.jsx("th",{className:"text-left px-4 py-2 text-gray-700 dark:text-gray-200",children:u(I,"type")}),n.jsx("th",{className:"text-right px-4 py-2 text-gray-700 dark:text-gray-200",children:u(I,"actions")})]})}),n.jsx("tbody",{children:ie.map((H,Y)=>n.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700 align-top",children:[n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-block w-6 text-center font-medium text-gray-800 dark:text-gray-100",children:H.stop_order}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{title:u(I,"up"),onClick:()=>J(H),disabled:Y===0,className:`px-2 py-0.5 rounded ${Y===0?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500":"bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-100"}`,children:"▲"}),n.jsx("button",{title:u(I,"down"),onClick:()=>$(H),disabled:Y===ie.length-1,className:`px-2 py-0.5 rounded ${Y===ie.length-1?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500":"bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-100"}`,children:"▼"})]})]})}),n.jsx("td",{className:"px-4 py-2",children:D===H.id?n.jsx("input",{value:P.name,onChange:re=>G(ue=>({...ue,name:re.target.value})),className:"w-full px-2 py-1 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):n.jsx("span",{className:"text-gray-800 dark:text-gray-100",children:H.name})}),n.jsx("td",{className:"px-4 py-2 font-mono text-gray-800 dark:text-gray-100",children:D===H.id?n.jsx("input",{type:"number",step:"0.000001",value:P.lat,onChange:re=>G(ue=>({...ue,lat:re.target.value})),className:"w-full px-2 py-1 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):H.lat}),n.jsx("td",{className:"px-4 py-2 font-mono text-gray-800 dark:text-gray-100",children:D===H.id?n.jsx("input",{type:"number",step:"0.000001",value:P.lng,onChange:re=>G(ue=>({...ue,lng:re.target.value})),className:"w-full px-2 py-1 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):H.lng}),n.jsx("td",{className:"px-4 py-2",children:D===H.id?n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:!!P.is_pickup,onChange:re=>G(ue=>({...ue,is_pickup:re.target.checked}))}),u(I,"is_pickup_stop")]}):n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${H.is_pickup?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"}`,children:H.is_pickup?u(I,"pickup"):u(I,"dropoff")})}),n.jsx("td",{className:"px-4 py-2 text-right whitespace-nowrap",children:D===H.id?n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:T,className:"px-2 py-1 border rounded hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600 dark:text-gray-200",children:u(I,"cancel_button")}),n.jsx("button",{onClick:V,className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:u(I,"save")})]}):n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>te(H),className:"px-2 py-1 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded hover:bg-yellow-200 dark:hover:bg-yellow-800/40",children:u(I,"edit_item")}),n.jsx("button",{onClick:async()=>{if(confirm(u(I,"confirm_delete_stop")))try{await D2(E.id,H.id),N(re=>re.filter(ue=>ue.id!==H.id))}catch(re){console.error("Delete stop failed",re),alert(u(I,"delete_failed"))}},className:"px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800/40",children:u(I,"delete")})]})})]},H.id))})]})})]})]}):n.jsx("div",{className:"text-gray-500",children:u(I,"no_route_selected")})})]})}const Nr=Object.create(null);Nr.open="0";Nr.close="1";Nr.ping="2";Nr.pong="3";Nr.message="4";Nr.upgrade="5";Nr.noop="6";const wo=Object.create(null);Object.keys(Nr).forEach(e=>{wo[Nr[e]]=e});const eu={type:"error",data:"parser error"},Zx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Vx=typeof ArrayBuffer=="function",Wx=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,gh=({type:e,data:t},r,i)=>Zx&&t instanceof Blob?r?i(t):um(t,i):Vx&&(t instanceof ArrayBuffer||Wx(t))?r?i(t):um(new Blob([t]),i):i(Nr[e]+(t||"")),um=(e,t)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];t("b"+(i||""))},r.readAsDataURL(e)};function hm(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Zc;function $2(e,t){if(Zx&&e.data instanceof Blob)return e.data.arrayBuffer().then(hm).then(t);if(Vx&&(e.data instanceof ArrayBuffer||Wx(e.data)))return t(hm(e.data));gh(e,!1,r=>{Zc||(Zc=new TextEncoder),t(Zc.encode(r))})}const fm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ji=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<fm.length;e++)ji[fm.charCodeAt(e)]=e;const F2=e=>{let t=e.length*.75,r=e.length,i,a=0,l,d,f,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const x=new ArrayBuffer(t),_=new Uint8Array(x);for(i=0;i<r;i+=4)l=ji[e.charCodeAt(i)],d=ji[e.charCodeAt(i+1)],f=ji[e.charCodeAt(i+2)],p=ji[e.charCodeAt(i+3)],_[a++]=l<<2|d>>4,_[a++]=(d&15)<<4|f>>2,_[a++]=(f&3)<<6|p&63;return x},U2=typeof ArrayBuffer=="function",xh=(e,t)=>{if(typeof e!="string")return{type:"message",data:qx(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:H2(e.substring(1),t)}:wo[r]?e.length>1?{type:wo[r],data:e.substring(1)}:{type:wo[r]}:eu},H2=(e,t)=>{if(U2){const r=F2(e);return qx(r,t)}else return{base64:!0,data:e}},qx=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Kx="",Z2=(e,t)=>{const r=e.length,i=new Array(r);let a=0;e.forEach((l,d)=>{gh(l,!1,f=>{i[d]=f,++a===r&&t(i.join(Kx))})})},V2=(e,t)=>{const r=e.split(Kx),i=[];for(let a=0;a<r.length;a++){const l=xh(r[a],t);if(i.push(l),l.type==="error")break}return i};function W2(){return new TransformStream({transform(e,t){$2(e,r=>{const i=r.length;let a;if(i<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,i);else if(i<65536){a=new Uint8Array(3);const l=new DataView(a.buffer);l.setUint8(0,126),l.setUint16(1,i)}else{a=new Uint8Array(9);const l=new DataView(a.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let Vc;function to(e){return e.reduce((t,r)=>t+r.length,0)}function ro(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let a=0;a<t;a++)r[a]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function q2(e,t){Vc||(Vc=new TextDecoder);const r=[];let i=0,a=-1,l=!1;return new TransformStream({transform(d,f){for(r.push(d);;){if(i===0){if(to(r)<1)break;const p=ro(r,1);l=(p[0]&128)===128,a=p[0]&127,a<126?i=3:a===126?i=1:i=2}else if(i===1){if(to(r)<2)break;const p=ro(r,2);a=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),i=3}else if(i===2){if(to(r)<8)break;const p=ro(r,8),x=new DataView(p.buffer,p.byteOffset,p.length),_=x.getUint32(0);if(_>Math.pow(2,21)-1){f.enqueue(eu);break}a=_*Math.pow(2,32)+x.getUint32(4),i=3}else{if(to(r)<a)break;const p=ro(r,a);f.enqueue(xh(l?p:Vc.decode(p),t)),i=0}if(a===0||a>e){f.enqueue(eu);break}}}})}const Gx=4;function Je(e){if(e)return K2(e)}function K2(e){for(var t in Je.prototype)e[t]=Je.prototype[t];return e}Je.prototype.on=Je.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Je.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Je.prototype.off=Je.prototype.removeListener=Je.prototype.removeAllListeners=Je.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,a=0;a<r.length;a++)if(i=r[a],i===t||i.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Je.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,a=r.length;i<a;++i)r[i].apply(this,t)}return this};Je.prototype.emitReserved=Je.prototype.emit;Je.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Je.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ml=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Vt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),G2="arraybuffer";function Qx(e,...t){return t.reduce((r,i)=>(e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}const Q2=Vt.setTimeout,X2=Vt.clearTimeout;function Ol(e,t){t.useNativeTimers?(e.setTimeoutFn=Q2.bind(Vt),e.clearTimeoutFn=X2.bind(Vt)):(e.setTimeoutFn=Vt.setTimeout.bind(Vt),e.clearTimeoutFn=Vt.clearTimeout.bind(Vt))}const J2=1.33;function Y2(e){return typeof e=="string"?eS(e):Math.ceil((e.byteLength||e.size)*J2)}function eS(e){let t=0,r=0;for(let i=0,a=e.length;i<a;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function Xx(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function tS(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function rS(e){let t={},r=e.split("&");for(let i=0,a=r.length;i<a;i++){let l=r[i].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}class nS extends Error{constructor(t,r,i){super(t),this.description=r,this.context=i,this.type="TransportError"}}class yh extends Je{constructor(t){super(),this.writable=!1,Ol(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,i){return super.emitReserved("error",new nS(t,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=xh(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=tS(t);return r.length?"?"+r:""}}class sS extends yh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};V2(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Z2(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Xx()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Jx=!1;try{Jx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const iS=Jx;function aS(){}class oS extends sS{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,r){const i=this.request({method:"POST",data:t});i.on("success",r),i.on("error",(a,l)=>{this.onError("xhr post error",a,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=t}}class kr extends Je{constructor(t,r,i){super(),this.createRequest=t,Ol(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const r=Qx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&i.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var a;i.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=kr.requestsCount++,kr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=aS,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete kr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}kr.requestsCount=0;kr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",pm);else if(typeof addEventListener=="function"){const e="onpagehide"in Vt?"pagehide":"unload";addEventListener(e,pm,!1)}}function pm(){for(let e in kr.requests)kr.requests.hasOwnProperty(e)&&kr.requests[e].abort()}const lS=function(){const e=Yx({xdomain:!1});return e&&e.responseType!==null}();class cS extends oS{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=lS&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new kr(Yx,this.uri(),t)}}function Yx(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||iS))return new XMLHttpRequest}catch{}if(!t)try{return new Vt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ey=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class dS extends yh{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,i=ey?{}:Qx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,i)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],a=r===t.length-1;gh(i,this.supportsBinary,l=>{try{this.doWrite(i,l)}catch{}a&&Ml(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Xx()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Wc=Vt.WebSocket||Vt.MozWebSocket;class uS extends dS{createSocket(t,r,i){return ey?new Wc(t,r,i):r?new Wc(t,r):new Wc(t)}doWrite(t,r){this.ws.send(r)}}class hS extends yh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=q2(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),a=W2();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const l=()=>{i.read().then(({done:f,value:p})=>{f||(this.onPacket(p),l())}).catch(f=>{})};l();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],a=r===t.length-1;this._writer.write(i).then(()=>{a&&Ml(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const fS={websocket:uS,webtransport:hS,polling:cS},pS=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tu(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");r!=-1&&i!=-1&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let a=pS.exec(e||""),l={},d=14;for(;d--;)l[mS[d]]=a[d]||"";return r!=-1&&i!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=gS(l,l.path),l.queryKey=xS(l,l.query),l}function gS(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function xS(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,a,l){a&&(r[a]=l)}),r}const ru=typeof addEventListener=="function"&&typeof removeEventListener=="function",ko=[];ru&&addEventListener("offline",()=>{ko.forEach(e=>e())},!1);class fn extends Je{constructor(t,r){if(super(),this.binaryType=G2,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const i=tu(t);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=tu(r.host).host);Ol(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const a=i.prototype.name;this.transports.push(a),this._transportsByName[a]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=rS(this.opts.query)),ru&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ko.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Gx,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&fn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",fn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const a=this.writeBuffer[i].data;if(a&&(r+=Y2(a)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ml(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,i){return this._sendPacket("message",t,r,i),this}send(t,r,i){return this._sendPacket("message",t,r,i),this}_sendPacket(t,r,i,a){if(typeof r=="function"&&(a=r,r=void 0),typeof i=="function"&&(a=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const l={type:t,data:r,options:i};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(fn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ru&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=ko.indexOf(this._offlineEventListener);i!==-1&&ko.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}fn.protocol=Gx;class yS extends fn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),i=!1;fn.priorWebsocketSuccess=!1;const a=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",g=>{if(!i)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;fn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(_(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=r.name,this.emitReserved("upgradeError",v)}}))};function l(){i||(i=!0,_(),r.close(),r=null)}const d=g=>{const v=new Error("probe error: "+g);v.transport=r.name,l(),this.emitReserved("upgradeError",v)};function f(){d("transport closed")}function p(){d("socket closed")}function x(g){r&&g.name!==r.name&&l()}const _=()=>{r.removeListener("open",a),r.removeListener("error",d),r.removeListener("close",f),this.off("close",p),this.off("upgrading",x)};r.once("open",a),r.once("error",d),r.once("close",f),this.once("close",p),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}}let _S=class extends yS{constructor(t,r={}){const i=typeof t=="object"?t:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(a=>fS[a]).filter(a=>!!a)),super(t,i)}};function vS(e,t="",r){let i=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),i=tu(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const l=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+l+":"+i.port+t,i.href=i.protocol+"://"+l+(r&&r.port===i.port?"":":"+i.port),i}const bS=typeof ArrayBuffer=="function",wS=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ty=Object.prototype.toString,kS=typeof Blob=="function"||typeof Blob<"u"&&ty.call(Blob)==="[object BlobConstructor]",jS=typeof File=="function"||typeof File<"u"&&ty.call(File)==="[object FileConstructor]";function _h(e){return bS&&(e instanceof ArrayBuffer||wS(e))||kS&&e instanceof Blob||jS&&e instanceof File}function jo(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,i=e.length;r<i;r++)if(jo(e[r]))return!0;return!1}if(_h(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return jo(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&jo(e[r]))return!0;return!1}function NS(e){const t=[],r=e.data,i=e;return i.data=nu(r,t),i.attachments=t.length,{packet:i,buffers:t}}function nu(e,t){if(!e)return e;if(_h(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=nu(e[i],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=nu(e[i],t));return r}return e}function SS(e,t){return e.data=su(e.data,t),delete e.attachments,e}function su(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=su(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=su(e[r],t));return e}const CS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ES=5;var ve;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ve||(ve={}));class TS{constructor(t){this.replacer=t}encode(t){return(t.type===ve.EVENT||t.type===ve.ACK)&&jo(t)?this.encodeAsBinary({type:t.type===ve.EVENT?ve.BINARY_EVENT:ve.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ve.BINARY_EVENT||t.type===ve.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=NS(t),i=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(i),a}}function mm(e){return Object.prototype.toString.call(e)==="[object Object]"}class vh extends Je{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const i=r.type===ve.BINARY_EVENT;i||r.type===ve.BINARY_ACK?(r.type=i?ve.EVENT:ve.ACK,this.reconstructor=new PS(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(_h(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const i={type:Number(t.charAt(0))};if(ve[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===ve.BINARY_EVENT||i.type===ve.BINARY_ACK){const l=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(l,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(d)}if(t.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););i.nsp=t.substring(l,r)}else i.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const l=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}i.id=Number(t.substring(l,r+1))}if(t.charAt(++r)){const l=this.tryParse(t.substr(r));if(vh.isPayloadValid(i.type,l))i.data=l;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ve.CONNECT:return mm(r);case ve.DISCONNECT:return r===void 0;case ve.CONNECT_ERROR:return typeof r=="string"||mm(r);case ve.EVENT:case ve.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&CS.indexOf(r[0])===-1);case ve.ACK:case ve.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class PS{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=SS(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const LS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:vh,Encoder:TS,get PacketType(){return ve},protocol:ES},Symbol.toStringTag,{value:"Module"}));function sr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const MS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ry extends Je{constructor(t,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[sr(t,"open",this.onopen.bind(this)),sr(t,"packet",this.onpacket.bind(this)),sr(t,"error",this.onerror.bind(this)),sr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var i,a,l;if(MS.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:ve.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const _=this.ids++,g=r.pop();this._registerAckCallback(_,g),d.id=_}const f=(a=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||a===void 0?void 0:a.writable,p=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!f||(p?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var i;const a=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===t&&this.sendBuffer.splice(f,1);r.call(this,new Error("operation has timed out"))},a),d=(...f)=>{this.io.clearTimeoutFn(l),r.apply(this,f)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((i,a)=>{const l=(d,f)=>d?a(d):i(f);l.withError=!0,r.push(l),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...l)=>i!==this._queue[0]?void 0:(a!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...l)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ve.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ve.EVENT:case ve.BINARY_EVENT:this.onevent(t);break;case ve.ACK:case ve.BINARY_ACK:this.onack(t);break;case ve.DISCONNECT:this.ondisconnect();break;case ve.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let i=!1;return function(...a){i||(i=!0,r.packet({type:ve.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,t.data)}}}function qs(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}qs.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};qs.prototype.reset=function(){this.attempts=0};qs.prototype.setMin=function(e){this.ms=e};qs.prototype.setMax=function(e){this.max=e};qs.prototype.setJitter=function(e){this.jitter=e};class iu extends Je{constructor(t,r){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Ol(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new qs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||LS;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new _S(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const a=sr(r,"open",function(){i.onopen(),t&&t()}),l=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),t?t(f):this.maybeReconnectOnOpen()},d=sr(r,"error",l);if(this._timeout!==!1){const f=this._timeout,p=this.setTimeoutFn(()=>{a(),l(new Error("timeout")),r.close()},f);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(a),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(sr(t,"ping",this.onping.bind(this)),sr(t,"data",this.ondata.bind(this)),sr(t,"error",this.onerror.bind(this)),sr(t,"close",this.onclose.bind(this)),sr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Ml(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new ry(this,t,r),this.nsps[t]=i),i}_destroy(t){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let i=0;i<r.length;i++)this.engine.write(r[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const _i={};function No(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=vS(e,t.path||"/socket.io"),i=r.source,a=r.id,l=r.path,d=_i[a]&&l in _i[a].nsps,f=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let p;return f?p=new iu(i,t):(_i[a]||(_i[a]=new iu(i,t)),p=_i[a]),r.query&&!t.query&&(t.query=r.queryKey),p.socket(r.path,t)}Object.assign(No,{Manager:iu,Socket:ry,io:No,connect:No});let Mr=null;function Ks(){const{user:e}=ke(),[t,r]=k.useState(0),[i,a]=k.useState([]),[l,d]=k.useState(!1);k.useEffect(()=>e!=null&&e.id?(Mr||(Mr=No("http://localhost:25565",{transports:["websocket","polling"]}),Mr.on("connect",()=>{console.log("WebSocket connected:",Mr.id),Mr.emit("join",e.id)}),Mr.on("disconnect",()=>{console.log("WebSocket disconnected")})),Mr.on("new_notification",w=>{console.log("Received new notification:",w),!((e==null?void 0:e.role)==="driver"&&((w==null?void 0:w.type)==="emergency"||(w==null?void 0:w.notif_type)==="emergency"))&&(a(b=>[w,...b]),r(b=>b+1),"Notification"in window&&Notification.permission==="granted"&&new Notification(w.title,{body:w.body,icon:"/favicon.ico"}))}),()=>{Mr&&Mr.off("new_notification")}):void 0,[e==null?void 0:e.id]);const f=k.useCallback(async()=>{if(e!=null&&e.id)try{d(!0);const{data:v}=await le.get("/notifications");let w=v.notifications||[];e.role==="driver"&&(w=w.filter(b=>((b==null?void 0:b.type)||(b==null?void 0:b.notif_type))!=="emergency")),a(w),r(w.filter(b=>!b.is_read).length)}catch(v){console.error("Error loading notifications:",v),a([]),r(0)}finally{d(!1)}},[e==null?void 0:e.id,e==null?void 0:e.role]),p=k.useCallback(async()=>{if(e!=null&&e.id)try{const{data:v}=await le.get("/notifications/unread/count");r(v.unread_count||0)}catch(v){console.error("Error loading unread count:",v),r(0)}},[e==null?void 0:e.id,e==null?void 0:e.role]),x=k.useCallback(async v=>{try{await le.put(`/notifications/${v}`,{is_read:!0}),a(w=>w.map(b=>b.id===v?{...b,is_read:!0}:b)),r(w=>Math.max(0,w-1))}catch(w){console.error("Error marking notification as read:",w)}},[e==null?void 0:e.role]),_=k.useCallback(async v=>{try{await le.delete(`/notifications/${v}`),a(b=>b.filter(C=>C.id!==v));const w=i.find(b=>b.id===v);w&&!w.is_read&&r(b=>Math.max(0,b-1))}catch(w){console.error("Error deleting notification:",w)}},[e==null?void 0:e.role,i]),g=k.useCallback(async()=>{try{return"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":Notification.permission==="granted"}catch(v){return console.error("Error requesting notification permission:",v),!1}},[]);return k.useEffect(()=>{(async()=>{try{await Promise.all([f(),p(),g()])}catch(w){console.error("Error initializing notifications:",w)}})()},[f,p,g]),{notifications:i,unreadCount:t,loading:l,loadNotifications:f,loadUnreadCount:p,markAsRead:x,deleteNotification:_,requestPermission:g}}function OS({open:e,title:t,description:r,confirmText:i="Confirm",cancelText:a="Cancel",variant:l="danger",onConfirm:d,onCancel:f}){if(!e)return null;const p=l==="danger"?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white";return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:f}),n.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl",children:[n.jsxs("div",{className:"px-6 pt-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t}),r&&n.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:r})]}),n.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3 border-t border-gray-200 dark:border-gray-700 mt-4",children:[n.jsx("button",{onClick:f,className:"px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:a}),n.jsx("button",{onClick:d,className:`px-4 py-2 rounded-xl ${p}`,children:i})]})]})]})}function AS(){const e=ct(),[t,r]=k.useState([]),[i,a]=k.useState(""),[l,d]=k.useState(""),[f,p]=k.useState("info"),[x,_]=k.useState("medium"),[g,v]=k.useState("parent"),[w,b]=k.useState("all"),[C,E]=k.useState([]),[S,y]=k.useState([]),[N,R]=k.useState(!1),[M,D]=k.useState(!1),[O,P]=k.useState(!1),[G,I]=k.useState(""),[ne,ge]=k.useState(""),{lang:z,user:ee,clearUser:oe}=ke(),{unreadCount:ie,markAsRead:J,deleteNotification:$,loadUnreadCount:te}=Ks(),[T,V]=k.useState(!1),[q,de]=k.useState(null),[H,Y]=k.useState(!1),re=z==="vi"?"vi-VN":"en-US",{addToast:ue}=rx(),[Pe,Xt]=k.useState({open:!1,title:"",description:"",onConfirm:null,variant:"danger"});k.useEffect(()=>{if(!ee||ee.role!=="admin"&&ee.role!=="driver"){I(`${u(z,"permission_warning_title")}. ${u(z,"only_admin_driver_can_send")}`);const Q=setTimeout(()=>{oe(),e("/login")},3e3);return()=>clearTimeout(Q)}},[ee,e,oe]),k.useEffect(()=>{Z()},[]),k.useEffect(()=>{w==="specific"&&jt()},[g,w]);async function Z(){try{D(!0);const{data:Q}=await le.get("/notifications"),Se=Array.isArray(Q)?Q:(Q==null?void 0:Q.notifications)||[];r(Se),I("")}catch(Q){console.error("Failed to load notifications:",Q),r([]),I(u(z,"load_list_failed_try_again"))}finally{D(!1)}}k.useEffect(()=>{if(!H)return;const Q=setInterval(()=>{Z()},2e4);return()=>clearInterval(Q)},[H]);const K=async Q=>{if(de(Q),V(!0),!Q.is_read)try{await J(Q.id),r(Se=>Se.map(qe=>qe.id===Q.id?{...qe,is_read:!0}:qe)),await te()}catch(Se){console.error("Failed to mark as read:",Se)}},je=Q=>{Xt({open:!0,title:u(z,"confirm_delete_notification"),description:"",variant:"danger",onConfirm:async()=>{try{await $(Q),r(Se=>Se.filter(qe=>qe.id!==Q)),await te(),ue({type:"success",message:u(z,"delete")+" OK"})}catch(Se){console.error("Failed to delete notification:",Se),ue({type:"error",message:u(z,"delete_notification_failed")})}finally{Xt(Se=>({...Se,open:!1}))}}})},Ne=async()=>{try{await le.put("/notifications/mark-all-read"),r(Q=>Q.map(Se=>({...Se,is_read:!0}))),await te()}catch(Q){console.error("Failed to mark all read:",Q),ue({type:"error",message:u(z,"mark_all_read_failed")})}},Ee=()=>{Xt({open:!0,title:u(z,"cleanup_read_confirm"),description:"",variant:"danger",onConfirm:async()=>{try{await le.delete("/notifications/cleanup-read"),r(Q=>Q.filter(Se=>!Se.is_read)),ue({type:"success",message:u(z,"delete")+" OK"})}catch(Q){console.error("Failed to cleanup read notifications:",Q),ue({type:"error",message:u(z,"cleanup_read_failed")})}finally{Xt(Q=>({...Q,open:!1}))}}})},Ae=async Q=>{try{await le.put(`/notifications/${Q}`,{is_read:!1}),r(Se=>Se.map(qe=>qe.id===Q?{...qe,is_read:!1}:qe)),await te()}catch(Se){console.error("Failed to mark unread:",Se),ue({type:"error",message:u(z,"mark_unread_failed")})}},mt=async()=>{try{if(!q)return;const Q=`${q.title}

${q.body}

(${q.created_at?new Date(q.created_at).toLocaleString(re):""})`;await navigator.clipboard.writeText(Q),ue({type:"success",message:u(z,"copied_notification_content")})}catch(Q){console.error("Failed to copy notification",Q),ue({type:"error",message:u(z,"copy_failed")})}};async function jt(){try{R(!0);const Q=g==="parent"?"/admin/users?role=parent":"/admin/drivers",{data:Se}=await le.get(Q);if(g==="parent")y(Se.users||[]);else if(g==="driver"){const qe=(Se.drivers||[]).map(Cr=>({id:Cr.user_id,full_name:Cr.full_name,email:Cr.phone}));y(qe)}}catch(Q){console.error("Failed to load users:",Q),y([])}finally{R(!1)}}function Wr(Q){E(Se=>Se.includes(Q)?Se.filter(qe=>qe!==Q):[...Se,Q])}function Al(){E(S.map(Q=>Q.id))}function pa(){E([])}async function Gs(){var Q,Se,qe,Cr;if(!i.trim()||!l.trim()){I(u(z,"please_fill_title_body"));return}if(w==="specific"&&C.length===0){I(u(z,"please_select_at_least_one"));return}try{P(!0),I(""),ge("");const Jt={title:i,body:l,type:f,priority:x};w==="all"?Jt.target_role=g:Jt.target_users=C,await le.post("/notifications/send",Jt),a(""),d(""),E([]);const Rl=w==="all"?u(z,"all_lower"):C.length,xa=g==="parent"?u(z,"parent_lower"):g==="driver"?u(z,"driver_lower"):u(z,"user_lower");ge(`✅ ${u(z,"sent_notification_to")} ${Rl} ${xa}`),setTimeout(()=>ge(""),3e3),Z()}catch(Jt){console.error("Failed to send notification:",Jt),((Q=Jt.response)==null?void 0:Q.status)===403?(I(u(z,"session_expired_or_forbidden_admin")),setTimeout(()=>{oe(),e("/login")},3e3)):((Se=Jt.response)==null?void 0:Se.status)===401?(I(u(z,"session_expired_or_forbidden_admin")),setTimeout(()=>{oe(),e("/login")},2e3)):I(((Cr=(qe=Jt.response)==null?void 0:qe.data)==null?void 0:Cr.error)||u(z,"error"))}finally{P(!1)}}const ma=[{value:"info",label:u(z,"info"),icon:ea,color:"blue"},{value:"alert",label:u(z,"warning"),icon:ar,color:"red"},{value:"success",label:u(z,"success"),icon:vt,color:"green"}],ga=[{value:"low",label:u(z,"low"),color:"gray"},{value:"medium",label:u(z,"medium"),color:"yellow"},{value:"high",label:u(z,"high"),color:"red"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Yo,{className:"w-6 h-6 text-white"}),n.jsx("h2",{className:"text-xl font-bold text-white",children:u(z,"send_notifications")})]})}),n.jsxs("div",{className:"p-6",children:[ee&&ee.role!=="admin"&&ee.role!=="driver"&&n.jsx("div",{className:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ar,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:["⚠️ ",u(z,"permission_warning_title")]}),n.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:[u(z,"current_role"),": ",n.jsx("strong",{children:ee.role})]}),n.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:u(z,"only_admin_driver_can_send")}),n.jsx("button",{onClick:()=>{oe(),e("/login")},className:"mt-3 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors",children:u(z,"logout_and_login")})]})]})}),G&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[n.jsx(ar,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-600 dark:text-red-400",children:G})]}),ne&&n.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2",children:[n.jsx(vt,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-600 dark:text-green-400",children:ne})]}),n.jsxs("form",{onSubmit:Q=>{Q.preventDefault(),Gs()},className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(z,"send_to")}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("button",{type:"button",onClick:()=>v("parent"),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${g==="parent"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:[n.jsx(yn,{className:`w-5 h-5 ${g==="parent"?"text-blue-600":"text-gray-500"}`}),n.jsx("span",{className:`text-sm ${g==="parent"?"text-blue-600 font-medium":"text-gray-600 dark:text-gray-400"}`,children:u(z,"parents_label")})]}),n.jsxs("button",{type:"button",onClick:()=>v("driver"),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${g==="driver"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:[n.jsx(jr,{className:`w-5 h-5 ${g==="driver"?"text-blue-600":"text-gray-500"}`}),n.jsx("span",{className:`text-sm ${g==="driver"?"text-blue-600 font-medium":"text-gray-600 dark:text-gray-400"}`,children:u(z,"drivers_label")})]}),n.jsxs("button",{type:"button",onClick:()=>v("all"),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${g==="all"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:[n.jsx(xn,{className:`w-5 h-5 ${g==="all"?"text-blue-600":"text-gray-500"}`}),n.jsx("span",{className:`text-sm ${g==="all"?"text-blue-600 font-medium":"text-gray-600 dark:text-gray-400"}`,children:u(z,"all_label")})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(z,"send_mode")}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{type:"button",onClick:()=>{b("all"),E([])},className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 transition-all ${w==="all"?"border-green-600 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:[n.jsx(ij,{className:`w-5 h-5 ${w==="all"?"text-green-600":"text-gray-500"}`}),n.jsx("span",{className:`text-sm ${w==="all"?"text-green-600 font-medium":"text-gray-600 dark:text-gray-400"}`,children:u(z,"send_to_all")})]}),n.jsxs("button",{type:"button",onClick:()=>b("specific"),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 transition-all ${w==="specific"?"border-green-600 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:[n.jsx(ej,{className:`w-5 h-5 ${w==="specific"?"text-green-600":"text-gray-500"}`}),n.jsx("span",{className:`text-sm ${w==="specific"?"text-green-600 font-medium":"text-gray-600 dark:text-gray-400"}`,children:u(z,"choose_recipients")})]})]})]}),w==="specific"&&n.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[u(z,"select_recipients")," (",C.length," ",u(z,"selected"),")"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:Al,className:"text-xs px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50",children:u(z,"select_all")}),n.jsx("button",{type:"button",onClick:pa,className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:u(z,"clear_selection")})]})]}),N?n.jsx("div",{className:"text-center py-4 text-gray-500",children:u(z,"loading_users_list")}):S.length===0?n.jsx("div",{className:"text-center py-4 text-gray-500",children:u(z,"no_users")}):n.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:S.map(Q=>n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:C.includes(Q.id),onChange:()=>Wr(Q.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:Q.full_name}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:Q.email})]})]},Q.id))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(z,"notification_type")}),n.jsx("select",{value:f,onChange:Q=>p(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:ma.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(z,"priority_level")}),n.jsx("select",{value:x,onChange:Q=>_(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:ga.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(z,"title_label")}),n.jsx("input",{type:"text",value:i,onChange:Q=>a(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:u(z,"title_placeholder"),disabled:O})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(z,"body_label")}),n.jsx("textarea",{value:l,onChange:Q=>d(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:u(z,"body_placeholder"),disabled:O,rows:"4"})]}),n.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-cyan-700 disabled:from-gray-400 disabled:to-gray-400 font-medium flex items-center justify-center gap-2 transition-all",disabled:O||!i.trim()||!l.trim()||!ee||ee.role!=="admin"&&ee.role!=="driver",children:[n.jsx(Yo,{className:"w-5 h-5"}),O?u(z,"sending"):ee&&ee.role!=="admin"&&ee.role!=="driver"?`🔒 ${u(z,"no_permission_short")}`:u(z,"send_notification")]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xn,{className:"w-6 h-6 text-white"}),n.jsx("h2",{className:"text-xl font-bold text-white",children:u(z,"notifications_history")}),n.jsxs("span",{className:"ml-auto text-white/90 text-sm",children:[u(z,"unread_count_label"),": ",ie||0]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("button",{onClick:Ne,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:u(z,"mark_all_read")}),n.jsx("button",{onClick:Ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded text-sm",children:u(z,"delete_read")}),n.jsx("button",{onClick:Z,className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded text-sm",children:u(z,"refresh_button")}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:H,onChange:Q=>Y(Q.target.checked)}),u(z,"auto_refresh_20s_label")]})]}),M&&n.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:u(z,"loading")}),t.length===0&&!M&&n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:u(z,"no_notifications")}),n.jsx("div",{className:"space-y-3",children:t.map(Q=>{const Se=Q.type==="alert"?"border-l-red-400":Q.type==="success"?"border-l-green-400":"border-l-blue-400";return n.jsx("div",{className:`p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${Q.is_read?"":"bg-blue-50/50 dark:bg-blue-900/10"} border-l-4 ${Se}`,children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("button",{onClick:()=>K(Q),className:"flex-1 text-left",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:Q.title}),Q.priority==="high"&&n.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs rounded-full",children:u(z,"important")}),!Q.is_read&&n.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:u(z,"new_label")})]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:Q.body}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-500",children:[n.jsx("span",{children:Q.created_at?new Date(Q.created_at).toLocaleString(re):"-"}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[u(z,"sent_to"),": ",Q.target_role==="parent"?u(z,"parents_label"):Q.target_role==="driver"?u(z,"drivers_label"):u(z,"all_label")]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>K(Q),title:u(z,"view_details"),className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:n.jsx(ih,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),n.jsx("button",{onClick:()=>je(Q.id),title:u(z,"delete_label"),className:"p-2 rounded hover:bg-red-50 dark:hover:bg-red-900/30",children:n.jsx(la,{className:"w-4 h-4 text-red-600"})})]})]})},Q.id)})})]})]}),n.jsx(Qt,{open:T,title:(q==null?void 0:q.title)||u(z,"notification_detail_title"),onClose:()=>V(!1),size:"md",children:q?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${q.type==="alert"?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-300":q.type==="success"?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300"}`,children:q.type==="alert"?n.jsx(ar,{className:"w-5 h-5"}):q.type==="success"?n.jsx(vt,{className:"w-5 h-5"}):n.jsx(ea,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[q.priority==="high"&&n.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 text-xs rounded-full",children:u(z,"important")}),q.type&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded-full",children:q.type}),n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${q.is_read?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:q.is_read?u(z,"read_label"):u(z,"unread_label")})]}),n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[n.jsx(Xe,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:q.created_at?new Date(q.created_at).toLocaleString(re):"-"}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[u(z,"sent_to"),": ",q.target_role==="parent"?u(z,"parents_label"):q.target_role==="driver"?u(z,"drivers_label"):u(z,"all_label")]}),q.sender_name&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{children:[u(z,"sender"),": ",q.sender_name]})]})]})]})]}),n.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 p-4",children:n.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap leading-relaxed",children:q.body})}),n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[q.is_read?n.jsx("button",{onClick:()=>Ae(q.id),className:"px-3 py-1.5 text-sm rounded bg-yellow-100 hover:bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:u(z,"mark_unread")}):n.jsx("button",{onClick:()=>J(q.id),className:"px-3 py-1.5 text-sm rounded bg-green-100 hover:bg-green-200 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:u(z,"mark_read")}),n.jsxs("button",{onClick:mt,className:"px-3 py-1.5 text-sm rounded bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200 flex items-center gap-1",children:[n.jsx(sh,{className:"w-4 h-4"})," ",u(z,"copy")]}),n.jsx("button",{onClick:()=>{V(!1),je(q.id)},className:"px-3 py-1.5 text-sm rounded bg-red-600 hover:bg-red-700 text-white",children:u(z,"delete_label")})]})]}):n.jsx("div",{className:"text-gray-500",children:u(z,"no_data_label")})}),n.jsx(OS,{open:Pe.open,title:Pe.title,description:Pe.description,variant:Pe.variant,confirmText:u(z,"delete_label"),cancelText:u(z,"cancel"),onCancel:()=>Xt(Q=>({...Q,open:!1})),onConfirm:Pe.onConfirm})]})}function RS(){const{lang:e}=ke(),t=e==="vi"?"vi-VN":"en-US",[r,i]=k.useState([]),[a,l]=k.useState(!1),[d,f]=k.useState(!1),[p,x]=k.useState(null);k.useEffect(()=>{_()},[]);async function _(){try{l(!0);const{data:w}=await le.get("/admin/notifications"),b=Array.isArray(w)?w:(w==null?void 0:w.notifications)||[];i(b)}catch(w){console.error("Failed to load admin notifications history:",w),i([])}finally{l(!1)}}const g=w=>{x(w),f(!0)},v=async()=>{try{if(!p)return;const w=`${p.title}

${p.body||""}

(${p.created_at?new Date(p.created_at).toLocaleString(t):""})`;await navigator.clipboard.writeText(w),alert(u(e,"copied_notification_content"))}catch(w){console.error("Failed to copy notification",w),alert(u(e,"copy_failed"))}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xn,{className:"w-6 h-6 text-white"}),n.jsxs("h2",{className:"text-xl font-bold text-white",children:[u(e,"notifications_history")," (",r.length,")"]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:_,className:"text-sm text-white/90 bg-white/10 px-3 py-1 rounded-md",children:u(e,"refresh_button")})})]}),n.jsxs("div",{className:"p-4",children:[a&&n.jsx("div",{className:"text-sm text-gray-500",children:u(e,"loading")}),!a&&r.length===0&&n.jsx("div",{className:"text-sm text-gray-500",children:u(e,"no_notifications")}),n.jsx("div",{className:"space-y-3",children:r.map(w=>n.jsxs("div",{className:"p-3 border rounded-lg flex items-start justify-between bg-white dark:bg-gray-800",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:w.title}),w.priority&&n.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:u(e,w.priority)||w.priority}),w.type&&n.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:w.type})]}),w.body&&n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:w.body}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:[n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Xe,{className:"w-3.5 h-3.5"}),w.created_at?new Date(w.created_at).toLocaleString(t):"-"]}),w.email&&n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(jr,{className:"w-3.5 h-3.5"}),w.email]}),w.target_role&&n.jsxs("span",{className:"inline-flex items-center gap-1",children:["🎯 ",w.target_role]})]})]}),n.jsx("div",{className:"ml-4 flex-shrink-0 flex flex-col items-end gap-2",children:n.jsxs("button",{onClick:()=>g(w),className:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[n.jsx(ih,{className:"w-4 h-4"})," ",u(e,"view_details")]})})]},w.id))})]})]}),n.jsx(Qt,{open:d,title:(p==null?void 0:p.title)||u(e,"notification_detail_title"),onClose:()=>f(!1),size:"md",children:p?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[n.jsx(Xe,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:p.created_at?new Date(p.created_at).toLocaleString(t):"-"})]}),n.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 p-4",children:n.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap leading-relaxed",children:p.body})}),n.jsx("div",{className:"flex items-center justify-end gap-2",children:n.jsxs("button",{onClick:v,className:"px-3 py-1.5 text-sm rounded bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200 flex items-center gap-1",children:[n.jsx(sh,{className:"w-4 h-4"})," ",u(e,"copy")]})})]}):n.jsx("div",{className:"text-gray-500",children:u(e,"no_data_label")})})]})}function zS(){const{user:e,clearUser:t,lang:r}=ke(),i=ct(),a=()=>{confirm(u(r,"confirm_logout")||"Are you sure you want to logout?")&&(t(),i("/login"))},l=d=>({admin:{icon:"👑",name:u(r,"admin_role"),color:"from-red-500 to-pink-500",bg:"bg-red-50",text:"text-red-800"},driver:{icon:"🚗",name:u(r,"driver_role"),color:"from-blue-500 to-cyan-500",bg:"bg-blue-50",text:"text-blue-800"},parent:{icon:"👨‍👩‍👧",name:u(r,"parent_role"),color:"from-green-500 to-teal-500",bg:"bg-green-50",text:"text-green-800"}})[d]||{icon:"👤",name:d,color:"from-gray-500 to-gray-600",bg:"bg-gray-50",text:"text-gray-800"};return n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:n.jsx("span",{className:"text-3xl",children:"🔐"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:u(r,"session_manage_title")}),n.jsx("p",{className:"text-indigo-100 mt-1",children:u(r,"current_account_info")})]})]})}),e?n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[n.jsx("div",{className:`bg-gradient-to-r ${l(e.role).color} p-6 text-white`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-5xl",children:l(e.role).icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold",children:e.full_name||e.username||e.email}),n.jsx("p",{className:"text-white/80 mt-1",children:l(e.role).name})]})]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:u(r,"username")}),n.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:e.username||"N/A"})]}),n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:u(r,"email")}),n.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:e.email||"N/A"})]}),n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:u(r,"role")}),n.jsx("div",{children:n.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full ${l(e.role).bg} ${l(e.role).text} font-semibold`,children:[n.jsx("span",{className:"text-xl",children:l(e.role).icon}),l(e.role).name]})})]}),n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:u(r,"user_id")}),n.jsxs("div",{className:"text-lg font-mono font-semibold text-gray-800 dark:text-gray-100",children:["#",e.id||"N/A"]})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200",children:n.jsxs("button",{onClick:a,className:"w-full bg-gradient-to-r from-red-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-red-700 hover:to-pink-700 transition-all font-medium shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:[n.jsx("span",{children:"🚪"})," ",u(r,"logout")]})})]})]}):n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-12 text-center",children:[n.jsx("span",{className:"text-6xl mb-4 block",children:"🔒"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:u(r,"not_logged_in_title")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:u(r,"please_login_desc")}),n.jsx("button",{onClick:()=>i("/login"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all font-medium shadow-lg",children:u(r,"go_to_login")})]})]})})}function BS(){const{lang:e}=ke(),[t,r]=k.useState([]),[i,a]=k.useState("pending"),[l,d]=k.useState(!1),[f,p]=k.useState(null),[x,_]=k.useState(!1);async function g(){d(!0),p(null);try{const b=await C2(i);r(b.requests||[])}catch(b){(b==null?void 0:b.status)===401||(b==null?void 0:b.status)===403?p(u(e,"session_expired_or_forbidden_admin")):p(u(e,"load_list_failed_try_again"))}finally{d(!1)}}k.useEffect(()=>{g()},[i]),k.useEffect(()=>{if(!x)return;const b=setInterval(()=>{g()},2e4);return()=>clearInterval(b)},[x,i]);async function v(b){try{await E2(b),await g()}catch{alert(u(e,"approve_failed"))}}async function w(b){const C=prompt(u(e,"reject_reason_optional"))||void 0;try{await T2({request_id:b,notes:C}),await g()}catch{alert(u(e,"reject_failed"))}}return n.jsxs("div",{className:"text-gray-900 dark:text-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold",children:u(e,"password_resets_page_title")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:i,onChange:b=>a(b.target.value),className:"border rounded px-2 py-1 dark:bg-gray-800 dark:border-gray-600",children:[n.jsx("option",{value:"pending",children:u(e,"pending")}),n.jsx("option",{value:"approved",children:u(e,"approved")}),n.jsx("option",{value:"rejected",children:u(e,"rejected")}),n.jsx("option",{value:"all",children:u(e,"all")})]}),n.jsx("button",{onClick:g,className:"px-3 py-1 bg-blue-600 text-white rounded",children:u(e,"refresh")}),n.jsxs("label",{className:"ml-2 inline-flex items-center gap-2 text-sm text-gray-600",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:b=>_(b.target.checked)}),u(e,"auto_refresh_20s")]})]})]}),f&&n.jsx("div",{className:"mb-3 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded",children:f}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded shadow border border-gray-100 dark:border-gray-700 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700 text-left",children:[n.jsx("th",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:u(e,"email")}),n.jsx("th",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:u(e,"name")}),n.jsx("th",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:u(e,"role")}),n.jsx("th",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:u(e,"phone")}),n.jsx("th",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:u(e,"status")}),n.jsx("th",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:u(e,"time")}),n.jsx("th",{className:"px-4 py-2 text-right text-gray-700 dark:text-gray-200",children:u(e,"actions")})]})}),n.jsx("tbody",{children:l?n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-4 text-gray-600 dark:text-gray-300",colSpan:7,children:u(e,"loading")})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{className:"px-4 py-4 text-gray-600 dark:text-gray-300",colSpan:7,children:u(e,"no_requests")})}):t.map(b=>n.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700",children:[n.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:b.email}),n.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:b.full_name||"-"}),n.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:b.role==="admin"?u(e,"admin_role"):b.role==="driver"?u(e,"driver_role"):b.role==="parent"?u(e,"parent_role"):b.role}),n.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:b.phone}),n.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:b.status==="pending"?u(e,"pending"):b.status==="approved"?u(e,"approved"):b.status==="rejected"?u(e,"rejected"):b.status}),n.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:b.requested_at?new Date(b.requested_at).toLocaleString():"-"}),n.jsx("td",{className:"px-4 py-2 text-right",children:i==="pending"?n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:()=>v(b.id),className:"px-3 py-1 bg-green-600 text-white rounded",children:u(e,"approve")}),n.jsx("button",{onClick:()=>w(b.id),className:"px-3 py-1 bg-gray-300 dark:bg-gray-600 dark:text-gray-100 rounded",children:u(e,"reject")})]}):n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"—"})})]},b.id))})]})})]})}function DS({isMobileMenuOpen:e,setIsMobileMenuOpen:t}){const{language:r}=Us(),{unreadCount:i}=Ks(),a=[{to:"/admin",label:u(r,"dashboard"),icon:n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v0a2 2 0 01-2 2H10a2 2 0 01-2-2v0z"})]})},{to:"/admin/password-resets",label:u(r,"password_resets_page_title"),icon:n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 9 6.343 9 8s1.343 3 3 3z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21v-2a4 4 0 00-4-4H9a4 4 0 00-4 4v2"})]})},{to:"/admin/tracking",label:u(r,"tracking"),icon:n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})},{to:"/admin/schedule",label:u(r,"schedule"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{to:"/admin/buses",label:u(r,"buses"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{to:"/admin/drivers",label:u(r,"drivers"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{to:"/admin/students",label:u(r,"students"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13.5 9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})},{to:"/admin/routes",label:u(r,"routes"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},{to:"/admin/parents",label:u(r,"parents"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})},{to:"/admin/users",label:u(r,"accounts"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{to:"/admin/session",label:u(r,"schedules"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})},{to:"/admin/notifications",label:u(r,"notifications"),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),showBadge:!0},{to:"/admin/notifications-history",label:u(r,"notifications_history"),icon:n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}];return n.jsxs(n.Fragment,{children:[n.jsx("aside",{className:"hidden lg:flex lg:flex-col lg:w-72 lg:fixed lg:inset-y-0 bg-gradient-to-b from-slate-900 via-purple-900 to-slate-900 dark:from-gray-900 dark:via-blue-900 dark:to-gray-900",children:n.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[n.jsx("div",{className:"flex items-center h-16 px-6 bg-gradient-to-r from-blue-600 to-purple-600",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h2",{className:"text-sm font-bold text-white",children:"SchoolBus"}),n.jsx("p",{className:"text-xs text-blue-200",children:"Admin Panel"})]})]})}),n.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:a.map((l,d)=>n.jsxs(Dp,{to:l.to,className:({isActive:f})=>`group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 transform hover:scale-105 ${f?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg active":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[n.jsx("div",{className:"mr-3 flex-shrink-0",children:l.icon}),n.jsx("span",{className:"truncate",children:l.label}),l.showBadge&&i>0&&n.jsx("span",{className:"ml-auto mr-2 px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:i>99?"99+":i}),n.jsx("div",{className:"ml-auto",children:n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity duration-200"})})]},l.to))}),n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-xl p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Need Help?"}),n.jsx("p",{className:"text-xs text-gray-300 mb-3",children:"Check our documentation for more info."}),n.jsx("button",{className:"w-full px-3 py-2 text-xs font-medium text-blue-300 bg-blue-500/20 rounded-lg hover:bg-blue-500/30 transition-colors",children:"View Docs"})]})})]})}),n.jsx("aside",{className:`lg:hidden fixed inset-y-0 left-0 z-50 w-72 bg-gradient-to-b from-slate-900 via-purple-900 to-slate-900 transform ${e?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:n.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[n.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-gradient-to-r from-blue-600 to-purple-600",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h2",{className:"text-sm font-bold text-white",children:"SchoolBus"}),n.jsx("p",{className:"text-xs text-blue-200",children:"Admin Panel"})]})]}),n.jsx("button",{onClick:()=>t(!1),className:"p-2 rounded-lg text-white hover:bg-white/20 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:a.map(l=>n.jsxs(Dp,{to:l.to,onClick:()=>t(!1),className:({isActive:d})=>`group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${d?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg active":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[n.jsx("div",{className:"mr-3 flex-shrink-0",children:l.icon}),n.jsx("span",{className:"truncate",children:l.label}),l.showBadge&&i>0&&n.jsx("span",{className:"ml-auto mr-2 px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:i>99?"99+":i}),n.jsx("div",{className:"ml-auto",children:n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity duration-200"})})]},l.to))})]})}),n.jsx("div",{className:"hidden lg:block lg:w-72 lg:flex-shrink-0"})]})}function ny(){const{isDark:e,toggleTheme:t}=bl();return n.jsx("button",{onClick:t,className:`relative inline-flex h-10 w-20 items-center justify-center rounded-full \r
                     bg-gradient-to-r from-purple-400 to-pink-400 dark:from-blue-600 dark:to-purple-600 \r
                     transition-all duration-300 ease-in-out transform hover:scale-105 \r
                     focus:outline-none focus:ring-4 focus:ring-purple-300 dark:focus:ring-blue-800 \r
                     shadow-lg hover:shadow-xl`,"aria-label":e?"Switch to light mode":"Switch to dark mode",children:n.jsx("div",{className:`absolute left-1 top-1 h-8 w-8 rounded-full bg-white dark:bg-gray-800 
                          transition-transform duration-300 ease-in-out shadow-md
                          ${e?"translate-x-10":"translate-x-0"}`,children:n.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e?n.jsx("svg",{className:"h-4 w-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):n.jsx("svg",{className:"h-4 w-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})})})}function IS(){const{language:e}=Us(),[t,r]=k.useState(!1),{logout:i}=Fs(),[a,l]=k.useState(!1);return n.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[t&&n.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>r(!1)}),n.jsx(DS,{isMobileMenuOpen:t,setIsMobileMenuOpen:r}),n.jsxs("div",{className:"flex-1 flex flex-col min-h-screen lg:ml-0",children:[n.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>r(!0),className:"lg:hidden p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:u(e,"admin_panel")}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:u(e,"smart_school_bus")})]})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[n.jsx("div",{className:"hidden sm:block",children:n.jsx(qn,{})}),n.jsx(ny,{}),n.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-red-50 hover:bg-red-100 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 px-3 py-2 rounded-lg font-medium transition-colors",children:[n.jsx(ah,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:u(e,"logout")})]})]})]})}),n.jsx("main",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-900",children:n.jsx("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:n.jsxs(nh,{children:[n.jsx(we,{path:"",element:n.jsx(k2,{})}),n.jsx(we,{path:"users",element:n.jsx(P2,{})}),n.jsx(we,{path:"parents",element:n.jsx(L2,{})}),n.jsx(we,{path:"password-resets",element:n.jsx(BS,{})}),n.jsx(we,{path:"students",element:n.jsx(M2,{})}),n.jsx(we,{path:"tracking",element:n.jsx(f2,{})}),n.jsx(we,{path:"schedule",element:n.jsx(p2,{})}),n.jsx(we,{path:"buses",element:n.jsx(N2,{})}),n.jsx(we,{path:"drivers",element:n.jsx(S2,{})}),n.jsx(we,{path:"routes",element:n.jsx(I2,{})}),n.jsx(we,{path:"notifications",element:n.jsx(AS,{})}),n.jsx(we,{path:"notifications-history",element:n.jsx(RS,{})}),n.jsx(we,{path:"session",element:n.jsx(zS,{})})]})})})]}),n.jsx(Qt,{open:a,onClose:()=>l(!1),title:u(e,"logout"),size:"sm",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:u(e,"confirm_logout")}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:u(e,"cancel")}),n.jsx("button",{onClick:()=>{l(!1);try{i()}catch{}window.location.replace("/login")},className:"px-4 py-2 rounded-xl bg-red-600 text-white hover:bg-red-700",children:u(e,"logout")})]})]})})]})}function sy({role:e="parent",className:t=""}){const{unreadCount:r}=Ks(),{language:i}=Us(),a=dr(),l=e==="admin"?"/admin/notifications":e==="driver"?"/driver/notifications":"/parent/notifications",d=a.pathname===l;return e==="admin"||e==="driver"?n.jsxs(_t,{to:l,className:`group flex items-center px-4 py-3 text-sm font-semibold rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md ${d?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/50 scale-105":"text-gray-700 dark:text-gray-300 hover:bg-white/60 dark:hover:bg-gray-700/60"} ${t}`,children:[n.jsxs("div",{className:`${d?"bg-white/20":"bg-gray-100 dark:bg-gray-700 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30"} p-2 rounded-lg mr-3 transition-colors duration-200 relative`,children:[n.jsx(xn,{className:`${d?"text-white":"text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400"} h-5 w-5 transition-colors duration-200`}),r>0&&n.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-5 h-5 text-[10px] font-bold text-white bg-red-600 rounded-full animate-pulse",children:r>99?"99":r})]}),n.jsx("span",{className:"truncate",children:u(i,"notifications")}),r>0&&!d&&n.jsx("span",{className:"ml-auto px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:r>99?"99+":r})]}):n.jsxs(_t,{to:l,className:`flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors ${t}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx(xn,{className:"w-5 h-5"}),r>0&&n.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-600 rounded-full animate-pulse",children:r>99?"99":r})]}),n.jsx("span",{children:u(i,"notifications")})]})}function $S(){const e=ct(),{lang:t}=ke(),[r,i]=k.useState([]),[a,l]=k.useState(null),[d,f]=k.useState([]),[p,x]=k.useState(!0),[_,g]=k.useState(null);k.useEffect(()=>{(async()=>{var N,R;try{x(!0),console.log("Fetching driver schedule...");const M=await Ai();if(console.log("Schedule data received:",M),M.success===!1)g({type:"warning",message:u(t,"no_schedules_assigned_short")}),i([]);else if(M.success&&M.schedules)if(i(M.schedules),M.schedules.length===0)g({type:"info",message:u(t,"no_schedules_contact_admin")});else{const D=M.schedules.find(O=>O.status==="active");if(D){l(D),console.log("Loading students for active schedule:",D.schedule_id);const O=await Ns(D.schedule_id);console.log("Students data received:",O),O.success&&O.students&&f(O.students)}}}catch(M){console.error("Error fetching data:",M),g({type:"error",message:((R=(N=M.response)==null?void 0:N.data)==null?void 0:R.message)||u(t,"data_load_failed_generic")})}finally{x(!1)}})()},[]);const v=async(y,N)=>{var R,M;try{const D=await mh(y,N);D.success&&(f(O=>O.map(P=>P.trip_id===y?{...P,trip_status:N}:P)),g({type:"success",message:D.message||u(t,"update_status_success")}))}catch(D){console.error("Error updating student status:",D),g({type:"error",message:((M=(R=D.response)==null?void 0:R.data)==null?void 0:M.message)||u(t,"update_status_failed")})}},w=()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async y=>{try{await u2(y.coords.latitude,y.coords.longitude,y.coords.accuracy),g({type:"success",message:u(t,"location_updated")})}catch{g({type:"error",message:u(t,"location_update_failed")})}},y=>{g({type:"error",message:u(t,"cannot_get_current_location")})})},b=async y=>{l(y);try{const N=await Ns(y.schedule_id);N.success&&N.students&&f(N.students)}catch{g({type:"error",message:u(t,"load_students_failed")})}},C=async y=>{var N,R;try{if((await Bx(y)).success){g({type:"success",message:u(t,"start_trip_success")});const D=await Ai();if(D.success&&D.schedules){i(D.schedules);const O=D.schedules.find(P=>P.schedule_id===y);if(O){l(O);try{const P=await Ns(y);P.success&&P.students&&(f(P.students),setTimeout(()=>{e("/driver/map",{state:{schedule:O,students:P.students}})},500))}catch(P){console.error("Error fetching students:",P)}}}}}catch(M){console.error("Error starting trip:",M),g({type:"error",message:((R=(N=M.response)==null?void 0:N.data)==null?void 0:R.message)||u(t,"start_trip_failed")})}},E=async y=>{var N,R;try{if((await Dx(y)).success){g({type:"success",message:u(t,"complete_trip_success")});const D=await Ai();D.success&&D.schedules&&(i(D.schedules),l(null),f([]))}}catch(M){console.error("Error completing trip:",M),g({type:"error",message:((R=(N=M.response)==null?void 0:N.data)==null?void 0:R.message)||u(t,"complete_trip_failed")})}},S=y=>{switch(y){case"waiting":return n.jsx(Xe,{className:"w-4 h-4"});case"onboard":return n.jsx(at,{className:"w-4 h-4"});case"dropped":return n.jsx(vt,{className:"w-4 h-4"});case"absent":return n.jsx(Jo,{className:"w-4 h-4"});default:return n.jsx(Xe,{className:"w-4 h-4"})}};return p?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg shadow-lg border-b border-white/20 dark:border-gray-700/50 sticky top-0 z-10",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"flex items-center justify-between h-20",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:n.jsx(at,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"h-7 w-48 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),n.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse mt-2"})]})]})})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(y=>n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),n.jsx("div",{className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-2xl animate-pulse",children:n.jsx("div",{className:"w-8 h-8"})})]})},y))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-5 bg-gradient-to-r from-blue-600 to-indigo-600",children:n.jsx("div",{className:"h-6 w-40 bg-white/30 rounded animate-pulse"})}),n.jsx("div",{className:"p-6 space-y-4",children:[1,2].map(y=>n.jsxs("div",{className:"p-5 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-700/30",children:[n.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse mb-3"}),n.jsx("div",{className:"h-5 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-36 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-4"}),n.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(N=>n.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[n.jsx("div",{className:"h-6 w-8 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mx-auto mb-1"}),n.jsx("div",{className:"h-3 w-16 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mx-auto"})]},N))})]},y))})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-5 bg-gradient-to-r from-green-600 to-emerald-600",children:n.jsx("div",{className:"h-6 w-36 bg-white/30 rounded animate-pulse"})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"})})]}),n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-5 bg-gradient-to-r from-red-600 to-pink-600",children:n.jsx("div",{className:"h-6 w-40 bg-white/30 rounded animate-pulse"})}),n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse mb-4"}),n.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"})]})]})]})]})]})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg shadow-lg border-b border-white/20 dark:border-gray-700/50 sticky top-0 z-10",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-20",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg transform hover:scale-110 transition-transform duration-300",children:n.jsx(at,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:u(t,"driver_dashboard")}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center mt-1",children:[n.jsx(Xe,{className:"w-4 h-4 mr-1"}),new Date().toLocaleDateString(t==="vi"?"vi-VN":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),n.jsxs(yt,{onClick:w,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg transform hover:scale-105 transition-all duration-200",children:[n.jsx(Vd,{className:"w-5 h-5 mr-2 animate-pulse"}),u(t,"update_location")]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[_&&n.jsx(ex,{type:_.type,message:_.message,onClose:()=>g(null),className:"mb-6"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"group bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:u(t,"today_schedules")}),n.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:r.length})]}),n.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg transform group-hover:rotate-12 transition-transform duration-300",children:n.jsx(Xe,{className:"w-8 h-8 text-white"})})]})}),n.jsx("div",{className:"group bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:u(t,"waiting_students")}),n.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:r.reduce((y,N)=>y+N.pending_pickups,0)})]}),n.jsx("div",{className:"p-4 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl shadow-lg transform group-hover:rotate-12 transition-transform duration-300",children:n.jsx(yn,{className:"w-8 h-8 text-white"})})]})}),n.jsx("div",{className:"group bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:u(t,"on_bus")}),n.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:r.reduce((y,N)=>y+N.onboard_students,0)})]}),n.jsx("div",{className:"p-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg transform group-hover:rotate-12 transition-transform duration-300",children:n.jsx(at,{className:"w-8 h-8 text-white"})})]})}),n.jsx("div",{className:"group bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:u(t,"completed")}),n.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:r.reduce((y,N)=>y+N.completed_drops,0)})]}),n.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg transform group-hover:rotate-12 transition-transform duration-300",children:n.jsx(vt,{className:"w-8 h-8 text-white"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-5 bg-gradient-to-r from-blue-600 to-indigo-600",children:n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[n.jsx(at,{className:"w-6 h-6 mr-3"}),u(t,"today_schedules")]})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"space-y-4",children:r.map(y=>n.jsxs("div",{className:`group p-5 rounded-xl border-2 cursor-pointer transition-all duration-300 transform hover:scale-[1.02] ${(a==null?void 0:a.schedule_id)===y.schedule_id?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-500 bg-white/50 dark:bg-gray-700/30"}`,onClick:()=>b(y),children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center space-x-3",children:n.jsx("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-md ${y.status==="active"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":y.status==="completed"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white"}`,children:y.status==="active"?`🚀 ${u(t,"in_progress")}`:y.status==="completed"?`✅ ${u(t,"completed")}`:`📅 ${u(t,"scheduled")}`})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xe,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:y.start_time.slice(0,5)})]})]}),n.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center",children:[n.jsx(Lt,{className:"w-5 h-5 mr-2 text-blue-500"}),y.route_name]}),n.jsx("div",{className:"flex items-center space-x-2 mb-4",children:n.jsx("div",{className:"px-3 py-1 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-lg",children:n.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["🚌 ",y.license_plate]})})}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:y.pending_pickups}),n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mt-1",children:u(t,"waiting_pickup")})]}),n.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.onboard_students}),n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mt-1",children:u(t,"on_bus")})]}),n.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:y.completed_drops}),n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mt-1",children:u(t,"completed")})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-600",children:[y.status==="scheduled"&&n.jsxs(yt,{onClick:N=>{N.stopPropagation(),C(y.schedule_id)},className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg transform hover:scale-105 transition-all duration-200",children:[n.jsx(Vd,{className:"w-5 h-5 mr-2"}),u(t,"start_trip")]}),y.status==="active"&&n.jsxs(yt,{onClick:N=>{N.stopPropagation(),E(y.schedule_id)},className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg transform hover:scale-105 transition-all duration-200",children:[n.jsx(vt,{className:"w-5 h-5 mr-2"}),u(t,"complete_trip")]})]})]},y.schedule_id))})})]})}),n.jsx("div",{className:"space-y-6",children:a&&n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-5 bg-gradient-to-r from-green-600 to-emerald-600",children:n.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[n.jsx(yn,{className:"w-6 h-6 mr-3"}),u(t,"student_list")]})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"space-y-3",children:d.map(y=>n.jsxs("div",{className:"group p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300 bg-white/50 dark:bg-gray-700/30 hover:shadow-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:y.student_name}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded-md font-medium",children:y.grade}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Lt,{className:"w-4 h-4 mr-1"}),y.stop_name]})]})]}),n.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-md ${y.trip_status==="waiting"?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white":y.trip_status==="onboard"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white":y.trip_status==="dropped"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-gradient-to-r from-gray-500 to-gray-600 text-white"}`,children:[S(y.trip_status),n.jsxs("span",{className:"ml-1.5",children:[y.trip_status==="waiting"&&u(t,"waiting_pickup"),y.trip_status==="onboard"&&u(t,"on_bus"),y.trip_status==="dropped"&&u(t,"dropped_off"),y.trip_status==="absent"&&u(t,"absent")]})]})]}),y.trip_status==="waiting"&&n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs(yt,{size:"sm",onClick:()=>v(y.trip_id,"onboard"),className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md transform hover:scale-105 transition-all",children:[n.jsx(at,{className:"w-4 h-4 mr-1"}),u(t,"pick_up")]}),n.jsxs(yt,{size:"sm",variant:"outline",onClick:()=>v(y.trip_id,"absent"),className:"border-2 hover:bg-gray-100 dark:hover:bg-gray-700 transform hover:scale-105 transition-all",children:[n.jsx(Jo,{className:"w-4 h-4 mr-1"}),u(t,"absent")]})]}),y.trip_status==="onboard"&&n.jsxs(yt,{size:"sm",onClick:()=>v(y.trip_id,"dropped"),className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 mt-3 shadow-md transform hover:scale-105 transition-all",children:[n.jsx(vt,{className:"w-4 h-4 mr-2"}),u(t,"drop_off")]})]},y.trip_id))})})]})})]})]})]})}const FS="modulepreload",US=function(e){return"/"+e},gm={},Tn=function(t,r,i){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(r.map(p=>{if(p=US(p),p in gm)return;gm[p]=!0;const x=p.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const g=document.createElement("link");if(g.rel=x?"stylesheet":FS,x||(g.as="script"),g.crossOrigin="",g.href=p,f&&g.setAttribute("nonce",f),document.head.appendChild(g),x)return new Promise((v,w)=>{g.addEventListener("load",v),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return a.then(d=>{for(const f of d||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})},HS=()=>{var Pe,Xt;const e=dr(),t=ct(),{lang:r}=ke(),i=k.useRef(null),a=k.useRef(null),l=k.useRef(null),[d,f]=k.useState(null),[p,x]=k.useState(!1),[_,g]=k.useState(null),[v,w]=k.useState(16),[b,C]=k.useState(!1),[E,S]=k.useState("street"),[y,N]=k.useState(null),[R,M]=k.useState(null),D=k.useRef([]),O=k.useRef(null),[P,G]=k.useState(((Pe=e.state)==null?void 0:Pe.schedule)||null),[I,ne]=k.useState(((Xt=e.state)==null?void 0:Xt.students)||[]),[ge,z]=k.useState(!1);k.useEffect(()=>{const Z=async()=>{if(P!=null&&P.schedule_id)try{const je=await Ns(P.schedule_id);if(je.success&&je.students){const Ne=je.students.map(Ee=>({...Ee,display_lat:Ee.stop_lat||Ee.student_home_lat||null,display_lng:Ee.stop_lng||Ee.student_home_lng||null,location_source:Ee.stop_lat?"stop":Ee.student_home_lat?"home":"none"}));ne(Ne),T(Ne)}}catch(je){console.error("❌ Error refreshing students:",je)}};P&&I.length===0&&Z();const K=setInterval(Z,1e4);return()=>clearInterval(K)},[P]);const ee=async(Z,K)=>{if(!Z.trip_id){g({type:"error",message:u(r,"not_found")+" trip ID"});return}try{if((await mh(Z.trip_id,K)).success){ne(Ee=>Ee.map(Ae=>Ae.student_id===Z.student_id?{...Ae,trip_status:K}:Ae)),T(I.map(Ee=>Ee.student_id===Z.student_id?{...Ee,trip_status:K}:Ee));const Ne=K==="onboard"?u(r,"on_bus"):K==="dropped"?u(r,"dropped_off"):K==="absent"?u(r,"absent"):u(r,"status");g({type:"success",message:`✅ ${Z.student_name} - ${Ne}`})}}catch(je){console.error("Error updating student status:",je),g({type:"error",message:u(r,"update_status_failed")})}};k.useEffect(()=>{(async()=>{if(P&&I.length===0)try{z(!0);const K=await Ns(P.schedule_id);K.success&&K.students&&ne(K.students)}catch(K){console.error("Error fetching students:",K),g({type:"error",message:u(r,"load_students_failed")})}finally{z(!1)}})()},[P]),k.useEffect(()=>{if(_){const Z=setTimeout(()=>g(null),4e3);return()=>clearTimeout(Z)}},[_]),k.useEffect(()=>((async()=>{try{const K=await Tn(()=>Promise.resolve().then(()=>ss),void 0),je=document.createElement("link");if(je.rel="stylesheet",je.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(je),delete K.Icon.Default.prototype._getIconUrl,K.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"}),!i.current||a.current)return;const Ne=document.createElement("link");Ne.rel="stylesheet",Ne.href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css",document.head.appendChild(Ne);const Ee=K.map(i.current,{center:[10.8231,106.6297],zoom:16,zoomControl:!1,attributionControl:!1,scrollWheelZoom:!0}),Ae=document.querySelector(".map-sidebar");Ae&&Ae.addEventListener("wheel",jt=>{jt.stopPropagation()},{passive:!1});const mt=K.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"© OpenStreetMap contributors"}).addTo(Ee);a.current=Ee,C(!0),oe()}catch(K){console.error("Error initializing map:",K),g({type:"error",message:u(r,"map_load_failed")}),C(!1)}})(),()=>{a.current&&(a.current.remove(),a.current=null),O.current&&navigator.geolocation.clearWatch(O.current)}),[]);const oe=()=>{if(!navigator.geolocation){const Z={lat:10.8231,lng:106.6297,accuracy:100};f(Z),$(Z),g({type:"info",message:u(r,"using_default_location_hcm")});return}navigator.geolocation.getCurrentPosition(Z=>{const K={lat:Z.coords.latitude,lng:Z.coords.longitude,accuracy:Z.coords.accuracy||100,timestamp:new Date};f(K),$(K),g({type:"success",message:u(r,"location_updated")})},Z=>{console.error("GPS Error:",Z);const K={lat:10.8231,lng:106.6297,accuracy:100};f(K),$(K),g({type:"warning",message:u(r,"cannot_get_gps_using_default")})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},ie=()=>{if(!navigator.geolocation){g({type:"error",message:u(r,"device_no_gps")});return}x(!0),O.current=navigator.geolocation.watchPosition(Z=>{const K={lat:Z.coords.latitude,lng:Z.coords.longitude,accuracy:Z.coords.accuracy||100,timestamp:new Date};f(K),$(K)},Z=>{console.error("GPS tracking error:",Z),g({type:"error",message:u(r,"gps_tracking_error")})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e3}),g({type:"success",message:u(r,"started_gps_tracking")})},J=()=>{x(!1),O.current&&(navigator.geolocation.clearWatch(O.current),O.current=null),g({type:"info",message:u(r,"stopped_gps_tracking")})},$=async Z=>{if(!(!a.current||!b))try{const K=await Tn(()=>Promise.resolve().then(()=>ss),void 0);D.current.forEach(Ee=>{a.current.removeLayer(Ee)}),D.current=[];const je=K.divIcon({html:`
          <div class="relative">
            <div class="w-12 h-12 bg-blue-500 rounded-full border-4 border-white shadow-lg flex items-center justify-center text-white text-xl animate-pulse">
              🚌
            </div>
            <div class="absolute -top-1 -right-1 w-4 h-4 ${p?"bg-green-500":"bg-red-500"} rounded-full border-2 border-white"></div>
          </div>
        `,iconSize:[48,48],iconAnchor:[24,24],className:"driver-marker"}),Ne=K.marker([Z.lat,Z.lng],{icon:je}).addTo(a.current);if(Ne.bindPopup(`
        <div class="p-3 font-sans">
          <h3 class="font-bold text-lg text-gray-800 mb-2">🚌 ${u(r,"smart_school_bus")}</h3>
          <div class="space-y-1 text-sm text-gray-600">
            <div><strong>${u(r,"latitude")}:</strong> ${Z.lat.toFixed(6)}</div>
            <div><strong>${u(r,"longitude")}:</strong> ${Z.lng.toFixed(6)}</div>
            <div><strong>${u(r,"accuracy")}:</strong> ±${Z.accuracy}m</div>
            <div class="mt-2 px-2 py-1 rounded ${p?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">
              ${p?"🟢 "+u(r,"tracking_label"):"🔴 "+u(r,"paused")}
            </div>
          </div>
        </div>
      `),D.current.push(Ne),te(K),I.length>0){const Ee=K.latLngBounds([[Z.lat,Z.lng]]);I.forEach(Ae=>{Ae.stop_lat&&Ae.stop_lng&&Ee.extend([Ae.stop_lat,Ae.stop_lng])}),a.current.fitBounds(Ee,{padding:[50,50]})}else a.current.setView([Z.lat,Z.lng],v)}catch(K){console.error("Error updating markers:",K)}},te=async Z=>{I.forEach((K,je)=>{const Ne=K.display_lat||K.stop_lat||K.student_home_lat,Ee=K.display_lng||K.stop_lng||K.student_home_lng;if(!Ne||!Ee)return;const Ae=Z.divIcon({html:`
          <div class="w-10 h-10 ${K.trip_status==="waiting"||K.trip_status==="scheduled"?"bg-orange-500 animate-bounce":K.trip_status==="onboard"?"bg-blue-500":"bg-green-500"} rounded-full border-3 border-white shadow-lg flex items-center justify-center text-white text-sm cursor-pointer hover:scale-110 transition-transform">
            ${K.trip_status==="waiting"||K.trip_status==="scheduled"?"👤":K.trip_status==="onboard"?"🚌":"✅"}
          </div>
        `,iconSize:[40,40],iconAnchor:[20,20],className:"student-marker"}),mt=Z.marker([Ne,Ee],{icon:Ae}).addTo(a.current),jt=K.trip_status==="scheduled"?`📅 ${u(r,"scheduled")}`:K.trip_status==="waiting"?`⏳ ${u(r,"waiting_pickup")}`:K.trip_status==="onboard"?`🚌 ${u(r,"on_bus")}`:K.trip_status==="dropped"?`✅ ${u(r,"dropped_off")}`:`❌ ${u(r,"absent")}`,Wr=K.location_source==="home"?`<div class="text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded mt-1">📍 ${u(r,"home_address")} (${u(r,"no_stop_assigned_short")})</div>`:K.stop_name?`<div><strong>${u(r,"pickup_stop")}:</strong> ${K.stop_name}</div>`:"";mt.bindPopup(`
        <div class="p-3 font-sans">
          <h3 class="font-bold text-lg text-gray-800 mb-2">👤 ${K.student_name}</h3>
          <div class="text-sm text-gray-600 space-y-1">
            <div><strong>${u(r,"grade_level")}:</strong> ${K.grade||u(r,"unknown")} - <strong>${u(r,"class_name")}:</strong> ${K.class||u(r,"unknown")}</div>
            ${Wr}
            ${K.student_address?`<div><strong>${u(r,"home_address")}:</strong> ${K.student_address}</div>`:""}
            <div><strong>${u(r,"order")}:</strong> #${K.stop_order||u(r,"unknown")}</div>
            <div><strong>${u(r,"parent_label")}:</strong> ${K.parent_name||u(r,"unknown")}</div>
            ${K.parent_phone?`<div><strong>${u(r,"phone")}:</strong> ${K.parent_phone}</div>`:""}
            <div class="mt-2">
              <span class="${K.trip_status==="waiting"||K.trip_status==="scheduled"?"text-orange-600 bg-orange-100":K.trip_status==="onboard"?"text-blue-600 bg-blue-100":"text-green-600 bg-green-100"} px-2 py-1 rounded font-bold text-xs">
                ${jt}
              </span>
            </div>
          </div>
        </div>
      `),mt.on("click",()=>{N(K),(K.trip_status==="waiting"||K.trip_status==="scheduled")&&V(K)}),D.current.push(mt)})},T=async Z=>{if(!(!a.current||!b||!d))try{const K=await Tn(()=>Promise.resolve().then(()=>ss),void 0),je=D.current.filter(Ne=>{var Ae,mt;return((mt=(Ae=Ne.options.icon)==null?void 0:Ae.options)==null?void 0:mt.className)==="student-marker"?(a.current.removeLayer(Ne),!1):!0});D.current=je,te(K)}catch(K){console.error("Error updating student markers:",K)}},V=async Z=>{if(!a.current||!d){g({type:"error",message:u(r,"cannot_create_route")});return}const K=Z.display_lat||Z.stop_lat||Z.student_home_lat,je=Z.display_lng||Z.stop_lng||Z.student_home_lng;if(!K||!je){g({type:"error",message:u(r,"no_stop_assigned_short")});return}try{const Ne=await Tn(()=>Promise.resolve().then(()=>ss),void 0);await Tn(()=>import("./leaflet-routing-machine-BA83XrHc.js").then(Ae=>Ae.l),[]),l.current&&a.current.removeControl(l.current);const Ee=Ne.Routing.control({waypoints:[Ne.latLng(d.lat,d.lng),Ne.latLng(K,je)],routeWhileDragging:!1,addWaypoints:!1,createMarker:()=>null,lineOptions:{styles:[{color:"#3B82F6",weight:6,opacity:.8,dashArray:"10, 5"}]},show:!1,router:Ne.Routing.osrmv1({serviceUrl:"https://router.project-osrm.org/route/v1",profile:"driving"})}).addTo(a.current);Ee.on("routesfound",Ae=>{const mt=Ae.routes,jt=mt[0].summary;M({distance:(jt.totalDistance/1e3).toFixed(1),time:Math.round(jt.totalTime/60),instructions:mt[0].instructions.slice(0,5)}),g({type:"success",message:`${u(r,"navigating_to_prefix")} ${Z.student_name}: ${(jt.totalDistance/1e3).toFixed(1)} km - ${Math.round(jt.totalTime/60)} ${u(r,"minutes")}`})}),l.current=Ee,N(Z)}catch(Ne){console.error("Error creating route:",Ne),g({type:"error",message:u(r,"cannot_create_route_fallback_line")}),q(Z)}},q=async Z=>{try{const je=(await Tn(()=>Promise.resolve().then(()=>ss),void 0)).polyline([[d.lat,d.lng],[Z.stop_lat,Z.stop_lng]],{color:"#EF4444",weight:4,opacity:.7,dashArray:"10, 10"}).addTo(a.current);D.current.push(je);const Ne=a.current.distance([d.lat,d.lng],[Z.stop_lat,Z.stop_lng]);M({distance:(Ne/1e3).toFixed(1),time:Math.round(Ne/1e3*3),instructions:[`Đi thẳng đến ${Z.name}`]})}catch(K){console.error("Error drawing line:",K)}},de=()=>{l.current&&a.current&&(a.current.removeControl(l.current),l.current=null),N(null),M(null),g({type:"info",message:u(r,"route_cleared")})},H=()=>{if(a.current&&v<19){const Z=v+1;w(Z),a.current.setZoom(Z)}},Y=()=>{if(a.current&&v>1){const Z=v-1;w(Z),a.current.setZoom(Z)}},re=()=>{d&&a.current?(a.current.setView([d.lat,d.lng],17),g({type:"success",message:u(r,"centered_on_current_location")})):oe()},ue=async()=>{if(a.current)try{const Z=await Tn(()=>Promise.resolve().then(()=>ss),void 0);if(a.current.eachLayer(K=>{K instanceof Z.TileLayer&&a.current.removeLayer(K)}),E==="street"){const K=Z.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:19,attribution:"Esri"}).addTo(a.current);S("satellite"),g({type:"info",message:u(r,"switch_to_satellite")})}else{const K=Z.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"OpenStreetMap"}).addTo(a.current);S("street"),g({type:"info",message:u(r,"switch_to_street")})}}catch(Z){console.error("Error switching map type:",Z)}};return k.useEffect(()=>(window.navigateToStudent=Z=>{const K=I.find(je=>je.id===Z);K&&V(K)},()=>{delete window.navigateToStudent}),[I,d]),n.jsxs("div",{className:"h-screen bg-gray-50 dark:bg-gray-900 flex flex-col",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>t("/driver/home"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:u(r,"back"),children:n.jsx(qk,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[n.jsx(Lt,{className:"h-6 w-6 mr-2 text-blue-600"}),u(r,"trip_map")]}),P&&n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[u(r,"route_label"),": ",P.route_name," | ",u(r,"bus_label"),": ",P.bus_plate," | ",I.length," ",u(r,"students")]})]})]}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[n.jsx(Lt,{className:"h-6 w-6 mr-3 text-blue-600"}),u(r,"smart_school_bus")," ",u(r,"map")]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["GPS: ",p?`🟢 ${u(r,"online")}`:`🔴 ${u(r,"paused")}`," •",u(r,"zoom_label"),": ",v,"/19 •",u(r,"mode"),": ",E==="street"?u(r,"street_map"):u(r,"satellite_map")]})]}),d&&n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 text-right",children:[n.jsxs("div",{children:["📍 ",d.lat.toFixed(6)]}),n.jsxs("div",{children:["📍 ",d.lng.toFixed(6)]})]})]})}),n.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("div",{ref:i,className:"absolute inset-0 w-full h-full bg-gray-200 dark:bg-gray-700",style:{zIndex:1}}),!b&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-90 z-10",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:u(r,"loading_map")}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:u(r,"map_stack_hint")})]})}),b&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"absolute top-4 right-4 flex flex-col bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 overflow-hidden z-20",children:[n.jsx("button",{onClick:H,disabled:v>=19,className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 border-b border-gray-200 dark:border-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(oh,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})}),n.jsx("button",{onClick:Y,disabled:v<=1,className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(C1,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})})]}),n.jsx("div",{className:"absolute top-4 right-20 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 z-20",children:n.jsx("button",{onClick:ue,className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:E==="street"?u(r,"switch_to_satellite"):u(r,"switch_to_street"),children:n.jsx(y1,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})})}),n.jsx("div",{className:"absolute bottom-32 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 z-20",children:n.jsx("button",{onClick:re,className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:u(r,"center_on_current_location"),children:n.jsx(u1,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})})}),y&&n.jsx("div",{className:"absolute bottom-44 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 z-20",children:n.jsx("button",{onClick:de,className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-red-600",title:u(r,"clear_route"),children:n.jsx(G1,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"absolute bottom-4 left-4 flex flex-col space-y-3 z-20",children:[n.jsx("button",{onClick:p?J:ie,className:`px-4 py-3 rounded-full font-semibold shadow-lg transition-all transform hover:scale-105 ${p?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:n.jsxs("div",{className:"flex items-center",children:[p?n.jsx(M1,{className:"h-4 w-4 mr-2"}):n.jsx(D1,{className:"h-4 w-4 mr-2"}),p?u(r,"stop_gps"):u(r,"start_gps")]})}),n.jsxs("button",{onClick:oe,className:"px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-full font-semibold shadow-lg transition-all transform hover:scale-105",children:["📍 ",u(r,"update_location")]})]})]})]}),n.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 shadow-xl border-l border-gray-200 dark:border-gray-600 flex flex-col map-sidebar",children:[n.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white flex-shrink-0",children:[n.jsxs("h3",{className:"text-lg font-bold flex items-center",children:[n.jsx(Vd,{className:"h-5 w-5 mr-2"}),u(r,"navigation_panel")]}),n.jsx("p",{className:"text-sm opacity-90",children:y?`${u(r,"navigating_to_prefix")} ${y.name||y.student_name}`:u(r,"select_student_to_navigate")})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[R&&n.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900 border-b border-blue-200 dark:border-blue-700",children:[n.jsxs("h4",{className:"font-bold text-blue-800 dark:text-blue-200 mb-2 flex items-center",children:[n.jsx(Wd,{className:"h-4 w-4 mr-2"}),u(r,"route_info")]}),n.jsxs("div",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-300",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"distance"),":"]}),n.jsxs("span",{className:"font-bold",children:[R.distance," km"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"time"),":"]}),n.jsxs("span",{className:"font-bold",children:[R.time," ",u(r,"minutes")]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"to_label"),":"]}),n.jsx("span",{className:"font-bold",children:(y==null?void 0:y.name)||(y==null?void 0:y.student_name)})]})]}),R.instructions&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:[u(r,"directions"),":"]}),n.jsx("div",{className:"space-y-1 text-xs text-blue-600 dark:text-blue-400 max-h-20 overflow-y-auto",children:R.instructions.map((Z,K)=>n.jsxs("div",{className:"flex items-start",children:[n.jsxs("span",{className:"font-bold mr-2",children:[K+1,"."]}),n.jsx("span",{children:Z.text||Z})]},K))})]})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center",children:["👥 ",u(r,"students")," (",I.length,")"]}),ge?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:u(r,"loading")})]}):I.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(yn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:u(r,"no_students_yet")})]}):n.jsx("div",{className:"space-y-3",children:I.map(Z=>n.jsxs("div",{className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border-l-4 ${Z.trip_status==="waiting"||Z.trip_status==="scheduled"?"border-orange-500":Z.trip_status==="onboard"?"border-blue-500":"border-green-500"} ${(y==null?void 0:y.student_id)===Z.student_id?"ring-2 ring-blue-500":""}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:Z.student_name}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[Z.grade," - ",Z.class]})]}),n.jsx("div",{className:`px-2 py-1 rounded-full text-xs text-white ${Z.trip_status==="waiting"||Z.trip_status==="scheduled"?"bg-orange-500":Z.trip_status==="onboard"?"bg-blue-500":"bg-green-500"}`,children:Z.trip_status==="waiting"||Z.trip_status==="scheduled"?`⏳ ${u(r,"waiting_pickup")}`:Z.trip_status==="onboard"?`🚌 ${u(r,"on_bus")}`:`✅ ${u(r,"dropped_off")}`})]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-1",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),Z.stop_name]}),Z.parent_name&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(yn,{className:"h-3 w-3 mr-1"}),u(r,"parent_label"),": ",Z.parent_name]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[u(r,"order"),": #",Z.stop_order]})]}),n.jsxs("div",{className:"mt-2 space-y-2",children:[(Z.trip_status==="waiting"||Z.trip_status==="scheduled")&&Z.stop_lat&&Z.stop_lng&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>V(Z),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded text-sm font-medium transition-colors flex items-center justify-center",children:[n.jsx(Wd,{className:"h-3 w-3 mr-1"}),u(r,"navigate")]}),n.jsxs("button",{onClick:()=>ee(Z,"onboard"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded text-sm font-medium transition-colors flex items-center justify-center",children:["🚌 ",u(r,"pick_up")]}),n.jsxs("button",{onClick:()=>ee(Z,"absent"),className:"w-full bg-gray-400 hover:bg-gray-500 text-white px-2 py-1 rounded text-xs font-medium transition-colors flex items-center justify-center",children:["❌ ",u(r,"absent")]})]}),Z.trip_status==="onboard"&&n.jsxs("button",{onClick:()=>ee(Z,"dropped"),className:"w-full bg-purple-500 hover:bg-purple-600 text-white px-3 py-2 rounded text-sm font-medium transition-colors flex items-center justify-center",children:["✅ ",u(r,"drop_off")]})]})]},Z.student_id))})]}),n.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-600",children:d&&n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center",children:["📍 ",u(r,"gps_location")]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"latitude"),":"]}),n.jsx("span",{className:"font-mono font-medium",children:d.lat.toFixed(6)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"longitude"),":"]}),n.jsx("span",{className:"font-mono font-medium",children:d.lng.toFixed(6)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"accuracy"),":"]}),n.jsxs("span",{children:["±",d.accuracy,"m"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[u(r,"status"),":"]}),n.jsx("span",{className:`font-medium ${p?"text-green-600":"text-red-600"}`,children:p?`🟢 ${u(r,"tracking_label")}`:`🔴 ${u(r,"stopped")}`})]})]})]})}),n.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-600 space-y-3",children:n.jsxs("button",{onClick:()=>g({type:"warning",message:u(r,"notification_sent_to_parents")}),className:"w-full px-4 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors shadow-lg",children:["📢 ",u(r,"notify_parents")]})})]})]})]}),_&&n.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-xl z-50 transform transition-all duration-300 max-w-sm ${_.type==="error"?"bg-red-500 text-white":_.type==="warning"?"bg-yellow-500 text-white":_.type==="success"?"bg-green-500 text-white":"bg-blue-500 text-white"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium pr-4",children:_.message}),n.jsx("button",{onClick:()=>g(null),className:"text-white hover:text-gray-200 font-bold text-lg flex-shrink-0",children:"✕"})]})})]})};function ZS(){const{id:e}=$0(),t=ct(),{lang:r}=ke(),[i,a]=k.useState(null),[l,d]=k.useState([]),[f,p]=k.useState([]),[x,_]=k.useState(null),[g,v]=k.useState(!0),[w,b]=k.useState(null),[C,E]=k.useState(!1),[S,y]=k.useState(null),[N,R]=k.useState("");k.useEffect(()=>{e||(async()=>{try{v(!0);const ee=await Ai();if(ee.success&&ee.schedules){p(ee.schedules);const oe=ee.schedules.find(ie=>ie.status==="in-progress");if(oe){t(`/driver/trip/${oe.schedule_id}`,{replace:!0});return}if(ee.schedules.length>0){t(`/driver/trip/${ee.schedules[0].schedule_id}`,{replace:!0});return}b({type:"info",message:u(r,"no_schedules_assigned_short")})}}catch(ee){console.error("Error loading schedules:",ee),b({type:"error",message:u(r,"load_schedules_failed")})}finally{v(!1)}})()},[e,t]),k.useEffect(()=>{e&&(async()=>{var ee,oe,ie,J,$,te;try{v(!0),console.log("Loading trip data for schedule:",e);const T=await Ns(e);if(console.log("Trip data response:",T),T.success){d(T.students||[]),T.students&&T.students.length===0&&b({type:"warning",message:u(r,"no_students_assigned_trip")});const V={schedule_id:T.schedule_id,total_students:T.total_count||0,completed:((ee=T.students)==null?void 0:ee.filter(q=>q.trip_status==="dropped").length)||0,onboard:((oe=T.students)==null?void 0:oe.filter(q=>q.trip_status==="onboard").length)||0,remaining:((ie=T.students)==null?void 0:ie.filter(q=>q.trip_status==="waiting").length)||0,absent:((J=T.students)==null?void 0:J.filter(q=>q.trip_status==="absent").length)||0};a(V);try{const q=await Ai();if(q!=null&&q.schedules){const de=q.schedules.find(H=>`${H.schedule_id}`==`${e}`);de&&_({id:de.schedule_id,status:de.status,route_name:de.route_name,start_time:de.start_time,end_time:de.end_time,license_plate:de.license_plate})}}catch(q){console.warn("Failed to load driver schedules for header info",q)}}else b({type:"error",message:T.message||u(r,"load_trip_failed")})}catch(T){console.error("Error loading trip data:",T),b({type:"error",message:((te=($=T.response)==null?void 0:$.data)==null?void 0:te.message)||u(r,"load_trip_failed_retry")})}finally{v(!1)}})()},[e]);const M=async()=>{var z,ee;if(x!=null&&x.id)try{const oe=await Bx(x.id);oe!=null&&oe.success&&(_(ie=>ie&&{...ie,status:"in-progress"}),b({type:"success",message:u(r,"start_trip_success")}))}catch(oe){console.error("Error starting trip:",oe),b({type:"error",message:((ee=(z=oe.response)==null?void 0:z.data)==null?void 0:ee.message)||u(r,"start_trip_failed")})}},D=async()=>{var z,ee;if(x!=null&&x.id&&confirm(u(r,"confirm_complete_trip")))try{const oe=await Dx(x.id);oe!=null&&oe.success&&(_(ie=>ie&&{...ie,status:"completed"}),b({type:"success",message:u(r,"complete_trip_success")}))}catch(oe){console.error("Error completing trip:",oe),b({type:"error",message:((ee=(z=oe.response)==null?void 0:z.data)==null?void 0:ee.message)||u(r,"complete_trip_failed")})}},O=async(z,ee,oe=null)=>{var ie,J;try{const $=await mh(z,ee,oe);if($.success){d(T=>T.map(V=>V.trip_id===z?{...V,trip_status:ee,[ee==="onboard"?"picked_at":ee==="dropped"?"dropped_at":"updated_at"]:new Date().toISOString(),notes:oe||V.notes}:V));const te=l.map(T=>T.trip_id===z?{...T,trip_status:ee}:T);a(T=>({...T,completed:te.filter(V=>V.trip_status==="dropped").length,onboard:te.filter(V=>V.trip_status==="onboard").length,remaining:te.filter(V=>V.trip_status==="waiting").length,absent:te.filter(V=>V.trip_status==="absent").length})),b({type:"success",message:$.message||`${u(r,"updated_status_to")} "${ge(ee)}"`})}}catch($){console.error("Error updating student status:",$),b({type:"error",message:((J=(ie=$.response)==null?void 0:ie.data)==null?void 0:J.message)||u(r,"update_status_failed")})}},P=z=>{confirm(`${u(r,"call_parent_prefix")}: ${z}?`)&&(window.location.href=`tel:${z}`)},G=async()=>{var z;if(!(!N.trim()||!S))try{b({type:"success",message:`${u(r,"sent_message_to_parent_of")} ${((z=S.student)==null?void 0:z.name)||S.student_name}`}),E(!1),R(""),y(null)}catch{b({type:"error",message:u(r,"send_message_failed")})}},I=z=>{switch(z){case"waiting":return"text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20";case"onboard":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"dropped":return"text-green-600 bg-green-50 dark:bg-green-900/20";case"absent":return"text-red-600 bg-red-50 dark:bg-red-900/20";default:return"text-gray-600 bg-gray-50 dark:bg-gray-900/20"}},ne=z=>{switch(z){case"waiting":return n.jsx(Xe,{className:"w-4 h-4"});case"onboard":return n.jsx(at,{className:"w-4 h-4"});case"dropped":return n.jsx(vt,{className:"w-4 h-4"});case"absent":return n.jsx(Jo,{className:"w-4 h-4"});default:return n.jsx(Xe,{className:"w-4 h-4"})}},ge=z=>{switch(z){case"waiting":return u(r,"waiting_pickup");case"onboard":return u(r,"on_bus");case"dropped":return u(r,"dropped_off");case"absent":return u(r,"absent");default:return u(r,"unknown")}};return g?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(at,{className:"h-8 w-8 text-blue-600 mr-3"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(x==null?void 0:x.route_name)||(i==null?void 0:i.route_name)||u(r,"trip")}),n.jsxs("div",{className:"flex items-center mt-1 space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xe,{className:"w-4 h-4 mr-1"}),((x==null?void 0:x.start_time)||(i==null?void 0:i.start_time))??"--:--"," - ",((x==null?void 0:x.end_time)||(i==null?void 0:i.end_time))??"--:--"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(at,{className:"w-4 h-4 mr-1"}),(x==null?void 0:x.license_plate)||(i==null?void 0:i.license_plate)||u(r,"no_bus")]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(xo,{className:"w-4 h-4 mr-1"}),new Date().toLocaleDateString(r==="vi"?"vi-VN":"en-US")]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${(x==null?void 0:x.status)==="in-progress"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":(x==null?void 0:x.status)==="completed"?"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:(x==null?void 0:x.status)==="in-progress"?u(r,"in_progress"):(x==null?void 0:x.status)==="completed"?u(r,"completed"):u(r,"scheduled")}),(x==null?void 0:x.status)!=="in-progress"&&(x==null?void 0:x.status)!=="completed"&&n.jsx(yt,{onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:u(r,"start_trip")}),(x==null?void 0:x.status)==="in-progress"&&n.jsx(yt,{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:u(r,"complete_trip")})]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w&&n.jsx(ex,{type:w.type,message:w.message,onClose:()=>b(null),className:"mb-6"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(yn,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:u(r,"total_students")}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i==null?void 0:i.total_students})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(vt,{className:"h-8 w-8 text-green-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:u(r,"completed")}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.filter(z=>z.trip_status==="dropped").length})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xe,{className:"h-8 w-8 text-yellow-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:u(r,"remaining")}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.filter(z=>["waiting","onboard"].includes(z.trip_status)).length})]})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[n.jsx(Wd,{className:"w-5 h-5 mr-2 text-blue-600"}),u(r,"student_list_by_route")]})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"space-y-4",children:l.sort((z,ee)=>z.stop_order-ee.stop_order).map((z,ee)=>n.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full text-sm font-medium mr-3",children:z.stop_order}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:z.student_name}),n.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-3",children:[n.jsx("span",{children:z.grade}),n.jsx("span",{children:"•"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lt,{className:"w-3 h-3 mr-1"}),z.stop_name]})]})]})]}),n.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${I(z.trip_status)}`,children:[ne(z.trip_status),n.jsx("span",{className:"ml-1",children:ge(z.trip_status)})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xe,{className:"w-4 h-4 mr-1"}),u(r,"planned_time")," ",z.pickup_time]}),z.actual_time&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(vt,{className:"w-4 h-4 mr-1 text-green-500"}),u(r,"actual_time")," ",z.actual_time]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(yt,{size:"sm",variant:"outline",onClick:()=>P(z.parent_phone),children:[n.jsx(z1,{className:"w-3 h-3 mr-1"}),u(r,"call")]}),n.jsxs(yt,{size:"sm",variant:"outline",onClick:()=>{y(z),E(!0)},children:[n.jsx(Zd,{className:"w-3 h-3 mr-1"}),u(r,"message")]}),z.trip_status==="waiting"&&n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(yt,{size:"sm",onClick:()=>O(z.trip_id,"onboard"),className:"bg-blue-600 hover:bg-blue-700",children:u(r,"pick_up")}),n.jsx(yt,{size:"sm",variant:"outline",onClick:()=>O(z.trip_id,"absent"),children:u(r,"absent")})]}),z.trip_status==="onboard"&&n.jsx(yt,{size:"sm",onClick:()=>O(z.trip_id,"dropped"),className:"bg-green-600 hover:bg-green-700",children:u(r,"drop_off")})]})]})]},z.trip_id))})})]})]}),n.jsx(Qt,{isOpen:C,onClose:()=>{E(!1),y(null),R("")},title:u(r,"quick_message_title"),children:n.jsxs("div",{className:"p-6",children:[S&&n.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(jr,{className:"w-5 h-5 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.student_name}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u(r,"parent_label"),": ",S.parent_phone]})]})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(r,"message")}),n.jsx("textarea",{value:N,onChange:z=>R(z.target.value),placeholder:u(r,"enter_message_for_parent"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:4})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs(yt,{onClick:G,disabled:!N.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[n.jsx(Zd,{className:"w-4 h-4 mr-2"}),u(r,"send_message")]}),n.jsx(yt,{onClick:()=>{E(!1),y(null),R("")},variant:"outline",className:"flex-1",children:u(r,"cancel")})]})]})})]})}function VS(){const{notifications:e,unreadCount:t,loading:r,markAsRead:i,deleteNotification:a,loadNotifications:l}=Ks(),{lang:d}=ke(),f=d==="vi"?"vi-VN":"en-US",[p,x]=k.useState(""),[_,g]=k.useState(""),[v,w]=k.useState("info"),[b,C]=k.useState("medium"),[E,S]=k.useState(!1),[y,N]=k.useState(""),[R,M]=k.useState(""),[D,O]=k.useState(!1),[P,G]=k.useState(null),I=async J=>{if(G(J),O(!0),!J.is_read)try{await i(J.id)}catch{}},ne=async()=>{if(P)try{const J=`${P.title}

${P.body||""}`;await navigator.clipboard.writeText(J),alert(u(d,"copied_notification_content"))}catch{alert(u(d,"copy_failed"))}};async function ge(){var J,$,te;if(!p.trim()||!_.trim()){N(u(d,"please_fill_title_body"));return}try{S(!0),N(""),M("");const T=await le.post("/notifications/send",{title:p,body:_,type:v,priority:b});x(""),g("");const V=(J=T==null?void 0:T.data)==null?void 0:J.count;M(typeof V=="number"?`✅ ${u(d,"sent_notification_to")} ${V} ${u(d,"parent_lower")}`:`✅ ${u(d,"notification_sent_to_parents")}`),setTimeout(()=>M(""),5e3)}catch(T){console.error("Failed to send notification:",T);const V=(te=($=T.response)==null?void 0:$.data)==null?void 0:te.error;N(V==="no_recipients_found"?u(d,"no_recipients_found_today"):u(d,"failed_to_send_notification"))}finally{S(!1)}}async function z(){try{await l()}catch(J){console.error("Failed to refresh notifications:",J)}}const ee=[{value:"info",label:u(d,"info"),icon:ea,color:"blue"},{value:"alert",label:u(d,"warning"),icon:ar,color:"red"},{value:"success",label:u(d,"success"),icon:vt,color:"green"}],oe=[{value:"low",label:u(d,"low"),color:"gray"},{value:"medium",label:u(d,"medium"),color:"yellow"},{value:"high",label:u(d,"high"),color:"red"}],ie=[{title:u(d,"qm_depart_on_time_title"),body:u(d,"qm_depart_on_time_body"),type:"info"},{title:u(d,"qm_delay_10_title"),body:u(d,"qm_delay_10_body"),type:"alert"},{title:u(d,"qm_all_picked_title"),body:u(d,"qm_all_picked_body"),type:"success"},{title:u(d,"qm_route_change_title"),body:u(d,"qm_route_change_body"),type:"alert"}];return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xn,{className:"w-6 h-6 text-white"}),n.jsxs("h2",{className:"text-xl font-bold text-white",children:[u(d,"inbox_title")," (",t,")"]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:z,className:"text-sm text-white/90 bg-white/10 px-3 py-1 rounded-md",children:u(d,"refresh_button")})})]}),n.jsxs("div",{className:"p-4",children:[r&&n.jsx("div",{className:"text-sm text-gray-500",children:u(d,"loading")}),!r&&e.length===0&&n.jsx("div",{className:"text-sm text-gray-500",children:u(d,"no_notifications")}),n.jsx("div",{className:"space-y-3",children:e.map(J=>n.jsxs("div",{className:`p-3 border rounded-lg flex items-start justify-between ${J.is_read?"bg-gray-50 dark:bg-gray-900":"bg-white dark:bg-gray-800"} cursor-pointer hover:shadow-sm transition`,onClick:()=>I(J),children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:J.title}),!J.is_read&&n.jsx("span",{className:"text-xs font-bold text-white bg-red-500 px-2 py-0.5 rounded",children:u(d,"new_label")})]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:J.body}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:[n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Xe,{className:"w-3.5 h-3.5"}),new Date(J.created_at||J.createdAt||J.created).toLocaleString(f)]}),J.sender_name||J.sender_role?n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(jr,{className:"w-3.5 h-3.5"}),J.sender_name||J.sender_role]}):null]})]}),n.jsxs("div",{className:"ml-4 flex-shrink-0 flex flex-col items-end gap-2",onClick:$=>$.stopPropagation(),children:[n.jsxs("button",{onClick:()=>I(J),className:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[n.jsx(ih,{className:"w-4 h-4"})," ",u(d,"view_details")]}),!J.is_read&&n.jsx("button",{onClick:()=>i(J.id),className:"text-sm text-green-600 dark:text-green-400",children:u(d,"mark_read")}),n.jsxs("button",{onClick:()=>{confirm(u(d,"confirm_delete_notification"))&&a(J.id)},className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-2",children:[n.jsx(la,{className:"w-4 h-4"})," ",u(d,"delete_label")]})]})]},J.id))})]})]}),n.jsx(Qt,{open:D,onClose:()=>O(!1),title:u(d,"notification_detail_title"),size:"md",children:P?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:P.title}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 text-gray-600 dark:text-gray-300",children:[n.jsx(jr,{className:"w-4 h-4"}),u(d,"from_label"),": ",P.sender_name||P.sender_role||"system"]}),P.type&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:[n.jsx(Jk,{className:"w-3.5 h-3.5"})," ",u(d,"notification_type"),": ",P.type]}),P.priority&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:[n.jsx(ar,{className:"w-3.5 h-3.5"})," ",u(d,"priority_level"),": ",u(d,P.priority)||P.priority]})]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 inline-flex items-center gap-1",children:[n.jsx(Xe,{className:"w-3.5 h-3.5"}),new Date(P.created_at||P.createdAt||P.created).toLocaleString(f)]})]}),n.jsx("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 whitespace-pre-wrap border border-gray-200 dark:border-gray-700",children:P.body||""}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:ne,className:"px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[n.jsx(sh,{className:"w-4 h-4"})," ",u(d,"copy")]}),n.jsx("button",{onClick:()=>O(!1),className:"px-3 py-2 rounded-lg bg-blue-600 text-white",children:u(d,"close")})]})]}):null}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Zd,{className:"w-6 h-6 text-white"}),n.jsx("h2",{className:"text-xl font-bold text-white",children:u(d,"quick_messages_title")})]})}),n.jsxs("div",{className:"p-6",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:u(d,"quick_messages_hint")}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ie.map((J,$)=>n.jsxs("button",{onClick:()=>{x(J.title),g(J.body),w(J.type)},className:"p-4 text-left border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:J.title}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:J.body})]},$))})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Yo,{className:"w-6 h-6 text-white"}),n.jsx("h2",{className:"text-xl font-bold text-white",children:u(d,"send_notifications")})]})}),n.jsxs("div",{className:"p-6",children:[y&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[n.jsx(ar,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-600 dark:text-red-400",children:y})]}),R&&n.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2",children:[n.jsx(vt,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-600 dark:text-green-400",children:R})]}),n.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-start gap-3",children:[n.jsx(ea,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[n.jsx("p",{className:"font-medium mb-1",children:u(d,"send_to_parents_today_title")}),n.jsx("p",{className:"text-blue-600/80 dark:text-blue-400/80",children:u(d,"send_to_parents_today_desc")})]})]}),n.jsxs("form",{onSubmit:J=>{J.preventDefault(),ge()},className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(d,"notification_type")}),n.jsx("select",{value:v,onChange:J=>w(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:ee.map(J=>n.jsx("option",{value:J.value,children:J.label},J.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(d,"priority_level")}),n.jsx("select",{value:b,onChange:J=>C(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:oe.map(J=>n.jsx("option",{value:J.value,children:J.label},J.value))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(d,"title_label")}),n.jsx("input",{type:"text",value:p,onChange:J=>x(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:u(d,"title_placeholder"),disabled:E})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u(d,"body_label")}),n.jsx("textarea",{value:_,onChange:J=>g(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:u(d,"body_placeholder"),disabled:E,rows:"4"})]}),n.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-cyan-700 disabled:from-gray-400 disabled:to-gray-400 font-medium flex items-center justify-center gap-2 transition-all",disabled:E||!p.trim()||!_.trim(),children:[n.jsx(Yo,{className:"w-5 h-5"}),E?u(d,"sending"):u(d,"send_notification")]})]})]})]})]})}function WS(){var b,C;const[e,t]=k.useState(!1),r=dr(),i=ct(),{user:a}=ke(),{theme:l,toggleTheme:d}=bl(),{language:f}=Us(),{logout:p}=Fs(),[x,_]=k.useState(!1),g=[{name:u(f,"home"),href:"home",icon:yo},{name:u(f,"map"),href:"map",icon:w1}],v=()=>{try{p()}catch{}i("/login",{replace:!0})},w=E=>r.pathname===`/driver/${E}`||E==="home"&&r.pathname==="/driver";return n.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e&&n.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>t(!1),children:n.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm"})}),n.jsxs("div",{className:`${e?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-72 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl shadow-2xl transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 border-r border-white/20 dark:border-gray-700/50`,children:[n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600"}),n.jsxs("div",{className:"relative flex items-center justify-between h-20 px-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2.5 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg transform hover:scale-110 transition-transform duration-300",children:n.jsx(at,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-white",children:u(f,"driver_panel")}),n.jsx("p",{className:"text-xs text-blue-100",children:u(f,"smart_school_bus")})]})]}),n.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-lg text-white/80 hover:text-white hover:bg-white/20 transition-all duration-200",children:n.jsx(lh,{className:"h-6 w-6"})})]})]}),n.jsx("div",{className:"px-6 py-5 border-b border-gray-200/50 dark:border-gray-700/50",children:n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200/50 dark:border-blue-800/50",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-600 to-purple-600 flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300",children:n.jsx("span",{className:"text-lg font-bold text-white",children:((b=a==null?void 0:a.full_name)==null?void 0:b.charAt(0))||"D"})}),n.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:(a==null?void 0:a.full_name)||u(f,"driver_role")}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[n.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1.5 animate-pulse"}),u(f,"online")]})]})]})}),n.jsxs("nav",{className:"px-4 py-6 space-y-2",children:[g.map(E=>{const S=E.icon,y=w(E.href);return n.jsxs(_t,{to:E.href,className:`${y?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/50 scale-105":"text-gray-700 dark:text-gray-300 hover:bg-white/60 dark:hover:bg-gray-700/60 hover:shadow-md"} group flex items-center px-4 py-3 text-sm font-semibold rounded-xl transition-all duration-200 transform hover:scale-105`,onClick:()=>t(!1),children:[n.jsx("div",{className:`${y?"bg-white/20":"bg-gray-100 dark:bg-gray-700 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30"} p-2 rounded-lg mr-3 transition-colors duration-200`,children:n.jsx(S,{className:`${y?"text-white":"text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400"} h-5 w-5 transition-colors duration-200`})}),E.name]},E.name)}),n.jsx("div",{className:"pt-2",children:n.jsx(sy,{role:"driver",className:"w-full"})})]}),n.jsxs("div",{className:"px-4 space-y-2",children:[n.jsx("p",{className:"px-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:u(f,"utilities")}),n.jsx(qn,{className:"w-full",variant:"action"}),n.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 hover:bg-white/60 dark:hover:bg-gray-700/60 rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md group",children:[n.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 mr-3 group-hover:scale-110 transition-transform duration-200",children:l==="dark"?n.jsx(q1,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):n.jsx(T1,{className:"h-5 w-5 text-indigo-600"})}),u(f,l==="dark"?"light_mode":"dark_mode")]})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200/50 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:n.jsxs("button",{onClick:()=>_(!0),className:"w-full flex items-center px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md group",children:[n.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 group-hover:bg-red-100 dark:group-hover:bg-red-900/30 mr-3 group-hover:scale-110 transition-all duration-200",children:n.jsx(ah,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors duration-200"})}),u(f,"logout")]})})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("header",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl shadow-lg border-b border-white/20 dark:border-gray-700/50 lg:hidden sticky top-0 z-30",children:n.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[n.jsx("button",{onClick:()=>t(!0),className:"p-2.5 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white dark:hover:bg-gray-700 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-110",children:n.jsx(j1,{className:"h-6 w-6"})}),n.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:u(f,"driver_dashboard")}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-600 to-purple-600 flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300",children:n.jsx("span",{className:"text-sm font-bold text-white",children:((C=a==null?void 0:a.full_name)==null?void 0:C.charAt(0))||"D"})}),n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"})]})]})}),n.jsx("main",{className:"flex-1 overflow-y-auto",children:n.jsxs(nh,{children:[n.jsx(we,{index:!0,element:n.jsx(js,{to:"home",replace:!0})}),n.jsx(we,{path:"home",element:n.jsx($S,{})}),n.jsx(we,{path:"map",element:n.jsx(HS,{})}),n.jsx(we,{path:"trip/:id?",element:n.jsx(ZS,{})}),n.jsx(we,{path:"notifications",element:n.jsx(VS,{})})]})})]}),n.jsx(Qt,{open:x,onClose:()=>_(!1),title:u(f,"logout"),size:"sm",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:u(f,"confirm_logout")}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:u(f,"cancel")}),n.jsx("button",{onClick:()=>{_(!1),v()},className:"px-4 py-2 rounded-xl bg-red-600 text-white hover:bg-red-700",children:u(f,"logout")})]})]})})]})}function no({children:e}){const{user:t}=ke(),{logout:r}=Fs(),{language:i}=Us(),a=ct(),[l,d]=k.useState(!1),{unreadCount:f}=Ks(),p=()=>{try{r()}catch{}a("/login",{replace:!0})};return n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[n.jsx("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-2 rounded-lg",children:n.jsx(yo,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u(i,"smart_school_bus")}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u(i,"parent_role")})]})]}),n.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[n.jsxs(_t,{to:"/parent",className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors",children:[n.jsx(yo,{className:"w-5 h-5"}),u(i,"dashboard")]}),n.jsxs(_t,{to:"/parent/tracking",className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors",children:[n.jsx(Lt,{className:"w-5 h-5"}),u(i,"tracking")]}),n.jsx(sy,{role:"parent"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(qn,{}),n.jsx(ny,{}),n.jsxs("div",{className:"hidden sm:block text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(t==null?void 0:t.full_name)||u(i,"parent_role")}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t==null?void 0:t.email})]}),n.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-red-50 hover:bg-red-100 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 px-4 py-2 rounded-lg font-medium transition-colors",children:[n.jsx(ah,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:u(i,"logout")})]})]})]})})}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e??n.jsx(Uw,{})}),n.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg z-50",children:n.jsxs("div",{className:"grid grid-cols-3 gap-1 p-2",children:[n.jsxs(_t,{to:"/parent",className:"flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(yo,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),n.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:u(i,"dashboard")})]}),n.jsxs(_t,{to:"/parent/tracking",className:"flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(Lt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),n.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:u(i,"tracking")})]}),n.jsxs(_t,{to:"/parent/notifications",className:"relative flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsxs("div",{className:"relative",children:[n.jsx(xn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),f>0&&n.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-600 rounded-full animate-pulse",children:f>99?"99":f})]}),n.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:u(i,"notifications")})]})]})}),n.jsx(Qt,{open:l,onClose:()=>d(!1),title:u(i,"logout"),size:"sm",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:u(i,"confirm_logout")}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:u(i,"cancel")}),n.jsx("button",{onClick:()=>{d(!1),p()},className:"px-4 py-2 rounded-xl bg-red-600 text-white hover:bg-red-700",children:u(i,"logout")})]})]})})]})}const iy=async()=>(await le.get("/parents/children")).data,ay=async e=>(await le.get(`/parents/child/${e}/bus-location`)).data;function qS(){const e=ct(),{user:t,lang:r}=ke(),[i,a]=k.useState([]),[l,d]=k.useState(!0),[f,p]=k.useState(null);k.useEffect(()=>{x()},[]);const x=async()=>{var g,v;try{d(!0),p(null),console.log("Loading children data...");const w=await iy();if(console.log("Children data received:",w),!w.children||w.children.length===0){a([]);return}const b=await Promise.all(w.children.map(async C=>{try{const E=await ay(C.id);return console.log(`Bus location for ${C.full_name}:`,E),{...C,busStatus:E.has_active_trip?E:null}}catch(E){return console.error(`Error loading bus location for child ${C.id}:`,E),{...C,busStatus:null}}}));a(b)}catch(w){console.error("Error loading dashboard:",w),p(((v=(g=w.response)==null?void 0:g.data)==null?void 0:v.message)||w.message||u(r,"error"))}finally{d(!1)}},_=g=>{switch(g){case"waiting":return n.jsx(Xe,{className:"w-4 h-4"});case"picked":case"onboard":return n.jsx(at,{className:"w-4 h-4"});case"dropped":return n.jsx(vt,{className:"w-4 h-4"});case"absent":case"cancelled":return n.jsx(Jo,{className:"w-4 h-4"});default:return n.jsx(ar,{className:"w-4 h-4"})}};return l?n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 space-y-6 pb-8",children:[n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20 dark:border-gray-700/60",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-blue-200 to-purple-200 rounded-2xl animate-pulse"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-10 bg-gradient-to-r from-blue-200 to-purple-200 rounded-xl w-2/3 mb-2 animate-pulse"}),n.jsx("div",{className:"h-6 bg-gray-200 rounded-lg w-1/2 animate-pulse"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(Hc,{}),n.jsx(Hc,{}),n.jsx(Hc,{})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"h-8 bg-gradient-to-r from-blue-200 to-purple-200 rounded-xl w-64 animate-pulse"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(cm,{}),n.jsx(cm,{})]})]})]}):f?n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-red-200 dark:border-red-900/40 max-w-md w-full text-center",children:[n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl p-4 w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:"⚠️"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Có lỗi xảy ra"}),n.jsx("p",{className:"text-red-600 font-medium",children:f})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 space-y-6 pb-8",children:[n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20 dark:border-gray-700/60",children:n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl p-4 shadow-lg animate-float",children:n.jsx("span",{className:"text-5xl",children:"👨‍👩‍👧"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[u(r,"hello"),", ",(t==null?void 0:t.full_name)||u(r,"parent_role"),"!"]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg mt-1",children:u(r,"track_children_today")})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-blue-100 dark:border-gray-700 hover:shadow-2xl hover:scale-105 transition-all duration-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium flex items-center gap-2",children:[n.jsx("span",{children:"👨‍👩‍👧‍👦"})," ",u(r,"total_children")]}),n.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mt-2",children:i.length})]}),n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 shadow-lg",children:n.jsx(at,{className:"w-8 h-8 text-white"})})]})}),n.jsx("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-green-100 dark:border-gray-700 hover:shadow-2xl hover:scale-105 transition-all duration-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium flex items-center gap-2",children:[n.jsx("span",{children:"🚌"})," ",u(r,"on_bus")]}),n.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mt-2",children:i.filter(g=>{var v,w,b,C;return((w=(v=g.busStatus)==null?void 0:v.trip)==null?void 0:w.status)==="onboard"||((C=(b=g.busStatus)==null?void 0:b.trip)==null?void 0:C.status)==="picked"}).length})]}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 shadow-lg",children:n.jsx(vt,{className:"w-8 h-8 text-white"})})]})}),n.jsx("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-yellow-100 dark:border-gray-700 hover:shadow-2xl hover:scale-105 transition-all duration-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium flex items-center gap-2",children:[n.jsx("span",{children:"⏰"})," ",u(r,"waiting_pickup")]}),n.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mt-2",children:i.filter(g=>{var v,w;return((w=(v=g.busStatus)==null?void 0:v.trip)==null?void 0:w.status)==="waiting"}).length})]}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-4 shadow-lg",children:n.jsx(Xe,{className:"w-8 h-8 text-white"})})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[n.jsx("span",{children:"🎓"})," ",u(r,"your_children")]})}),i.length===0?n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-12 text-center border border-white/20 dark:border-gray-700/60",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full p-6 w-24 h-24 mx-auto mb-4 flex items-center justify-center",children:n.jsx(at,{className:"w-12 h-12 text-gray-400"})}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-semibold",children:u(r,"no_student_info_title")}),n.jsx("p",{className:"text-gray-400 dark:text-gray-400 text-sm mt-2",children:u(r,"please_contact_school")})]}):n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(g=>{var v,w,b;return n.jsxs("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border border-white/20 dark:border-gray-700 hover:scale-[1.02]",children:[n.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-6 text-white relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-3 border border-white/30",children:n.jsx("span",{className:"text-3xl",children:"👶"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:g.full_name}),n.jsxs("p",{className:"text-indigo-100 text-sm mt-1 flex items-center gap-1",children:[n.jsx("span",{children:"📚"})," ",g.grade," - ",g.class]})]})]}),((v=g.busStatus)==null?void 0:v.trip)&&n.jsxs("div",{className:`px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-1.5 backdrop-blur-sm border ${g.busStatus.trip.status==="dropped"?"bg-green-500/30 border-green-300/50":g.busStatus.trip.status==="onboard"?"bg-blue-500/30 border-blue-300/50":g.busStatus.trip.status==="waiting"?"bg-yellow-500/30 border-yellow-300/50":"bg-gray-500/30 border-gray-300/50"} text-white shadow-lg`,children:[_(g.busStatus.trip.status),g.busStatus.trip.status==="waiting"?u(r,"waiting_pickup"):g.busStatus.trip.status==="onboard"?u(r,"picked_up"):g.busStatus.trip.status==="dropped"?u(r,"dropped_off"):g.busStatus.trip.status==="absent"?u(r,"absent"):u(r,"cancelled")]})]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[g.route_name&&n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-700 rounded-xl p-4 border border-blue-100 dark:border-gray-600",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"bg-blue-600 rounded-lg p-2",children:n.jsx(Lt,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-100 flex items-center gap-1",children:[n.jsx("span",{children:"🗺️"})," ",g.route_name]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1 flex items-center gap-1",children:[n.jsx("span",{children:"📍"})," ",g.stop_name]})]})]})}),((w=g.busStatus)==null?void 0:w.bus)&&n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-700 dark:to-gray-700 rounded-xl p-4 border border-green-100 dark:border-gray-600",children:n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-green-600 rounded-lg p-2",children:n.jsx(at,{className:"w-4 h-4 text-white"})}),n.jsxs("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:["🚌 ",g.busStatus.bus.plate]})]}),g.busStatus.driver&&n.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 ml-10 flex items-center gap-1",children:[n.jsx("span",{children:"👨‍✈️"})," ",u(r,"driver_colon")," ",n.jsx("span",{className:"font-semibold",children:g.busStatus.driver.name})]}),((b=g.busStatus.trip)==null?void 0:b.picked_at)&&n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 ml-10 flex items-center gap-1",children:[n.jsx("span",{children:"⏰"})," ",u(r,"boarded_at")," ",n.jsx("span",{className:"font-medium",children:new Date(g.busStatus.trip.picked_at).toLocaleTimeString(r==="vi"?"vi-VN":"en-US")})]})]})}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsxs("button",{onClick:()=>e(`/parent/tracking/${g.id}`),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl hover:scale-105",children:[n.jsx(Lt,{className:"w-5 h-5"}),u(r,"track")]}),n.jsxs("button",{onClick:()=>e(`/parent/history/${g.id}`),className:"flex-1 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 hover:from-gray-200 hover:to-gray-300 dark:hover:from-gray-600 dark:hover:to-gray-500 text-gray-700 dark:text-gray-200 font-bold py-3 px-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg hover:scale-105",children:[n.jsx(Xe,{className:"w-5 h-5"}),u(r,"history")]})]})]})]},g.id)})})]})]})}function KS({driver:e={}}){const{lang:t}=ke();return e?n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:e.avatar||"https://ui-avatars.com/api/?name="+encodeURIComponent(e.name),alt:"driver",className:"w-14 h-14 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:e.name}),n.jsx("div",{className:"text-sm muted",children:u(t,"drivers")})]})]}),n.jsxs("div",{className:"mt-3 text-sm",children:[n.jsxs("div",{children:[u(t,"message"),": ",n.jsx("a",{className:"text-blue-600",href:`tel:${e.phone}`,children:e.phone})]}),n.jsxs("div",{className:"mt-2 muted",children:[u(t,"bus"),": ",e.plate]})]})]}):null}function GS({value:e=500,onChange:t}){const[r,i]=k.useState(e),{lang:a}=ke();return n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"mb-2",children:u(a,"safety_zone")}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("select",{className:"form-input",value:r,onChange:l=>i(Number(l.target.value)),children:[n.jsx("option",{value:250,children:u(a,"meters_250")||"250 m"}),n.jsx("option",{value:500,children:u(a,"meters_500")||"500 m"}),n.jsx("option",{value:1e3,children:u(a,"km_1")||"1 km"})]}),n.jsx("button",{className:"btn",onClick:()=>t&&t(r),children:u(a,"save")||"Lưu"})]}),n.jsx("div",{className:"text-sm muted mt-2",children:u(a,"safety_zone_help")||"Hệ thống sẽ cảnh báo khi xe vào/ra khỏi vùng này."})]})}function QS({open:e,onClose:t,onSubmit:r}){const[i,a]=k.useState(""),[l,d]=k.useState(""),{lang:f}=ke();return e?n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-end sm:items-center justify-center z-[99999]",children:n.jsxs("div",{className:"bg-white p-4 w-full max-w-md rounded-t-lg sm:rounded-lg",children:[n.jsx("h3",{className:"heading mb-2",children:u(f,"report_absence")}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm",children:u(f,"date")||"Ngày"}),n.jsx("input",{type:"date",className:"form-input mt-1",value:i,onChange:p=>a(p.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm",children:u(f,"reason")||"Lý do"}),n.jsx("input",{className:"form-input mt-1",value:l,onChange:p=>d(p.target.value),placeholder:u(f,"reason_placeholder")||"Ví dụ: Ốm, Ra ngoại"})]})]}),n.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[n.jsx("button",{className:"btn btn-ghost",onClick:t,children:u(f,"close")}),n.jsx("button",{className:"btn",onClick:()=>{r&&r({date:i,reason:l}),t&&t()},children:u(f,"send")})]})]})}):null}function XS({buses:e=[]}){const{isDark:t}=bl(),r=e.length?[e[0].lat,e[0].lng]:[10.762622,106.660172];return n.jsxs(cx,{center:r,zoom:13,style:{height:"100%",width:"100%"},children:[t?n.jsx(el,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OSM</a> © <a href='https://carto.com/attributions'>CARTO</a>"}):n.jsx(el,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"}),e.map(i=>n.jsx(hx,{bus:i},i.id))]})}function xm(){const{childId:e}=$0(),[t,r]=k.useState(!1),[i,a]=k.useState(500),[l,d]=k.useState([]),[f,p]=k.useState(null),[x,_]=k.useState(null),[g,v]=k.useState(!0);k.useEffect(()=>{w()},[]),k.useEffect(()=>{if(e&&l.length>0){const y=l.find(N=>N.id===e);y&&(p(y.id),b(y.id))}else l.length>0&&!f&&(p(l[0].id),b(l[0].id))},[e,l]),k.useEffect(()=>{if(f){b(f);const y=setInterval(()=>{b(f)},5e3);return()=>clearInterval(y)}},[f]);const w=async()=>{try{v(!0);const y=await iy();d(y.children||[])}catch(y){console.error("Error loading children:",y)}finally{v(!1)}},b=async y=>{try{const N=await ay(y);_(N)}catch(N){console.error("Error loading bus location:",N),_(null)}},C=l.find(y=>y.id===f),E=x!=null&&x.has_active_trip?{name:x.driver_name||"N/A",phone:x.driver_phone||"N/A",plate:x.bus_plate||"N/A",avatar:""}:null,{lang:S}=ke();return g?n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-12 border border-white/20 dark:border-gray-700/60 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-t-4 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 font-medium",children:u(S,"loading_data")})]})}):l.length===0?n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-12 border border-white/20 dark:border-gray-700/60 text-center max-w-md w-full",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-200 to-gray-300 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:n.jsx(jr,{className:"w-12 h-12 text-gray-500"})}),n.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3",children:u(S,"no_child_info_title")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:u(S,"no_child_info_desc")})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 space-y-6 pb-8",children:[n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-6 border border-white/20 dark:border-gray-700/60",children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl p-4 shadow-lg animate-float",children:n.jsx(Lt,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:u(S,"child_tracking")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:u(S,"view_bus_location_for_child")})]})]}),n.jsxs("button",{onClick:()=>r(!0),className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 flex items-center gap-2",children:[n.jsx("span",{children:"📝"})," ",u(S,"report_absence")]})]})}),l.length>1&&n.jsxs("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20 dark:border-gray-700",children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-200 mb-3 flex items-center gap-2",children:[n.jsx("span",{children:"👶"})," ",u(S,"select_child_to_track")]}),n.jsx("select",{className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-medium transition-all duration-200",value:f||"",onChange:y=>p(y.target.value),children:l.map(y=>n.jsxs("option",{value:y.id,children:[y.full_name," - ",u(S,"grade")," ",y.grade]},y.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700 overflow-hidden",children:n.jsx("div",{className:"h-[550px] relative",children:x!=null&&x.has_active_trip?n.jsx(XS,{buses:[{id:x.bus_id,plate:x.bus_plate,lat:x.current_lat||10.7765,lng:x.current_lng||106.7009,speed:x.speed||0}]}):n.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800",children:n.jsxs("div",{className:"text-center p-8",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-300 to-gray-400 dark:from-gray-700 dark:to-gray-600 rounded-full p-8 w-32 h-32 mx-auto mb-6 flex items-center justify-center",children:n.jsx(at,{className:"w-16 h-16 text-white"})}),n.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-xl font-bold mb-2",children:u(S,"no_active_trip_title")}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u(S,"no_active_trip_desc")})]})})})})}),n.jsxs("div",{className:"space-y-4",children:[C&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 via-pink-100 to-orange-100 rounded-2xl p-6 border-2 border-purple-200 shadow-xl",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-3 shadow-lg",children:n.jsx(jr,{className:"w-7 h-7 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:C.full_name}),n.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[n.jsx("span",{children:"📚"})," ",u(S,"grade")," ",C.grade]})]})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 text-gray-700 bg-white/60 backdrop-blur-sm rounded-xl p-3",children:[n.jsx(Lt,{className:"w-5 h-5 text-purple-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("span",{className:"font-medium",children:[u(S,"pickup_point"),":"]}),n.jsx("p",{className:"font-bold text-gray-900",children:C.stop_name||u(S,"unknown")})]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-gray-700 bg-white/60 backdrop-blur-sm rounded-xl p-3",children:[n.jsx(at,{className:"w-5 h-5 text-purple-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("span",{className:"font-medium",children:[u(S,"route_label"),":"]}),n.jsx("p",{className:"font-bold text-gray-900",children:C.route_name||u(S,"unknown")})]})]})]})]}),E&&n.jsx(KS,{driver:E}),n.jsxs("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20 dark:border-gray-700",children:[n.jsxs("h3",{className:"font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2 text-lg",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg p-2",children:n.jsx(Xe,{className:"w-5 h-5 text-white"})}),u(S,"trip_info_title")]}),x!=null&&x.has_active_trip?n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-700 dark:to-gray-700 rounded-xl p-3 border border-green-200 dark:border-gray-600",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[u(S,"status_label"),":"]}),n.jsxs("span",{className:"font-bold text-green-700 dark:text-green-300 flex items-center gap-1",children:[n.jsx("span",{children:"✅"}),x.trip_status==="waiting"?u(S,"waiting_pickup"):x.trip_status==="onboard"?u(S,"picked_up"):x.trip_status==="dropped"?u(S,"dropped_off"):u(S,"in_progress")]})]})}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-3 border border-gray-200 dark:border-gray-600",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[n.jsx("span",{children:"🚌"})," ",u(S,"bus_label"),":"]}),n.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:x.bus_plate})]})}),n.jsx("div",{className:"bg-blue-50 dark:bg-gray-700 rounded-xl p-3 border border-blue-200 dark:border-gray-600",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[n.jsx("span",{children:"⏰"})," ",u(S,"start_time"),":"]}),n.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:x.start_time||"N/A"})]})}),n.jsx("div",{className:"bg-purple-50 dark:bg-gray-700 rounded-xl p-3 border border-purple-200 dark:border-gray-600",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[n.jsx("span",{children:"👥"})," ",u(S,"students_on_bus"),":"]}),n.jsx("span",{className:"font-bold text-purple-900 dark:text-purple-300",children:x.students_onboard||0})]})})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-orange-100 to-red-100 dark:from-gray-700 dark:to-gray-700 rounded-2xl p-4 mb-3",children:n.jsx(J1,{className:"w-12 h-12 text-orange-600 mx-auto"})}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:u(S,"no_active_trip_now")})]})]}),n.jsx(GS,{value:i,onChange:y=>a(y)})]})]}),n.jsx(QS,{open:t,onClose:()=>r(!1),onSubmit:y=>console.log("absence",y)})]})}function JS(){const{lang:e}=ke(),{notifications:t,unreadCount:r,loading:i,markAsRead:a,deleteNotification:l}=Ks(),[d,f]=k.useState("all"),[p,x]=k.useState(!1),[_,g]=k.useState(null),v=async E=>{if(g(E),x(!0),!E.is_read)try{await a(E.id),g(S=>S&&{...S,is_read:!0})}catch{}},w=E=>{if((E==null?void 0:E.type)==="emergency"&&typeof(E==null?void 0:E.title)=="string"){const S=E.title.match(/Emergency:\s*(\w+)\s*\((low|medium|high|critical)\)/i);if(S){const y=S[1].toLowerCase(),N=S[2].toLowerCase(),R=`emergency_type_${y}`;return`${u(e,R)||y} • ${u(e,N)||N}`}}return(E==null?void 0:E.title)||""},b=(E,S)=>{if(S==="high")return n.jsx(ar,{className:"w-5 h-5 text-red-600"});switch(E){case"alert":case"emergency":return n.jsx(ar,{className:"w-5 h-5 text-red-600"});case"success":return n.jsx(vt,{className:"w-5 h-5 text-green-600"});case"warning":return n.jsx(ar,{className:"w-5 h-5 text-yellow-600"});default:return n.jsx(ea,{className:"w-5 h-5 text-blue-600"})}},C=k.useMemo(()=>t.filter(E=>d==="unread"?!E.is_read:d==="read"?E.is_read:!0),[t,d]);return i?n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-12 border border-white/20 dark:border-gray-700/60 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-t-4 border-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 font-medium",children:u(e,"loading_notifications")})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 space-y-6 pb-8",children:[n.jsx("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl p-6 border border-white/20 dark:border-gray-700/60",children:n.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl p-4 shadow-lg animate-float",children:n.jsx(xn,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:u(e,"notifications_title")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 flex items-center gap-2",children:r>0?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"font-semibold text-red-600",children:[r," ",u(e,"unread_label")]})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:u(e,"all_notifications_read")})]})})]})]})})}),n.jsxs("div",{className:"bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700 p-2 flex gap-2",children:[n.jsxs("button",{onClick:()=>f("all"),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 ${d==="all"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg scale-105":"text-gray-600 hover:bg-gray-100"}`,children:[u(e,"all_label")," (",t.length,")"]}),n.jsxs("button",{onClick:()=>f("unread"),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 ${d==="unread"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg scale-105":"text-gray-600 hover:bg-gray-100"}`,children:[u(e,"unread_label")," (",r,")"]}),n.jsxs("button",{onClick:()=>f("read"),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 ${d==="read"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg scale-105":"text-gray-600 hover:bg-gray-100"}`,children:[u(e,"read_label")," (",t.length-r,")"]})]}),n.jsx("div",{className:"space-y-4",children:C.length===0?n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 dark:border-gray-700/60 p-12 text-center",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-200 to-gray-300 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:n.jsx(Gk,{className:"w-12 h-12 text-gray-500"})}),n.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:u(e,"no_notifications")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d==="unread"?u(e,"all_notifications_read"):u(e,"no_notifications")})]}):C.map(E=>n.jsx("div",{className:`bg-white/90 dark:bg-gray-800 backdrop-blur-sm rounded-2xl shadow-xl border-2 p-6 transition-all hover:shadow-2xl hover:scale-[1.02] cursor-pointer ${E.is_read?"border-gray-200 dark:border-gray-700":E.priority==="high"?"border-red-300 dark:border-red-700 bg-gradient-to-r from-red-50/80 to-orange-50/80 dark:from-red-900/30 dark:to-orange-900/20":E.type==="success"?"border-green-300 dark:border-green-700 bg-gradient-to-r from-green-50/80 to-emerald-50/80 dark:from-green-900/20 dark:to-emerald-900/20":E.type==="warning"?"border-yellow-300 dark:border-yellow-700 bg-gradient-to-r from-yellow-50/80 to-orange-50/80 dark:from-yellow-900/20 dark:to-orange-900/20":"border-blue-300 dark:border-blue-700 bg-gradient-to-r from-blue-50/80 to-indigo-50/80 dark:from-blue-900/20 dark:to-indigo-900/20"}`,onClick:()=>v(E),children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`mt-1 p-3 rounded-xl ${E.priority==="high"?"bg-red-100 dark:bg-red-900/30":E.type==="success"?"bg-green-100 dark:bg-green-900/30":E.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:b(E.type,E.priority)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"flex items-start justify-between gap-4 mb-2",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"font-bold text-gray-900 dark:text-gray-100 text-lg flex items-center gap-2",children:[w(E),!E.is_read&&n.jsx("span",{className:"inline-block px-2 py-1 bg-red-500 text-white text-xs rounded-full animate-pulse",children:u(e,"new_label")})]}),E.sender_name&&n.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-white/60 dark:bg-gray-700/60 backdrop-blur-sm rounded-lg px-3 py-1.5 inline-flex",children:[E.sender_role==="admin"?n.jsx(Zp,{className:"w-4 h-4 text-purple-600"}):n.jsx(jr,{className:"w-4 h-4 text-blue-600"}),n.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-300 font-medium",children:[u(e,"from_label")," ",E.sender_role==="admin"?u(e,"admin_role"):u(e,"driver_role"),": ",n.jsx("span",{className:"font-bold",children:E.sender_name})]})]})]})}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 whitespace-pre-line leading-relaxed",children:E.body}),n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-3 py-1.5 rounded-lg font-medium",children:[n.jsx("span",{children:"🕒"}),new Date(E.created_at).toLocaleDateString(e==="vi"?"vi-VN":"en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),E.priority==="high"&&n.jsxs("span",{className:"px-3 py-1.5 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-lg font-bold flex items-center gap-1 shadow-md",children:[n.jsx("span",{children:"⚠️"})," ",u(e,"high_priority")]})]}),n.jsx("button",{onClick:S=>{S.stopPropagation(),confirm(u(e,"confirm_delete_notification"))&&l(E.id)},className:"p-2.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all hover:scale-110 border border-red-200 dark:border-red-800/50",title:u(e,"delete_label"),children:n.jsx(la,{className:"w-5 h-5"})})]})]})]})},E.id))}),n.jsx(Qt,{open:p,onClose:()=>x(!1),title:_?w(_):"",size:"md",children:_&&n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`p-3 rounded-xl ${_.priority==="high"?"bg-red-100 dark:bg-red-900/30":_.type==="success"?"bg-green-100 dark:bg-green-900/30":_.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:b(_.type,_.priority)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[_.sender_name&&n.jsxs("div",{className:"flex items-center gap-2 mb-2 bg-gray-50 dark:bg-gray-700/60 rounded-lg px-3 py-1.5 inline-flex",children:[_.sender_role==="admin"?n.jsx(Zp,{className:"w-4 h-4 text-purple-600"}):n.jsx(jr,{className:"w-4 h-4 text-blue-600"}),n.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-300 font-medium",children:[u(e,"from_label")," ",_.sender_role==="admin"?u(e,"admin_role"):u(e,"driver_role"),": ",n.jsx("span",{className:"font-bold",children:_.sender_name})]})]}),n.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[n.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:[n.jsx("span",{children:"🕒"}),new Date(_.created_at).toLocaleString(e==="vi"?"vi-VN":"en-US")]}),_.priority==="high"&&n.jsxs("span",{className:"px-2 py-1 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded font-semibold",children:["⚠️ ",u(e,"high_priority")]})]})]})]}),n.jsx("div",{className:"prose max-w-none",children:n.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-line leading-relaxed",children:_.body})}),n.jsxs("div",{className:"flex justify-end gap-3",children:[!_.is_read&&n.jsx("button",{onClick:async()=>{await a(_.id),g({..._,is_read:!0})},className:"px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700",children:u(e,"mark_as_read")||"Mark as read"}),n.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:u(e,"close")})]})]})})]})}function YS(){const[e,t]=k.useState(""),[r,i]=k.useState(""),[a,l]=k.useState(null),[d,f]=k.useState(null),[p,x]=k.useState(null),{login:_}=Fs(),g=ct(),{lang:v}=ke(),w=async b=>{b.preventDefault(),l(null),f(null),x(null);const C=e.trim();if(!/^\S+@\S+\.\S+$/.test(C)){f("Vui lòng nhập email hợp lệ");return}try{const E=await _({email:e,password:r});if(E.must_change_password){try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}g("/change-password",{state:{message:E.message,email:E.email||e,isFirstLogin:!0}});return}E.role==="parent"?g("/parent"):E.role==="driver"?g("/driver"):E.role==="admin"?g("/admin"):g("/")}catch(E){const S=E&&E.error;S==="invalid_email"?f("Email không hợp lệ"):S==="invalid_credentials"?x("Sai email hoặc mật khẩu"):l("Đăng nhập thất bại")}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-teal-600 to-emerald-600 rounded-full mb-4 shadow-lg",children:n.jsx("span",{className:"text-4xl",children:"👨‍👩‍👧‍👦"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:u(v,"parent_dashboard")}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:u(v,"track_children_today")})]}),n.jsx("div",{className:"flex justify-end mb-6",children:n.jsx(qn,{})}),a&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 rounded-lg",children:n.jsxs("p",{className:"text-red-800 dark:text-red-200 text-sm font-medium flex items-center gap-2",children:[n.jsx("span",{children:"⚠️"})," ",a]})}),n.jsxs("form",{onSubmit:w,className:"space-y-5",children:[n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2",children:[n.jsx("span",{children:"📧"})," ",u(v,"email")]}),n.jsx("input",{type:"email",className:`w-full px-4 py-3 bg-white dark:bg-gray-900 border-2 rounded-xl focus:ring-4 transition-all outline-none text-gray-900 dark:text-gray-100 ${d?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-emerald-100"}`,value:e,onChange:b=>t(b.target.value),placeholder:u(v,"email_placeholder")}),d&&n.jsxs("p",{className:"text-red-600 dark:text-red-300 text-sm mt-2 flex items-center gap-1",children:[n.jsx("span",{children:"⚠️"})," ",d]})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2",children:[n.jsx("span",{children:"🔒"})," ",u(v,"password")]}),n.jsx("input",{type:"password",className:`w-full px-4 py-3 bg-white dark:bg-gray-900 border-2 rounded-xl focus:ring-4 transition-all outline-none text-gray-900 dark:text-gray-100 ${p?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-emerald-100"}`,value:r,onChange:b=>i(b.target.value),placeholder:u(v,"password_enter_placeholder")}),p&&n.jsxs("p",{className:"text-red-600 dark:text-red-300 text-sm mt-2 flex items-center gap-1",children:[n.jsx("span",{children:"⚠️"})," ",p]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-gray-200",children:u(v,"remember_me")})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_t,{to:"/change-password-public",className:"text-emerald-700 dark:text-emerald-400 hover:underline font-medium",children:u(v,"change_password")}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx(_t,{to:"/forgot-password",className:"text-emerald-700 dark:text-emerald-400 hover:underline font-medium",children:u(v,"forgot_password")})]})]}),n.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-teal-600 to-emerald-600 text-white py-3.5 rounded-xl font-semibold text-lg hover:from-teal-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl",children:u(v,"sign_in")}),n.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:u(v,"provisioned_info")})]})]})})})}function is({children:e,role:t}){const{user:r}=Fs();return!r||!r.token?n.jsx(js,{to:"/login",replace:!0}):t&&r.role!==t?n.jsx(js,{to:"/login",replace:!0}):e}function e4(){return n.jsx(ik,{children:n.jsxs(nh,{children:[n.jsx(we,{path:"/login",element:n.jsx(cj,{})}),n.jsx(we,{path:"/parent/login",element:n.jsx(YS,{})}),n.jsx(we,{path:"/register",element:n.jsx(js,{to:"/login",replace:!0})}),n.jsx(we,{path:"/forgot-password",element:n.jsx(dj,{})}),n.jsx(we,{path:"/reset-password",element:n.jsx(uj,{})}),n.jsx(we,{path:"/change-password-public",element:n.jsx(mj,{})}),n.jsx(we,{path:"/admin/*",element:n.jsx(is,{role:"admin",children:n.jsx(IS,{})})}),n.jsx(we,{path:"/driver/*",element:n.jsx(is,{role:"driver",children:n.jsx(WS,{})})}),n.jsx(we,{path:"/parent",element:n.jsx(is,{role:"parent",children:n.jsx(no,{children:n.jsx(qS,{})})})}),n.jsx(we,{path:"/parent/tracking",element:n.jsx(is,{role:"parent",children:n.jsx(no,{children:n.jsx(xm,{})})})}),n.jsx(we,{path:"/parent/tracking/:childId",element:n.jsx(is,{role:"parent",children:n.jsx(no,{children:n.jsx(xm,{})})})}),n.jsx(we,{path:"/parent/notifications",element:n.jsx(is,{role:"parent",children:n.jsx(no,{children:n.jsx(JS,{})})})}),n.jsx(we,{path:"/change-password",element:n.jsx(hj,{})}),n.jsx(we,{path:"/",element:n.jsx(js,{to:"/login",replace:!0})}),n.jsx(we,{path:"*",element:n.jsx(js,{to:"/login",replace:!0})})]})})}function t4({children:e}){const{theme:t}=ke();return pn.useEffect(()=>{try{document.documentElement.setAttribute("data-theme",t)}catch{}},[t]),e}M0(document.getElementById("root")).render(n.jsx(pn.StrictMode,{children:n.jsx(j2,{children:n.jsx(Jw,{children:n.jsx(lj,{children:n.jsx(t4,{children:n.jsx(fj,{children:n.jsx(e4,{})})})})})})}));export{S_ as c};
